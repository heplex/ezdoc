<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.ezfri.com/RD/system-design/framework/springcloud/springcloud-intro.html"><meta property="og:site_name" content="EzFri"><meta property="og:title" content="Spring Cloud å…¥é—¨"><meta property="og:type" content="article"><meta property="og:image" content="https://www.ezfri.com/"><meta property="og:updated_time" content="2022-12-02T13:59:58.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Spring Cloud å…¥é—¨"><meta property="article:modified_time" content="2022-12-02T13:59:58.000Z"><meta name="robots" content="all"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="JavaåŸºç¡€, å¤šçº¿ç¨‹, JVM, è™šæ‹Ÿæœº, æ•°æ®åº“, MySQL, Spring, Redis, MyBatis, ç³»ç»Ÿè®¾è®¡, åˆ†å¸ƒå¼, RPC, é«˜å¯ç”¨, é«˜å¹¶å‘"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="stylesheet" href="/iconfont/iconfont.css"><title>Spring Cloud å…¥é—¨ | EzFri</title><meta name="description" content="EzFriçŸ¥è¯†åº“">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.eed630e3.css">
    <link rel="modulepreload" href="/assets/app.65bdb7b8.js"><link rel="modulepreload" href="/assets/springcloud-intro.html.c706b436.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/springcloud-intro.html.18d06837.js"><link rel="prefetch" href="/assets/home.html.cf680523.js"><link rel="prefetch" href="/assets/index.html.e304fcf7.js"><link rel="prefetch" href="/assets/slide.html.194facad.js"><link rel="prefetch" href="/assets/home.html.69b5a2a3.js"><link rel="prefetch" href="/assets/home.html.af75b058.js"><link rel="prefetch" href="/assets/home.html.71b1ca4f.js"><link rel="prefetch" href="/assets/home.html.ce1a6133.js"><link rel="prefetch" href="/assets/interview-ready.html.2e762f9b.js"><link rel="prefetch" href="/assets/interview-recards.html.20f21e29.js"><link rel="prefetch" href="/assets/devops.html.b1575585.js"><link rel="prefetch" href="/assets/basis.html.abfab2cc.js"><link rel="prefetch" href="/assets/character-set.html.41d6485e.js"><link rel="prefetch" href="/assets/cluster.html.3a4cd408.js"><link rel="prefetch" href="/assets/disaster-recovery_remote-live.html.cf88d69f.js"><link rel="prefetch" href="/assets/fallback_circuit-breaker.html.2d06c9e3.js"><link rel="prefetch" href="/assets/high-availability-system-design.html.549a70cf.js"><link rel="prefetch" href="/assets/limit-request.html.df37cefa.js"><link rel="prefetch" href="/assets/performance-test.html.711a0cad.js"><link rel="prefetch" href="/assets/timeout-and-retry.html.b70dff28.js"><link rel="prefetch" href="/assets/load-balancing.html.67da77d5.js"><link rel="prefetch" href="/assets/read-and-write-separation-and-library-subtable.html.c44692c7.js"><link rel="prefetch" href="/assets/api-gateway.html.36151504.js"><link rel="prefetch" href="/assets/distributed-id.html.957080df.js"><link rel="prefetch" href="/assets/distributed-transaction.html.4d79482e.js"><link rel="prefetch" href="/assets/design-pattern.html.6f20f626.js"><link rel="prefetch" href="/assets/J2EEåŸºç¡€çŸ¥è¯†.html.9dd70d78.js"><link rel="prefetch" href="/assets/schedule-task.html.4ba2373d.js"><link rel="prefetch" href="/assets/system-design-questions.html.b73c4747.js"><link rel="prefetch" href="/assets/10-classical-sorting-algorithms.html.cc46b6e2.js"><link rel="prefetch" href="/assets/linkedlist-algorithm-problems.html.9db6a817.js"><link rel="prefetch" href="/assets/string-algorithm-problems.html.dd5b5a9d.js"><link rel="prefetch" href="/assets/the-sword-refers-to-offer.html.f3f1eb66.js"><link rel="prefetch" href="/assets/bloom-filter.html.fd377e06.js"><link rel="prefetch" href="/assets/graph.html.9eabddcc.js"><link rel="prefetch" href="/assets/heap.html.2d7a5a9b.js"><link rel="prefetch" href="/assets/linear-data-structure.html.d68252fc.js"><link rel="prefetch" href="/assets/red-black-tree.html.d375553a.js"><link rel="prefetch" href="/assets/tree.html.cf9cbaa2.js"><link rel="prefetch" href="/assets/linux-intro.html.7f29d8e5.js"><link rel="prefetch" href="/assets/operating-system-basic-questions-01.html.204f9eed.js"><link rel="prefetch" href="/assets/shell-intro.html.7099ad8b.js"><link rel="prefetch" href="/assets/http_https.html.e4c1e646.js"><link rel="prefetch" href="/assets/http1.0_http1.1.html.78f2ce86.js"><link rel="prefetch" href="/assets/osi_tcp-ip-model.html.2de7eac0.js"><link rel="prefetch" href="/assets/other-network-questions.html.474b82fd.js"><link rel="prefetch" href="/assets/è®¡ç®—æœºç½‘ç»œå†…å®¹æ€»ç»“.html.09f22934.js"><link rel="prefetch" href="/assets/a-thousand-lines-of-mysql-study-notes.html.e15999c6.js"><link rel="prefetch" href="/assets/how-sql-executed-in-mysql.html.366e4db4.js"><link rel="prefetch" href="/assets/index-invalidation-caused-by-implicit-conversion.html.0e509999.js"><link rel="prefetch" href="/assets/innodb-implementation-of-mvcc.html.2862b60c.js"><link rel="prefetch" href="/assets/mysql-high-performance-optimization-specification-recommendations.html.b2474ec2.js"><link rel="prefetch" href="/assets/mysql-index.html.b4f2b724.js"><link rel="prefetch" href="/assets/mysql-logs.html.cb4d4684.js"><link rel="prefetch" href="/assets/mysql-questions-01.html.f09dec84.js"><link rel="prefetch" href="/assets/some-thoughts-on-database-storage-time.html.517f9c8e.js"><link rel="prefetch" href="/assets/transaction-isolation-level.html.ee7b43a8.js"><link rel="prefetch" href="/assets/3-commonly-used-cache-read-and-write-strategies.html.4e61d40d.js"><link rel="prefetch" href="/assets/cache-basics.html.b7b04f9e.js"><link rel="prefetch" href="/assets/redis-cluster.html.6ea71110.js"><link rel="prefetch" href="/assets/redis-memory-fragmentation.html.7785b35c.js"><link rel="prefetch" href="/assets/redis-questions-01.html.8e6b298b.js"><link rel="prefetch" href="/assets/kafka-questions-01.html.a17bb8bc.js"><link rel="prefetch" href="/assets/message-queue.html.b5212a15.js"><link rel="prefetch" href="/assets/rabbitmq-intro.html.8b9f74eb.js"><link rel="prefetch" href="/assets/rocketmq-intro.html.6cf01955.js"><link rel="prefetch" href="/assets/rocketmq-questions.html.535053d6.js"><link rel="prefetch" href="/assets/dubbo.html.bb2aa5bb.js"><link rel="prefetch" href="/assets/why-use-rpc.html.d2085c3f.js"><link rel="prefetch" href="/assets/cap_base-theorem.html.aabff7cc.js"><link rel="prefetch" href="/assets/gossip.html.2d4e902b.js"><link rel="prefetch" href="/assets/paxos-algorithm.html.a47bf98e.js"><link rel="prefetch" href="/assets/raft-algorithm.html.14d6c544.js"><link rel="prefetch" href="/assets/bigdecimal.html.28ab69a8.js"><link rel="prefetch" href="/assets/io.html.873e8200.js"><link rel="prefetch" href="/assets/java-basic-01.html.e27ea2f8.js"><link rel="prefetch" href="/assets/java-basic-02.html.f427c901.js"><link rel="prefetch" href="/assets/java-basic-03.html.d3926693.js"><link rel="prefetch" href="/assets/proxy.html.92ab3050.js"><link rel="prefetch" href="/assets/reflection.html.16b3d66b.js"><link rel="prefetch" href="/assets/serialization.html.dbad4a3a.js"><link rel="prefetch" href="/assets/why-there-only-value-passing-in-java.html.f658b65c.js"><link rel="prefetch" href="/assets/java-collection-precautions-for-use.html.6caa4ae5.js"><link rel="prefetch" href="/assets/java-collection-questions-01.html.26a24dea.js"><link rel="prefetch" href="/assets/java-collection-questions-02.html.43867a2b.js"><link rel="prefetch" href="/assets/aqs.html.95a41fa3.js"><link rel="prefetch" href="/assets/atomic-classes.html.2f10c11f.js"><link rel="prefetch" href="/assets/completablefuture-intro.html.4c97fae1.js"><link rel="prefetch" href="/assets/java-concurrent-collections.html.585fbe4b.js"><link rel="prefetch" href="/assets/java-concurrent-questions-01.html.6210ab74.js"><link rel="prefetch" href="/assets/java-concurrent-questions-02.html.d40cbd56.js"><link rel="prefetch" href="/assets/java-thread-pool-best-practices.html.1b007a54.js"><link rel="prefetch" href="/assets/java-thread-pool-summary.html.a5326c97.js"><link rel="prefetch" href="/assets/reentrantlock.html.3b435c70.js"><link rel="prefetch" href="/assets/threadlocal.html.52df7b3b.js"><link rel="prefetch" href="/assets/classloader.html.ef5e778d.js"><link rel="prefetch" href="/assets/java-jvm-questions-01.html.e05c2a8f.js"><link rel="prefetch" href="/assets/jvm-intro.html.a74aca72.js"><link rel="prefetch" href="/assets/jvm-parameters-intro.html.69056348.js"><link rel="prefetch" href="/assets/java10.html.25b31a3d.js"><link rel="prefetch" href="/assets/java11.html.11815e16.js"><link rel="prefetch" href="/assets/java12-13.html.53e9e62e.js"><link rel="prefetch" href="/assets/java14-15.html.fbc231f4.js"><link rel="prefetch" href="/assets/java8-common-new-features.html.cb27fd26.js"><link rel="prefetch" href="/assets/java8-tutorial-translate.html.3bd56699.js"><link rel="prefetch" href="/assets/java9.html.0b5e8022.js"><link rel="prefetch" href="/assets/naming.html.5d93cd63.js"><link rel="prefetch" href="/assets/refactoring.html.9d5d9701.js"><link rel="prefetch" href="/assets/RESTfulAPI.html.47972874.js"><link rel="prefetch" href="/assets/netty.html.d07112f5.js"><link rel="prefetch" href="/assets/advantages_disadvantages-of-jwt.html.cc868daa.js"><link rel="prefetch" href="/assets/basis-of-authority-certification.html.f7a4a7ea.js"><link rel="prefetch" href="/assets/data-desensitization.html.45aebe96.js"><link rel="prefetch" href="/assets/jwt-intro.html.d1668099.js"><link rel="prefetch" href="/assets/sentive-words-filter.html.13060ac4.js"><link rel="prefetch" href="/assets/sso-intro.html.de08967b.js"><link rel="prefetch" href="/assets/md-editor.html.4ce6887e.js"><link rel="prefetch" href="/assets/plugin-tools.html.857276c6.js"><link rel="prefetch" href="/assets/zookeeper-in-action.html.1f29429b.js"><link rel="prefetch" href="/assets/zookeeper-intro.html.5d4503cf.js"><link rel="prefetch" href="/assets/zookeeper-plus.html.a94c7f9f.js"><link rel="prefetch" href="/assets/arraylist-source-code.html.a234e69c.js"><link rel="prefetch" href="/assets/concurrent-hash-map-source-code.html.c8544a8e.js"><link rel="prefetch" href="/assets/hashmap-source-code.html.27eabd8d.js"><link rel="prefetch" href="/assets/page.html.5a76bdd1.js"><link rel="prefetch" href="/assets/page.html.cbabda5c.js"><link rel="prefetch" href="/assets/page.html.40626177.js"><link rel="prefetch" href="/assets/page.html.52073a4a.js"><link rel="prefetch" href="/assets/page.html.0cb78876.js"><link rel="prefetch" href="/assets/mybatis-interview.html.813d2199.js"><link rel="prefetch" href="/assets/spring-boot-auto-assembly-principles.html.eb9783e1.js"><link rel="prefetch" href="/assets/spring-common-annotations.html.a7564ecc.js"><link rel="prefetch" href="/assets/spring-design-patterns-summary.html.22c2bb09.js"><link rel="prefetch" href="/assets/spring-knowledge-and-questions-summary.html.a01d437b.js"><link rel="prefetch" href="/assets/spring-transaction.html.57c87f7b.js"><link rel="prefetch" href="/assets/git-intro.html.9085b2a9.js"><link rel="prefetch" href="/assets/github-tips.html.38846baf.js"><link rel="prefetch" href="/assets/404.html.e0b0a01e.js"><link rel="prefetch" href="/assets/index.html.c1a77ebe.js"><link rel="prefetch" href="/assets/index.html.79779236.js"><link rel="prefetch" href="/assets/index.html.c75bd714.js"><link rel="prefetch" href="/assets/index.html.bd2e2eca.js"><link rel="prefetch" href="/assets/index.html.0500b22a.js"><link rel="prefetch" href="/assets/index.html.e5ef0c99.js"><link rel="prefetch" href="/assets/index.html.7dd53cd7.js"><link rel="prefetch" href="/assets/index.html.b3a29827.js"><link rel="prefetch" href="/assets/index.html.c3bf5ca9.js"><link rel="prefetch" href="/assets/index.html.d5d68b07.js"><link rel="prefetch" href="/assets/index.html.187c41f2.js"><link rel="prefetch" href="/assets/index.html.45316c81.js"><link rel="prefetch" href="/assets/index.html.64205451.js"><link rel="prefetch" href="/assets/index.html.b3c1f666.js"><link rel="prefetch" href="/assets/index.html.2f1e4983.js"><link rel="prefetch" href="/assets/index.html.7805f1d4.js"><link rel="prefetch" href="/assets/index.html.a465a3f6.js"><link rel="prefetch" href="/assets/index.html.629d4310.js"><link rel="prefetch" href="/assets/index.html.439c7396.js"><link rel="prefetch" href="/assets/index.html.25fb4a72.js"><link rel="prefetch" href="/assets/index.html.e8b544a7.js"><link rel="prefetch" href="/assets/index.html.a9ef7b24.js"><link rel="prefetch" href="/assets/index.html.37fc2e83.js"><link rel="prefetch" href="/assets/index.html.a1267f38.js"><link rel="prefetch" href="/assets/index.html.a57a03e9.js"><link rel="prefetch" href="/assets/index.html.de0a1f9c.js"><link rel="prefetch" href="/assets/index.html.7f377eba.js"><link rel="prefetch" href="/assets/index.html.4f49cd3b.js"><link rel="prefetch" href="/assets/index.html.2f1ed682.js"><link rel="prefetch" href="/assets/index.html.9041a696.js"><link rel="prefetch" href="/assets/index.html.0aedeb7e.js"><link rel="prefetch" href="/assets/index.html.4a12d8dc.js"><link rel="prefetch" href="/assets/index.html.0d6cd3bb.js"><link rel="prefetch" href="/assets/index.html.8f506dd4.js"><link rel="prefetch" href="/assets/index.html.412fef02.js"><link rel="prefetch" href="/assets/index.html.425e72c3.js"><link rel="prefetch" href="/assets/index.html.4a4e1b0f.js"><link rel="prefetch" href="/assets/index.html.7a0d4eca.js"><link rel="prefetch" href="/assets/index.html.fb14bb03.js"><link rel="prefetch" href="/assets/index.html.7daab107.js"><link rel="prefetch" href="/assets/home.html.7b05106f.js"><link rel="prefetch" href="/assets/index.html.68b817b0.js"><link rel="prefetch" href="/assets/slide.html.dfa9aa7d.js"><link rel="prefetch" href="/assets/home.html.8bb93b9d.js"><link rel="prefetch" href="/assets/home.html.92cba5ef.js"><link rel="prefetch" href="/assets/home.html.7bc871f1.js"><link rel="prefetch" href="/assets/home.html.5e24954b.js"><link rel="prefetch" href="/assets/interview-ready.html.40674e08.js"><link rel="prefetch" href="/assets/interview-recards.html.5edd740e.js"><link rel="prefetch" href="/assets/devops.html.5c325fb1.js"><link rel="prefetch" href="/assets/basis.html.47eab738.js"><link rel="prefetch" href="/assets/character-set.html.202cf36c.js"><link rel="prefetch" href="/assets/cluster.html.ade426ec.js"><link rel="prefetch" href="/assets/disaster-recovery_remote-live.html.884a1bb9.js"><link rel="prefetch" href="/assets/fallback_circuit-breaker.html.fb829c7b.js"><link rel="prefetch" href="/assets/high-availability-system-design.html.b4792ee7.js"><link rel="prefetch" href="/assets/limit-request.html.f9d2dda4.js"><link rel="prefetch" href="/assets/performance-test.html.bde7afa4.js"><link rel="prefetch" href="/assets/timeout-and-retry.html.9c70b031.js"><link rel="prefetch" href="/assets/load-balancing.html.977aea91.js"><link rel="prefetch" href="/assets/read-and-write-separation-and-library-subtable.html.c4b2517c.js"><link rel="prefetch" href="/assets/api-gateway.html.0c9d7e7d.js"><link rel="prefetch" href="/assets/distributed-id.html.412c9215.js"><link rel="prefetch" href="/assets/distributed-transaction.html.556f9104.js"><link rel="prefetch" href="/assets/design-pattern.html.0e3ea800.js"><link rel="prefetch" href="/assets/J2EEåŸºç¡€çŸ¥è¯†.html.edb04315.js"><link rel="prefetch" href="/assets/schedule-task.html.44195533.js"><link rel="prefetch" href="/assets/system-design-questions.html.df327fca.js"><link rel="prefetch" href="/assets/10-classical-sorting-algorithms.html.924e8195.js"><link rel="prefetch" href="/assets/linkedlist-algorithm-problems.html.0c8c1672.js"><link rel="prefetch" href="/assets/string-algorithm-problems.html.3dbea779.js"><link rel="prefetch" href="/assets/the-sword-refers-to-offer.html.6402a519.js"><link rel="prefetch" href="/assets/bloom-filter.html.941d06c6.js"><link rel="prefetch" href="/assets/graph.html.23a31a24.js"><link rel="prefetch" href="/assets/heap.html.886bdc3c.js"><link rel="prefetch" href="/assets/linear-data-structure.html.b1d0c86f.js"><link rel="prefetch" href="/assets/red-black-tree.html.af1cc9bb.js"><link rel="prefetch" href="/assets/tree.html.dc3f28d4.js"><link rel="prefetch" href="/assets/linux-intro.html.19e80646.js"><link rel="prefetch" href="/assets/operating-system-basic-questions-01.html.433ce476.js"><link rel="prefetch" href="/assets/shell-intro.html.945a2d3e.js"><link rel="prefetch" href="/assets/http_https.html.60a7f2e6.js"><link rel="prefetch" href="/assets/http1.0_http1.1.html.608e8547.js"><link rel="prefetch" href="/assets/osi_tcp-ip-model.html.ec78db5d.js"><link rel="prefetch" href="/assets/other-network-questions.html.2f7c5553.js"><link rel="prefetch" href="/assets/è®¡ç®—æœºç½‘ç»œå†…å®¹æ€»ç»“.html.3cdfdb6b.js"><link rel="prefetch" href="/assets/a-thousand-lines-of-mysql-study-notes.html.45aa0e86.js"><link rel="prefetch" href="/assets/how-sql-executed-in-mysql.html.b35bed2f.js"><link rel="prefetch" href="/assets/index-invalidation-caused-by-implicit-conversion.html.af985417.js"><link rel="prefetch" href="/assets/innodb-implementation-of-mvcc.html.d6fca0bf.js"><link rel="prefetch" href="/assets/mysql-high-performance-optimization-specification-recommendations.html.35191f00.js"><link rel="prefetch" href="/assets/mysql-index.html.a8570099.js"><link rel="prefetch" href="/assets/mysql-logs.html.92bc6b18.js"><link rel="prefetch" href="/assets/mysql-questions-01.html.c312b5d5.js"><link rel="prefetch" href="/assets/some-thoughts-on-database-storage-time.html.3cabd558.js"><link rel="prefetch" href="/assets/transaction-isolation-level.html.4e659fae.js"><link rel="prefetch" href="/assets/3-commonly-used-cache-read-and-write-strategies.html.b523e067.js"><link rel="prefetch" href="/assets/cache-basics.html.00fa8b54.js"><link rel="prefetch" href="/assets/redis-cluster.html.fe0a613b.js"><link rel="prefetch" href="/assets/redis-memory-fragmentation.html.dcd6ff59.js"><link rel="prefetch" href="/assets/redis-questions-01.html.fe4212b5.js"><link rel="prefetch" href="/assets/kafka-questions-01.html.a6b34043.js"><link rel="prefetch" href="/assets/message-queue.html.cd4cf406.js"><link rel="prefetch" href="/assets/rabbitmq-intro.html.a6687714.js"><link rel="prefetch" href="/assets/rocketmq-intro.html.409d2bad.js"><link rel="prefetch" href="/assets/rocketmq-questions.html.6a094b03.js"><link rel="prefetch" href="/assets/dubbo.html.134566ab.js"><link rel="prefetch" href="/assets/why-use-rpc.html.8c14d4da.js"><link rel="prefetch" href="/assets/cap_base-theorem.html.8144ce61.js"><link rel="prefetch" href="/assets/gossip.html.bcaf4ca7.js"><link rel="prefetch" href="/assets/paxos-algorithm.html.dc01536c.js"><link rel="prefetch" href="/assets/raft-algorithm.html.18cae65e.js"><link rel="prefetch" href="/assets/bigdecimal.html.14cef66c.js"><link rel="prefetch" href="/assets/io.html.1f23a33c.js"><link rel="prefetch" href="/assets/java-basic-01.html.27ffce33.js"><link rel="prefetch" href="/assets/java-basic-02.html.e46896a9.js"><link rel="prefetch" href="/assets/java-basic-03.html.66dad484.js"><link rel="prefetch" href="/assets/proxy.html.b8d6a973.js"><link rel="prefetch" href="/assets/reflection.html.5cfeb738.js"><link rel="prefetch" href="/assets/serialization.html.1a2a5728.js"><link rel="prefetch" href="/assets/why-there-only-value-passing-in-java.html.96beae4d.js"><link rel="prefetch" href="/assets/java-collection-precautions-for-use.html.743b3e58.js"><link rel="prefetch" href="/assets/java-collection-questions-01.html.7516c047.js"><link rel="prefetch" href="/assets/java-collection-questions-02.html.d1cd1615.js"><link rel="prefetch" href="/assets/aqs.html.cb151361.js"><link rel="prefetch" href="/assets/atomic-classes.html.d82b2fba.js"><link rel="prefetch" href="/assets/completablefuture-intro.html.d08b5016.js"><link rel="prefetch" href="/assets/java-concurrent-collections.html.ab89b367.js"><link rel="prefetch" href="/assets/java-concurrent-questions-01.html.e3293cbb.js"><link rel="prefetch" href="/assets/java-concurrent-questions-02.html.b93966dc.js"><link rel="prefetch" href="/assets/java-thread-pool-best-practices.html.31609446.js"><link rel="prefetch" href="/assets/java-thread-pool-summary.html.a3a73a0b.js"><link rel="prefetch" href="/assets/reentrantlock.html.58c60540.js"><link rel="prefetch" href="/assets/threadlocal.html.2d087e98.js"><link rel="prefetch" href="/assets/classloader.html.33d18b6e.js"><link rel="prefetch" href="/assets/java-jvm-questions-01.html.f87832f5.js"><link rel="prefetch" href="/assets/jvm-intro.html.5601f004.js"><link rel="prefetch" href="/assets/jvm-parameters-intro.html.55456736.js"><link rel="prefetch" href="/assets/java10.html.f44c9b45.js"><link rel="prefetch" href="/assets/java11.html.e6af7b25.js"><link rel="prefetch" href="/assets/java12-13.html.d1cea51d.js"><link rel="prefetch" href="/assets/java14-15.html.67bcf1aa.js"><link rel="prefetch" href="/assets/java8-common-new-features.html.e987bc8f.js"><link rel="prefetch" href="/assets/java8-tutorial-translate.html.dea30ffc.js"><link rel="prefetch" href="/assets/java9.html.2c83beaf.js"><link rel="prefetch" href="/assets/naming.html.844446ad.js"><link rel="prefetch" href="/assets/refactoring.html.767eba96.js"><link rel="prefetch" href="/assets/RESTfulAPI.html.2db42498.js"><link rel="prefetch" href="/assets/netty.html.01ad275b.js"><link rel="prefetch" href="/assets/advantages_disadvantages-of-jwt.html.8bbcebd8.js"><link rel="prefetch" href="/assets/basis-of-authority-certification.html.5f664db3.js"><link rel="prefetch" href="/assets/data-desensitization.html.a83c5a01.js"><link rel="prefetch" href="/assets/jwt-intro.html.f9cb367d.js"><link rel="prefetch" href="/assets/sentive-words-filter.html.e0a34626.js"><link rel="prefetch" href="/assets/sso-intro.html.db6df719.js"><link rel="prefetch" href="/assets/md-editor.html.d033ffc8.js"><link rel="prefetch" href="/assets/plugin-tools.html.ea6c7d4b.js"><link rel="prefetch" href="/assets/zookeeper-in-action.html.85210906.js"><link rel="prefetch" href="/assets/zookeeper-intro.html.16f31537.js"><link rel="prefetch" href="/assets/zookeeper-plus.html.a79742c7.js"><link rel="prefetch" href="/assets/arraylist-source-code.html.948bd7b1.js"><link rel="prefetch" href="/assets/concurrent-hash-map-source-code.html.9d8e7186.js"><link rel="prefetch" href="/assets/hashmap-source-code.html.e28f4dff.js"><link rel="prefetch" href="/assets/page.html.4b3c1085.js"><link rel="prefetch" href="/assets/page.html.ff78d264.js"><link rel="prefetch" href="/assets/page.html.143ddeea.js"><link rel="prefetch" href="/assets/page.html.637b1d8a.js"><link rel="prefetch" href="/assets/page.html.156699c7.js"><link rel="prefetch" href="/assets/mybatis-interview.html.11a52e8f.js"><link rel="prefetch" href="/assets/spring-boot-auto-assembly-principles.html.55f0479e.js"><link rel="prefetch" href="/assets/spring-common-annotations.html.7097f46c.js"><link rel="prefetch" href="/assets/spring-design-patterns-summary.html.76c77e54.js"><link rel="prefetch" href="/assets/spring-knowledge-and-questions-summary.html.763dee3b.js"><link rel="prefetch" href="/assets/spring-transaction.html.70f406bc.js"><link rel="prefetch" href="/assets/git-intro.html.ed0b915a.js"><link rel="prefetch" href="/assets/github-tips.html.26905af6.js"><link rel="prefetch" href="/assets/404.html.c1604ac8.js"><link rel="prefetch" href="/assets/index.html.8f57c1ed.js"><link rel="prefetch" href="/assets/index.html.dadb1ded.js"><link rel="prefetch" href="/assets/index.html.6d2662c2.js"><link rel="prefetch" href="/assets/index.html.c8d81d05.js"><link rel="prefetch" href="/assets/index.html.1bacc233.js"><link rel="prefetch" href="/assets/index.html.1f5da5de.js"><link rel="prefetch" href="/assets/index.html.d4620cd9.js"><link rel="prefetch" href="/assets/index.html.5f857ba8.js"><link rel="prefetch" href="/assets/index.html.107fcdd3.js"><link rel="prefetch" href="/assets/index.html.3b6e8a0d.js"><link rel="prefetch" href="/assets/index.html.3c193590.js"><link rel="prefetch" href="/assets/index.html.171c5fc6.js"><link rel="prefetch" href="/assets/index.html.ece507ab.js"><link rel="prefetch" href="/assets/index.html.53e29f60.js"><link rel="prefetch" href="/assets/index.html.65bd8ec7.js"><link rel="prefetch" href="/assets/index.html.670542d7.js"><link rel="prefetch" href="/assets/index.html.cf534cdc.js"><link rel="prefetch" href="/assets/index.html.fa7756e8.js"><link rel="prefetch" href="/assets/index.html.231c05ae.js"><link rel="prefetch" href="/assets/index.html.88affc4d.js"><link rel="prefetch" href="/assets/index.html.ade912d4.js"><link rel="prefetch" href="/assets/index.html.864117f7.js"><link rel="prefetch" href="/assets/index.html.f36fb649.js"><link rel="prefetch" href="/assets/index.html.c9c517f6.js"><link rel="prefetch" href="/assets/index.html.a288ec80.js"><link rel="prefetch" href="/assets/index.html.d03b3f1c.js"><link rel="prefetch" href="/assets/index.html.81555e72.js"><link rel="prefetch" href="/assets/index.html.b023a612.js"><link rel="prefetch" href="/assets/index.html.232272ba.js"><link rel="prefetch" href="/assets/index.html.40e1f5c5.js"><link rel="prefetch" href="/assets/index.html.57f27470.js"><link rel="prefetch" href="/assets/index.html.ada5b0f0.js"><link rel="prefetch" href="/assets/index.html.d8e3e45b.js"><link rel="prefetch" href="/assets/index.html.2d9f93f1.js"><link rel="prefetch" href="/assets/index.html.b72e4972.js"><link rel="prefetch" href="/assets/index.html.3f95ebad.js"><link rel="prefetch" href="/assets/index.html.5f9eb2b7.js"><link rel="prefetch" href="/assets/index.html.224f9255.js"><link rel="prefetch" href="/assets/index.html.af4255c3.js"><link rel="prefetch" href="/assets/index.html.34c3015b.js"><link rel="prefetch" href="/assets/404.e6b4a04f.js"><link rel="prefetch" href="/assets/Layout.d0ad6130.js"><link rel="prefetch" href="/assets/Slide.e00ebc64.js"><link rel="prefetch" href="/assets/Blog.677db895.js"><link rel="prefetch" href="/assets/auto.esm.36809f22.js"><link rel="prefetch" href="/assets/index.daae04bf.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.d8b76e20.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.92018b73.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.png" alt="EzFri"><!----><span class="site-name hide-in-pad">EzFri</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="çŸ¥è¯†åº“"><span class="title"><span class="icon iconfont icon-knowledge" style=""></span>çŸ¥è¯†åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/RD/home.html" class="nav-link" aria-label="åç«¯"><span class="icon iconfont icon-houduankaifa" style=""></span>åç«¯<!----></a></li><li class="dropdown-item"><a href="/FE/home.html" class="nav-link" aria-label="å‰ç«¯"><span class="icon iconfont icon-qianduankaifa" style=""></span>å‰ç«¯<!----></a></li><li class="dropdown-item"><a href="/OP/home.html" class="nav-link" aria-label="è¿ç»´"><span class="icon iconfont icon-yunwei" style=""></span>è¿ç»´<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/extend/home/" class="nav-link" aria-label="äººç”Ÿå¦‚é…’"><span class="icon iconfont icon-jiushuihongjiuhongjiubei" style=""></span>äººç”Ÿå¦‚é…’<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/heplex/EzfriDocs" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-java" style=""></span><span class="title">Java</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-computer" style=""></span><span class="title">è®¡ç®—æœºåŸºç¡€</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-database" style=""></span><span class="title">æ•°æ®åº“</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-framework" style=""></span><span class="title">å¸¸ç”¨æ¡†æ¶</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-bxl-spring-boot" style=""></span><span class="title">Spring&amp;Spring Boot</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><a href="/RD/system-design/framework/mybatis/mybatis-interview.html" class="nav-link sidebar-link sidebar-page" aria-label="MyBatis å¸¸è§é¢è¯•æ€»ç»“"><!---->MyBatis å¸¸è§é¢è¯•æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/RD/system-design/framework/netty.html" class="nav-link sidebar-link sidebar-page" aria-label="Netty çŸ¥è¯†ç‚¹&amp;é¢è¯•é¢˜æ€»ç»“"><!---->Netty çŸ¥è¯†ç‚¹&amp;é¢è¯•é¢˜æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Spring Cloud å…¥é—¨"><!---->Spring Cloud å…¥é—¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-spring-cloud" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»€ä¹ˆæ˜¯ Spring Cloud"><!---->ä»€ä¹ˆæ˜¯ Spring Cloud<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#spring-cloud-çš„ç‰ˆæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Spring Cloud çš„ç‰ˆæœ¬"><!---->Spring Cloud çš„ç‰ˆæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#spring-cloud-çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”eureka" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Spring Cloud çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”Eureka"><!---->Spring Cloud çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”Eureka<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#è´Ÿè½½å‡è¡¡ä¹‹-ribbon" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è´Ÿè½½å‡è¡¡ä¹‹ Ribbon"><!---->è´Ÿè½½å‡è¡¡ä¹‹ Ribbon<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-resttemplate" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»€ä¹ˆæ˜¯ RestTemplate?"><!---->ä»€ä¹ˆæ˜¯ RestTemplate?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä¸ºä»€ä¹ˆéœ€è¦-ribbon" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸ºä»€ä¹ˆéœ€è¦ Ribbonï¼Ÿ"><!---->ä¸ºä»€ä¹ˆéœ€è¦ Ribbonï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#nginx-å’Œ-ribbon-çš„å¯¹æ¯”" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nginx å’Œ Ribbon çš„å¯¹æ¯”"><!---->Nginx å’Œ Ribbon çš„å¯¹æ¯”<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ribbon-çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Ribbon çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•"><!---->Ribbon çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-open-feign" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»€ä¹ˆæ˜¯ Open Feign"><!---->ä»€ä¹ˆæ˜¯ Open Feign<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#å¿…ä¸å¯å°‘çš„-hystrix" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¿…ä¸å¯å°‘çš„ Hystrix"><!---->å¿…ä¸å¯å°‘çš„ Hystrix<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-hystrix-ä¹‹ç†”æ–­å’Œé™çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»€ä¹ˆæ˜¯ Hystrix ä¹‹ç†”æ–­å’Œé™çº§"><!---->ä»€ä¹ˆæ˜¯ Hystrix ä¹‹ç†”æ–­å’Œé™çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-hystrix-ä¹‹å…¶ä»–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»€ä¹ˆæ˜¯ Hystrix ä¹‹å…¶ä»–"><!---->ä»€ä¹ˆæ˜¯ Hystrix ä¹‹å…¶ä»–<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#å¾®æœåŠ¡ç½‘å…³â€”â€”zuul" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¾®æœåŠ¡ç½‘å…³â€”â€”Zuul"><!---->å¾®æœåŠ¡ç½‘å…³â€”â€”Zuul<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#zuul-çš„è·¯ç”±åŠŸèƒ½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Zuul çš„è·¯ç”±åŠŸèƒ½"><!---->Zuul çš„è·¯ç”±åŠŸèƒ½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#zuul-çš„è¿‡æ»¤åŠŸèƒ½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Zuul çš„è¿‡æ»¤åŠŸèƒ½"><!---->Zuul çš„è¿‡æ»¤åŠŸèƒ½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#å…³äº-zuul-çš„å…¶ä»–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…³äº Zuul çš„å…¶ä»–"><!---->å…³äº Zuul çš„å…¶ä»–<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#spring-cloud-é…ç½®ç®¡ç†â€”â€”config" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Spring Cloud é…ç½®ç®¡ç†â€”â€”Config"><!---->Spring Cloud é…ç½®ç®¡ç†â€”â€”Config<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†ï¼Ÿ"><!---->ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#config-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Config æ˜¯ä»€ä¹ˆ"><!---->Config æ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#å¼•å‡º-spring-cloud-bus" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¼•å‡º Spring Cloud Bus"><!---->å¼•å‡º Spring Cloud Bus<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ€»ç»“"><!---->æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-xitongsheji" style=""></span><span class="title">ç³»ç»Ÿè®¾è®¡</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-fenbushi" style=""></span><span class="title">åˆ†å¸ƒå¼</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-et-performance" style=""></span><span class="title">é«˜æ€§èƒ½</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-highavailable" style=""></span><span class="title">é«˜å¯ç”¨</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-tool" style=""></span><span class="title">å·¥å…·</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Spring Cloud å…¥é—¨</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´12æœˆ2æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.ezfri.com" target="_blank" rel="noopener noreferrer">EzFri</a></span><span property="author" content="EzFri"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´12æœˆ2æ—¥</span><meta property="datePublished" content="2022-12-02T13:59:58.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´12æœˆ2æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 29 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT29M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-spring-cloud" class="router-link-active router-link-exact-active toc-link level2">ä»€ä¹ˆæ˜¯ Spring Cloud</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#spring-cloud-çš„ç‰ˆæœ¬" class="router-link-active router-link-exact-active toc-link level2">Spring Cloud çš„ç‰ˆæœ¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#spring-cloud-çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”eureka" class="router-link-active router-link-exact-active toc-link level2">Spring Cloud çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”Eureka</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#è´Ÿè½½å‡è¡¡ä¹‹-ribbon" class="router-link-active router-link-exact-active toc-link level2">è´Ÿè½½å‡è¡¡ä¹‹ Ribbon</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-resttemplate" class="router-link-active router-link-exact-active toc-link level3">ä»€ä¹ˆæ˜¯ RestTemplate?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä¸ºä»€ä¹ˆéœ€è¦-ribbon" class="router-link-active router-link-exact-active toc-link level3">ä¸ºä»€ä¹ˆéœ€è¦ Ribbonï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#nginx-å’Œ-ribbon-çš„å¯¹æ¯”" class="router-link-active router-link-exact-active toc-link level3">Nginx å’Œ Ribbon çš„å¯¹æ¯”</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ribbon-çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•" class="router-link-active router-link-exact-active toc-link level3">Ribbon çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-open-feign" class="router-link-active router-link-exact-active toc-link level2">ä»€ä¹ˆæ˜¯ Open Feign</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#å¿…ä¸å¯å°‘çš„-hystrix" class="router-link-active router-link-exact-active toc-link level2">å¿…ä¸å¯å°‘çš„ Hystrix</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-hystrix-ä¹‹ç†”æ–­å’Œé™çº§" class="router-link-active router-link-exact-active toc-link level3">ä»€ä¹ˆæ˜¯ Hystrix ä¹‹ç†”æ–­å’Œé™çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä»€ä¹ˆæ˜¯-hystrix-ä¹‹å…¶ä»–" class="router-link-active router-link-exact-active toc-link level3">ä»€ä¹ˆæ˜¯ Hystrix ä¹‹å…¶ä»–</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#å¾®æœåŠ¡ç½‘å…³â€”â€”zuul" class="router-link-active router-link-exact-active toc-link level2">å¾®æœåŠ¡ç½‘å…³â€”â€”Zuul</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#zuul-çš„è·¯ç”±åŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level3">Zuul çš„è·¯ç”±åŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#zuul-çš„è¿‡æ»¤åŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level3">Zuul çš„è¿‡æ»¤åŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#å…³äº-zuul-çš„å…¶ä»–" class="router-link-active router-link-exact-active toc-link level3">å…³äº Zuul çš„å…¶ä»–</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#spring-cloud-é…ç½®ç®¡ç†â€”â€”config" class="router-link-active router-link-exact-active toc-link level2">Spring Cloud é…ç½®ç®¡ç†â€”â€”Config</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†" class="router-link-active router-link-exact-active toc-link level3">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#config-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">Config æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#å¼•å‡º-spring-cloud-bus" class="router-link-active router-link-exact-active toc-link level2">å¼•å‡º Spring Cloud Bus</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/system-design/framework/springcloud/springcloud-intro.html#æ€»ç»“" class="router-link-active router-link-exact-active toc-link level2">æ€»ç»“</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="spring-cloud-å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#spring-cloud-å…¥é—¨" aria-hidden="true">#</a> Spring Cloud å…¥é—¨</h1><blockquote><p>æœ¬æ–‡åŸºäº Spring Cloud Netflix ã€‚Spring Cloud Alibaba ä¹Ÿæ˜¯éå¸¸ä¸é”™çš„é€‰æ‹©å“¦ï¼</p><p>è½¬è½½è‡ªï¼š<a href="https://juejin.im/post/5de2553e5188256e885f4fa3" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5de2553e5188256e885f4fa3<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>é¦–å…ˆæˆ‘ç»™å¤§å®¶çœ‹ä¸€å¼ å›¾ï¼Œå¦‚æœå¤§å®¶å¯¹è¿™å¼ å›¾æœ‰äº›åœ°æ–¹ä¸å¤ªç†è§£çš„è¯ï¼Œæˆ‘å¸Œæœ›ä½ ä»¬çœ‹å®Œæˆ‘è¿™ç¯‡æ–‡ç« ä¼šæç„¶å¤§æ‚Ÿã€‚</p><p><img src="/assets/image-20220807221048.598987ab.jpg" alt="Spring Cloud æ€»ä½“æ¶æ„" loading="lazy"></p><h2 id="ä»€ä¹ˆæ˜¯-spring-cloud" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-spring-cloud" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯ Spring Cloud</h2><blockquote><p>æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸ä»…å¤æ‚è€Œä¸”å®¹æ˜“å‡ºé”™ã€‚Spring Cloud ä¸ºæœ€å¸¸è§çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¨¡å¼æä¾›äº†ä¸€ç§ç®€å•ä¸”æ˜“äºæ¥å—çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¸®åŠ©å¼€å‘äººå‘˜æ„å»ºæœ‰å¼¹æ€§çš„ã€å¯é çš„ã€åè°ƒçš„åº”ç”¨ç¨‹åºã€‚Spring Cloud æ„å»ºäº Spring Boot ä¹‹ä¸Šï¼Œä½¿å¾—å¼€å‘è€…å¾ˆå®¹æ˜“å…¥æ‰‹å¹¶å¿«é€Ÿåº”ç”¨äºç”Ÿäº§ä¸­ã€‚</p></blockquote><p>å®˜æ–¹æœç„¶å®˜æ–¹ï¼Œä»‹ç»éƒ½è¿™ä¹ˆæœ‰æ¿æœ‰çœ¼çš„ã€‚</p><p>æˆ‘æ‰€ç†è§£çš„ <code>Spring Cloud</code> å°±æ˜¯å¾®æœåŠ¡ç³»ç»Ÿæ¶æ„çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œåœ¨å¹³æ—¶æˆ‘ä»¬æ„å»ºå¾®æœåŠ¡çš„è¿‡ç¨‹ä¸­éœ€è¦åšå¦‚ <strong>æœåŠ¡å‘ç°æ³¨å†Œ</strong> ã€<strong>é…ç½®ä¸­å¿ƒ</strong> ã€<strong>æ¶ˆæ¯æ€»çº¿</strong> ã€<strong>è´Ÿè½½å‡è¡¡</strong> ã€<strong>æ–­è·¯å™¨</strong> ã€<strong>æ•°æ®ç›‘æ§</strong> ç­‰æ“ä½œï¼Œè€Œ Spring Cloud ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—ç®€æ˜“çš„ç¼–ç¨‹æ¨¡å‹ï¼Œä½¿æˆ‘ä»¬èƒ½åœ¨ Spring Boot çš„åŸºç¡€ä¸Šè½»æ¾åœ°å®ç°å¾®æœåŠ¡é¡¹ç›®çš„æ„å»ºã€‚</p><h2 id="spring-cloud-çš„ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#spring-cloud-çš„ç‰ˆæœ¬" aria-hidden="true">#</a> Spring Cloud çš„ç‰ˆæœ¬</h2><p>å½“ç„¶è¿™ä¸ªåªæ˜¯ä¸ªé¢˜å¤–è¯ã€‚</p><p><code>Spring Cloud</code> çš„ç‰ˆæœ¬å·å¹¶ä¸æ˜¯æˆ‘ä»¬é€šå¸¸è§çš„æ•°å­—ç‰ˆæœ¬å·ï¼Œè€Œæ˜¯ä¸€äº›å¾ˆå¥‡æ€ªçš„å•è¯ã€‚è¿™äº›å•è¯å‡ä¸ºè‹±å›½ä¼¦æ•¦åœ°é“ç«™çš„ç«™åã€‚åŒæ—¶æ ¹æ®å­—æ¯è¡¨çš„é¡ºåºæ¥å¯¹åº”ç‰ˆæœ¬æ—¶é—´é¡ºåºï¼Œæ¯”å¦‚ï¼šæœ€æ—© çš„ <code>Release</code> ç‰ˆæœ¬ <code>Angel</code>ï¼Œç¬¬äºŒä¸ª <code>Release</code> ç‰ˆæœ¬ <code>Brixton</code>ï¼ˆè‹±å›½åœ°åï¼‰ï¼Œç„¶åæ˜¯ <code>Camden</code>ã€ <code>Dalston</code>ã€<code>Edgware</code>ã€<code>Finchley</code>ã€<code>Greenwich</code>ã€<code>Hoxton</code>ã€‚</p><h2 id="spring-cloud-çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”eureka" tabindex="-1"><a class="header-anchor" href="#spring-cloud-çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”eureka" aria-hidden="true">#</a> Spring Cloud çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”Eureka</h2><blockquote><p><code>Eureka</code>æ˜¯åŸºäº<code>REST</code>ï¼ˆä»£è¡¨æ€§çŠ¶æ€è½¬ç§»ï¼‰çš„æœåŠ¡ï¼Œä¸»è¦åœ¨ <code>AWS</code> äº‘ä¸­ç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°è´Ÿè½½å‡è¡¡å’Œä¸­é—´å±‚æœåŠ¡å™¨çš„æ•…éšœè½¬ç§»ã€‚æˆ‘ä»¬ç§°æ­¤æœåŠ¡ä¸º<code>Eureka</code>æœåŠ¡å™¨ã€‚Eureka è¿˜å¸¦æœ‰ä¸€ä¸ªåŸºäº <code>Java</code> çš„å®¢æˆ·ç«¯ç»„ä»¶ <code>Eureka Client</code>ï¼Œå®ƒä½¿ä¸æœåŠ¡çš„äº¤äº’å˜å¾—æ›´åŠ å®¹æ˜“ã€‚å®¢æˆ·ç«¯è¿˜å…·æœ‰ä¸€ä¸ªå†…ç½®çš„è´Ÿè½½å¹³è¡¡å™¨ï¼Œå¯ä»¥æ‰§è¡ŒåŸºæœ¬çš„å¾ªç¯è´Ÿè½½å¹³è¡¡ã€‚åœ¨ <code>Netflix</code>ï¼Œæ›´å¤æ‚çš„è´Ÿè½½å‡è¡¡å™¨å°† <code>Eureka</code> åŒ…è£…èµ·æ¥ï¼Œä»¥åŸºäºæµé‡ï¼Œèµ„æºä½¿ç”¨ï¼Œé”™è¯¯æ¡ä»¶ç­‰å¤šç§å› ç´ æä¾›åŠ æƒè´Ÿè½½å‡è¡¡ï¼Œä»¥æä¾›å‡ºè‰²çš„å¼¹æ€§ã€‚</p></blockquote><p>æ€»çš„æ¥è¯´ï¼Œ<code>Eureka</code> å°±æ˜¯ä¸€ä¸ªæœåŠ¡å‘ç°æ¡†æ¶ã€‚ä½•ä¸ºæœåŠ¡ï¼Œä½•åˆä¸ºå‘ç°å‘¢ï¼Ÿ</p><p>ä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œå°±æ¯”å¦‚æˆ‘ä»¬å¹³æ—¶ç§Ÿæˆ¿å­æ‰¾ä¸­ä»‹çš„äº‹æƒ…ã€‚</p><p>åœ¨æ²¡æœ‰ä¸­ä»‹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸€ä¸ªå»å¯»æ‰¾æ˜¯å¦æœ‰æˆ¿å±‹è¦å‡ºç§Ÿçš„æˆ¿ä¸œï¼Œè¿™æ˜¾ç„¶ä¼šéå¸¸çš„è´¹åŠ›ï¼Œä¸€ä½ æ‰¾å‡­ä¸€ä¸ªäººçš„èƒ½åŠ›æ˜¯æ‰¾ä¸åˆ°å¾ˆå¤šæˆ¿æºä¾›ä½ é€‰æ‹©ï¼Œå†è€…ä½ ä¹Ÿæ‡’å¾—è¿™ä¹ˆæ‰¾ä¸‹å»(æ‰¾äº†è¿™ä¹ˆä¹…ï¼Œæ²¡æœ‰åˆé€‚çš„åªèƒ½å°†å°±)ã€‚<strong>è¿™é‡Œçš„æˆ‘ä»¬å°±ç›¸å½“äºå¾®æœåŠ¡ä¸­çš„ <code>Consumer</code> ï¼Œè€Œé‚£äº›æˆ¿ä¸œå°±ç›¸å½“äºå¾®æœåŠ¡ä¸­çš„ <code>Provider</code> ã€‚æ¶ˆè´¹è€… <code>Consumer</code> éœ€è¦è°ƒç”¨æä¾›è€… <code>Provider</code> æä¾›çš„ä¸€äº›æœåŠ¡ï¼Œå°±åƒæˆ‘ä»¬ç°åœ¨éœ€è¦ç§Ÿä»–ä»¬çš„æˆ¿å­ä¸€æ ·ã€‚</strong></p><p>ä½†æ˜¯å¦‚æœåªæ˜¯ç§Ÿå®¢å’Œæˆ¿ä¸œä¹‹é—´è¿›è¡Œå¯»æ‰¾çš„è¯ï¼Œä»–ä»¬çš„æ•ˆç‡æ˜¯å¾ˆä½çš„ï¼Œæˆ¿ä¸œæ‰¾ä¸åˆ°ç§Ÿå®¢èµšä¸åˆ°é’±ï¼Œç§Ÿå®¢æ‰¾ä¸åˆ°æˆ¿ä¸œä½ä¸äº†æˆ¿ã€‚æ‰€ä»¥ï¼Œåæ¥æˆ¿ä¸œè‚¯å®šå°±æƒ³åˆ°äº†å¹¿æ’­è‡ªå·±çš„æˆ¿æºä¿¡æ¯(æ¯”å¦‚åœ¨è¡—è¾¹è´´è´´å°å¹¿å‘Š)ï¼Œè¿™æ ·å¯¹äºæˆ¿ä¸œæ¥è¯´å·²ç»å®Œæˆä»–çš„ä»»åŠ¡(å°†æˆ¿æºå…¬å¸ƒå‡ºå»)ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªé—®é¢˜å°±å‡ºç°äº†ã€‚ç¬¬ä¸€ã€å…¶ä»–ä¸æ˜¯ç§Ÿå®¢çš„éƒ½èƒ½æ”¶åˆ°è¿™ç§ç§Ÿæˆ¿æ¶ˆæ¯ï¼Œè¿™åœ¨ç°å®ä¸–ç•Œæ²¡ä»€ä¹ˆï¼Œä½†æ˜¯åœ¨è®¡ç®—æœºçš„ä¸–ç•Œä¸­å°±ä¼šå‡ºç° <strong>èµ„æºæ¶ˆè€—</strong> çš„é—®é¢˜äº†ã€‚ç¬¬äºŒã€ç§Ÿå®¢è¿™æ ·è¿˜æ˜¯å¾ˆéš¾æ‰¾åˆ°ä½ ï¼Œè¯•æƒ³ä¸€ä¸‹æˆ‘éœ€è¦ç§Ÿæˆ¿ï¼Œæˆ‘è¿˜éœ€è¦ä¸œä¸€ä¸ªè¥¿ä¸€ä¸ªåœ°å»æ‰¾è¡—è¾¹å°å¹¿å‘Šï¼Œéº»ä¸éº»çƒ¦ï¼Ÿ</p><p>é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å½“ç„¶ä¸ä¼šé‚£ä¹ˆå‚»ä¹ä¹çš„ï¼Œç¬¬ä¸€æ—¶é—´å°±æ˜¯å»æ‰¾ <strong>ä¸­ä»‹</strong> å‘€ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ç»Ÿä¸€æˆ¿æºçš„åœ°æ–¹ï¼Œæˆ‘ä»¬æ¶ˆè´¹è€…åªéœ€è¦è·‘åˆ°å®ƒé‚£é‡Œå»æ‰¾å°±è¡Œäº†ã€‚è€Œå¯¹äºæˆ¿ä¸œæ¥è¯´ï¼Œä»–ä»¬ä¹Ÿåªéœ€è¦æŠŠæˆ¿æºåœ¨ä¸­ä»‹é‚£é‡Œå‘å¸ƒå°±è¡Œäº†ã€‚</p><p>é‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬çš„æ¨¡å¼å°±æ˜¯è¿™æ ·çš„äº†ã€‚</p><p><img src="/assets/image-20220807221201.52f1d248.png" alt="" loading="lazy"></p><p>ä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™è¿˜ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚</p><ol><li>æˆ¿ä¸œæ³¨å†Œä¹‹åå¦‚æœä¸æƒ³å–æˆ¿å­äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯éœ€è¦è®©æˆ¿ä¸œ <strong>å®šæœŸç»­çº¦</strong> ï¼Ÿå¦‚æœæˆ¿ä¸œä¸è¿›è¡Œç»­çº¦æ˜¯ä¸æ˜¯è¦å°†ä»–ä»¬ä»ä¸­ä»‹é‚£é‡Œçš„æ³¨å†Œåˆ—è¡¨ä¸­ <strong>ç§»é™¤</strong> ã€‚</li><li>ç§Ÿå®¢æ˜¯ä¸æ˜¯ä¹Ÿè¦è¿›è¡Œ <strong>æ³¨å†Œ</strong> å‘¢ï¼Ÿä¸ç„¶åˆåŒä¹™æ–¹æ€ä¹ˆæ¥å‘¢ï¼Ÿ</li><li>ä¸­ä»‹å¯ä¸å¯ä»¥åš <strong>è¿é”åº—</strong> å‘¢ï¼Ÿå¦‚æœè¿™ä¸€ä¸ªåº—å› ä¸ºæŸäº›ä¸å¯æŠ—åŠ›å› ç´ è€Œæ— æ³•ä½¿ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥æ¢ä¸€ä¸ªè¿é”åº—å‘¢ï¼Ÿ</li></ol><p>é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜æˆ‘ä»¬æ¥é‡æ–°æ„å»ºä¸€ä¸‹ä¸Šé¢çš„æ¨¡å¼å›¾</p><p><img src="/assets/image-20220807221211.cda26448.png" alt="ç§Ÿæˆ¿-ä¸­ä»‹æ¨¡å¼å›¾" loading="lazy"></p><p>å¥½äº†ï¼Œä¸¾å®Œè¿™ä¸ªğŸŒ°æˆ‘ä»¬å°±å¯ä»¥æ¥çœ‹å…³äº <code>Eureka</code> çš„ä¸€äº›åŸºç¡€æ¦‚å¿µäº†ï¼Œä½ ä¼šå‘ç°è¿™ä¸œè¥¿ç†è§£èµ·æ¥æ€ä¹ˆè¿™ä¹ˆç®€å•ã€‚ğŸ‘ŠğŸ‘ŠğŸ‘Š</p><p><strong>æœåŠ¡å‘ç°</strong>ï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªâ€œä¸­ä»‹â€ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­æœ‰ä¸‰ä¸ªè§’è‰²ï¼š<strong>æœåŠ¡æä¾›è€…(å‡ºç§Ÿæˆ¿å­çš„)ã€æœåŠ¡æ¶ˆè´¹è€…(ç§Ÿå®¢)ã€æœåŠ¡ä¸­ä»‹(æˆ¿å±‹ä¸­ä»‹)</strong>ã€‚</p><p><strong>æœåŠ¡æä¾›è€…</strong>ï¼š å°±æ˜¯æä¾›ä¸€äº›è‡ªå·±èƒ½å¤Ÿæ‰§è¡Œçš„ä¸€äº›æœåŠ¡ç»™å¤–ç•Œã€‚</p><p><strong>æœåŠ¡æ¶ˆè´¹è€…</strong>ï¼š å°±æ˜¯éœ€è¦ä½¿ç”¨ä¸€äº›æœåŠ¡çš„â€œç”¨æˆ·â€ã€‚</p><p><strong>æœåŠ¡ä¸­ä»‹</strong>ï¼š å…¶å®å°±æ˜¯æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ä¹‹é—´çš„â€œæ¡¥æ¢â€ï¼ŒæœåŠ¡æä¾›è€…å¯ä»¥æŠŠè‡ªå·±æ³¨å†Œåˆ°æœåŠ¡ä¸­ä»‹é‚£é‡Œï¼Œè€ŒæœåŠ¡æ¶ˆè´¹è€…å¦‚éœ€è¦æ¶ˆè´¹ä¸€äº›æœåŠ¡(ä½¿ç”¨ä¸€äº›åŠŸèƒ½)å°±å¯ä»¥åœ¨æœåŠ¡ä¸­ä»‹ä¸­å¯»æ‰¾æ³¨å†Œåœ¨æœåŠ¡ä¸­ä»‹çš„æœåŠ¡æä¾›è€…ã€‚</p><p><strong>æœåŠ¡æ³¨å†Œ Register</strong>ï¼š</p><p>å®˜æ–¹è§£é‡Šï¼šå½“ <code>Eureka</code> å®¢æˆ·ç«¯å‘ <code>Eureka Server</code> æ³¨å†Œæ—¶ï¼Œå®ƒæä¾›è‡ªèº«çš„<strong>å…ƒæ•°æ®</strong>ï¼Œæ¯”å¦‚ IP åœ°å€ã€ç«¯å£ï¼Œè¿è¡ŒçŠ¶å†µæŒ‡ç¤ºç¬¦ URLï¼Œä¸»é¡µç­‰ã€‚</p><p>ç»“åˆä¸­ä»‹ç†è§£ï¼šæˆ¿ä¸œ (æä¾›è€… <code>Eureka Client Provider</code>)åœ¨ä¸­ä»‹ (æœåŠ¡å™¨ <code>Eureka Server</code>) é‚£é‡Œç™»è®°æˆ¿å±‹çš„ä¿¡æ¯ï¼Œæ¯”å¦‚é¢ç§¯ï¼Œä»·æ ¼ï¼Œåœ°æ®µç­‰ç­‰(å…ƒæ•°æ® <code>metaData</code>)ã€‚</p><p><strong>æœåŠ¡ç»­çº¦ Renew</strong>ï¼š</p><p>å®˜æ–¹è§£é‡Šï¼š<strong><code>Eureka</code> å®¢æˆ·ä¼šæ¯éš” 30 ç§’(é»˜è®¤æƒ…å†µä¸‹)å‘é€ä¸€æ¬¡å¿ƒè·³æ¥ç»­çº¦</strong>ã€‚ é€šè¿‡ç»­çº¦æ¥å‘ŠçŸ¥ <code>Eureka Server</code> è¯¥ <code>Eureka</code> å®¢æˆ·ä»ç„¶å­˜åœ¨ï¼Œæ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœ <code>Eureka Server</code> åœ¨ 90 ç§’æ²¡æœ‰æ”¶åˆ° <code>Eureka</code> å®¢æˆ·çš„ç»­çº¦ï¼Œå®ƒä¼šå°†å®ä¾‹ä»å…¶æ³¨å†Œè¡¨ä¸­åˆ é™¤ã€‚</p><p>ç»“åˆä¸­ä»‹ç†è§£ï¼šæˆ¿ä¸œ (æä¾›è€… <code>Eureka Client Provider</code>) å®šæœŸå‘Šè¯‰ä¸­ä»‹ (æœåŠ¡å™¨ <code>Eureka Server</code>) æˆ‘çš„æˆ¿å­è¿˜ç§Ÿ(ç»­çº¦) ï¼Œä¸­ä»‹ (æœåŠ¡å™¨<code>Eureka Server</code>) æ”¶åˆ°ä¹‹åç»§ç»­ä¿ç•™æˆ¿å±‹çš„ä¿¡æ¯ã€‚</p><p><strong>è·å–æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ Fetch Registries</strong>ï¼š</p><p>å®˜æ–¹è§£é‡Šï¼š<code>Eureka</code> å®¢æˆ·ç«¯ä»æœåŠ¡å™¨è·å–æ³¨å†Œè¡¨ä¿¡æ¯ï¼Œå¹¶å°†å…¶ç¼“å­˜åœ¨æœ¬åœ°ã€‚å®¢æˆ·ç«¯ä¼šä½¿ç”¨è¯¥ä¿¡æ¯æŸ¥æ‰¾å…¶ä»–æœåŠ¡ï¼Œä»è€Œè¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚è¯¥æ³¨å†Œåˆ—è¡¨ä¿¡æ¯å®šæœŸï¼ˆæ¯ 30 ç§’é’Ÿï¼‰æ›´æ–°ä¸€æ¬¡ã€‚æ¯æ¬¡è¿”å›æ³¨å†Œåˆ—è¡¨ä¿¡æ¯å¯èƒ½ä¸ <code>Eureka</code> å®¢æˆ·ç«¯çš„ç¼“å­˜ä¿¡æ¯ä¸åŒ, <code>Eureka</code> å®¢æˆ·ç«¯è‡ªåŠ¨å¤„ç†ã€‚å¦‚æœç”±äºæŸç§åŸå› å¯¼è‡´æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ä¸èƒ½åŠæ—¶åŒ¹é…ï¼Œ<code>Eureka</code> å®¢æˆ·ç«¯åˆ™ä¼šé‡æ–°è·å–æ•´ä¸ªæ³¨å†Œè¡¨ä¿¡æ¯ã€‚ <code>Eureka</code> æœåŠ¡å™¨ç¼“å­˜æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ï¼Œæ•´ä¸ªæ³¨å†Œè¡¨ä»¥åŠæ¯ä¸ªåº”ç”¨ç¨‹åºçš„ä¿¡æ¯è¿›è¡Œäº†å‹ç¼©ï¼Œå‹ç¼©å†…å®¹å’Œæ²¡æœ‰å‹ç¼©çš„å†…å®¹å®Œå…¨ç›¸åŒã€‚<code>Eureka</code> å®¢æˆ·ç«¯å’Œ <code>Eureka</code> æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨ JSON / XML æ ¼å¼è¿›è¡Œé€šè®¯ã€‚åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ <code>Eureka</code> å®¢æˆ·ç«¯ä½¿ç”¨å‹ç¼© <code>JSON</code> æ ¼å¼æ¥è·å–æ³¨å†Œåˆ—è¡¨çš„ä¿¡æ¯ã€‚</p><p>ç»“åˆä¸­ä»‹ç†è§£ï¼šç§Ÿå®¢(æ¶ˆè´¹è€… <code>Eureka Client Consumer</code>) å»ä¸­ä»‹ (æœåŠ¡å™¨ <code>Eureka Server</code>) é‚£é‡Œè·å–æ‰€æœ‰çš„æˆ¿å±‹ä¿¡æ¯åˆ—è¡¨ (å®¢æˆ·ç«¯åˆ—è¡¨ <code>Eureka Client List</code>) ï¼Œè€Œä¸”ç§Ÿå®¢ä¸ºäº†è·å–æœ€æ–°çš„ä¿¡æ¯ä¼šå®šæœŸå‘ä¸­ä»‹ (æœåŠ¡å™¨ <code>Eureka Server</code>) é‚£é‡Œè·å–å¹¶æ›´æ–°æœ¬åœ°åˆ—è¡¨ã€‚</p><p><strong>æœåŠ¡ä¸‹çº¿ Cancel</strong>ï¼š</p><p>å®˜æ–¹è§£é‡Šï¼šEureka å®¢æˆ·ç«¯åœ¨ç¨‹åºå…³é—­æ—¶å‘ Eureka æœåŠ¡å™¨å‘é€å–æ¶ˆè¯·æ±‚ã€‚ å‘é€è¯·æ±‚åï¼Œè¯¥å®¢æˆ·ç«¯å®ä¾‹ä¿¡æ¯å°†ä»æœåŠ¡å™¨çš„å®ä¾‹æ³¨å†Œè¡¨ä¸­åˆ é™¤ã€‚è¯¥ä¸‹çº¿è¯·æ±‚ä¸ä¼šè‡ªåŠ¨å®Œæˆï¼Œå®ƒéœ€è¦è°ƒç”¨ä»¥ä¸‹å†…å®¹ï¼š<code>DiscoveryManager.getInstance().shutdownComponent();</code></p><p>ç»“åˆä¸­ä»‹ç†è§£ï¼šæˆ¿ä¸œ (æä¾›è€… <code>Eureka Client Provider</code>) å‘Šè¯‰ä¸­ä»‹ (æœåŠ¡å™¨ <code>Eureka Server</code>) æˆ‘çš„æˆ¿å­ä¸ç§Ÿäº†ï¼Œä¸­ä»‹ä¹‹åå°±å°†æ³¨å†Œçš„æˆ¿å±‹ä¿¡æ¯ä»åˆ—è¡¨ä¸­å‰”é™¤ã€‚</p><p><strong>æœåŠ¡å‰”é™¤ Eviction</strong>ï¼š</p><p>å®˜æ–¹è§£é‡Šï¼šåœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œ<strong>å½“ Eureka å®¢æˆ·ç«¯è¿ç»­ 90 ç§’(3 ä¸ªç»­çº¦å‘¨æœŸ)æ²¡æœ‰å‘ Eureka æœåŠ¡å™¨å‘é€æœåŠ¡ç»­çº¦ï¼Œå³å¿ƒè·³ï¼ŒEureka æœåŠ¡å™¨ä¼šå°†è¯¥æœåŠ¡å®ä¾‹ä»æœåŠ¡æ³¨å†Œåˆ—è¡¨åˆ é™¤</strong>ï¼Œå³æœåŠ¡å‰”é™¤ã€‚</p><p>ç»“åˆä¸­ä»‹ç†è§£ï¼šæˆ¿ä¸œ(æä¾›è€… <code>Eureka Client Provider</code>) ä¼šå®šæœŸè”ç³» ä¸­ä»‹ (æœåŠ¡å™¨ <code>Eureka Server</code>) å‘Šè¯‰ä»–æˆ‘çš„æˆ¿å­è¿˜ç§Ÿ(ç»­çº¦)ï¼Œå¦‚æœä¸­ä»‹ (æœåŠ¡å™¨ <code>Eureka Server</code>) é•¿æ—¶é—´æ²¡æ”¶åˆ°æä¾›è€…çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸­ä»‹ä¼šå°†ä»–çš„æˆ¿å±‹ä¿¡æ¯ç»™ä¸‹æ¶(æœåŠ¡å‰”é™¤)ã€‚</p><p>ä¸‹é¢å°±æ˜¯ <code>Netflix</code> å®˜æ–¹ç»™å‡ºçš„ <code>Eureka</code> æ¶æ„å›¾ï¼Œä½ ä¼šå‘ç°å’Œæˆ‘ä»¬å‰é¢ç”»çš„ä¸­ä»‹å›¾åˆ«æ— äºŒè‡´ã€‚</p><p><img src="/assets/image-20220807221224.d68ebe03.png" alt="Eurekaæ¶æ„å›¾" loading="lazy"></p><p>å½“ç„¶ï¼Œå¯ä»¥å……å½“æœåŠ¡å‘ç°çš„ç»„ä»¶æœ‰å¾ˆå¤šï¼š<code>Zookeeper</code> ï¼Œ<code>Consul</code> ï¼Œ <code>Eureka</code> ç­‰ã€‚</p><p>æ›´å¤šå…³äº <code>Eureka</code> çš„çŸ¥è¯†(è‡ªæˆ‘ä¿æŠ¤ï¼Œåˆå§‹æ³¨å†Œç­–ç•¥ç­‰ç­‰)å¯ä»¥è‡ªå·±å»å®˜ç½‘æŸ¥çœ‹ï¼Œæˆ–è€…æŸ¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç«  <a href="https://juejin.im/post/5dd497e3f265da0ba7718018" target="_blank" rel="noopener noreferrer">æ·±å…¥ç†è§£ Eureka<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h2 id="è´Ÿè½½å‡è¡¡ä¹‹-ribbon" tabindex="-1"><a class="header-anchor" href="#è´Ÿè½½å‡è¡¡ä¹‹-ribbon" aria-hidden="true">#</a> è´Ÿè½½å‡è¡¡ä¹‹ Ribbon</h2><h3 id="ä»€ä¹ˆæ˜¯-resttemplate" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-resttemplate" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯ <code>RestTemplate</code>?</h3><p>ä¸æ˜¯è®² <code>Ribbon</code> ä¹ˆï¼Ÿæ€ä¹ˆæ‰¯åˆ°äº† <code>RestTemplate</code> äº†ï¼Ÿä½ å…ˆåˆ«æ€¥ï¼Œå¬æˆ‘æ…¢æ…¢é“æ¥ã€‚</p><p>æˆ‘ä¸å¬æˆ‘ä¸å¬æˆ‘ä¸å¬ğŸ™‰ğŸ™‰ğŸ™‰ã€‚</p><p>æˆ‘å°±è¯´ä¸€å¥ï¼<strong><code>RestTemplate</code>æ˜¯<code>Spring</code>æä¾›çš„ä¸€ä¸ªè®¿é—® Http æœåŠ¡çš„å®¢æˆ·ç«¯ç±»</strong>ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Ÿå°±æ˜¯å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨æ˜¯ä½¿ç”¨çš„ <code>RestTemplate</code> ã€‚æ¯”å¦‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ æ¶ˆè´¹è€… B éœ€è¦è°ƒç”¨ æä¾›è€… A æ‰€æä¾›çš„æœåŠ¡æˆ‘ä»¬å°±éœ€è¦è¿™ä¹ˆå†™ã€‚å¦‚æˆ‘ä¸‹é¢çš„ä¼ªä»£ç ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>
<span class="token comment">// è¿™é‡Œæ˜¯æä¾›è€…Açš„ipåœ°å€ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº† Eureka é‚£ä¹ˆå°±åº”è¯¥æ˜¯æä¾›è€…Açš„åç§°</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SERVICE_PROVIDER_A <span class="token operator">=</span> <span class="token string">&quot;http://localhost:8081&quot;</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/judge&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">judge</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Request</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> SERVICE_PROVIDER_A <span class="token operator">+</span> <span class="token string">&quot;/service1&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForObject</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ å¯¹æºç æ„Ÿå…´è¶£çš„è¯ï¼Œä½ ä¼šå‘ç°ä¸Šé¢æˆ‘ä»¬æ‰€è®²çš„ <code>Eureka</code> æ¡†æ¶ä¸­çš„ <strong>æ³¨å†Œ</strong>ã€<strong>ç»­çº¦</strong> ç­‰ï¼Œåº•å±‚éƒ½æ˜¯ä½¿ç”¨çš„ <code>RestTemplate</code> ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-ribbon" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-ribbon" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆéœ€è¦ Ribbonï¼Ÿ</h3><p><code>Ribbon</code> æ˜¯ <code>Netflix</code> å…¬å¸çš„ä¸€ä¸ªå¼€æºçš„è´Ÿè½½å‡è¡¡ é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯/è¿›ç¨‹å†…è´Ÿè½½å‡è¡¡å™¨ï¼Œ<strong>è¿è¡Œåœ¨æ¶ˆè´¹è€…ç«¯</strong>ã€‚</p><p>æˆ‘ä»¬å†ä¸¾ä¸ªğŸŒ°ï¼Œæ¯”å¦‚æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Œä½†æ˜¯ä¸ºäº†æ•´ä¸ªç³»ç»Ÿçš„ <strong>é«˜å¯ç”¨</strong> ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªç³»ç»Ÿåšä¸€ä¸ªé›†ç¾¤ï¼Œè€Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ¶ˆè´¹è€…å°±å¯ä»¥æ‹¥æœ‰å¤šä¸ªç§’æ€ç³»ç»Ÿçš„è°ƒç”¨é€”å¾„äº†ï¼Œå¦‚ä¸‹å›¾ã€‚</p><p><img src="/assets/image-20220807221257.2f7d0cec.png" alt="ç§’æ€ç³»ç»Ÿ-ribbon" loading="lazy"></p><p>å¦‚æœè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ²¡æœ‰è¿›è¡Œä¸€äº› <strong>å‡è¡¡æ“ä½œ</strong> ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ <code>ç§’æ€ç³»ç»Ÿ1</code> è¿›è¡Œå¤§é‡çš„è°ƒç”¨ï¼Œè€Œå¦å¤–ä¸¤ä¸ªåŸºæœ¬ä¸è¯·æ±‚ï¼Œå°±ä¼šå¯¼è‡´ <code>ç§’æ€ç³»ç»Ÿ1</code> å´©æºƒï¼Œè€Œå¦å¤–ä¸¤ä¸ªå°±å˜æˆäº†å‚€å„¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦åšé›†ç¾¤ï¼Œæˆ‘ä»¬é«˜å¯ç”¨ä½“ç°çš„æ„ä¹‰åˆåœ¨å“ªå‘¢ï¼Ÿ</p><p>æ‰€ä»¥ <code>Ribbon</code> å‡ºç°äº†ï¼Œæ³¨æ„æˆ‘ä»¬ä¸Šé¢åŠ ç²—çš„å‡ ä¸ªå­—â€”â€”<strong>è¿è¡Œåœ¨æ¶ˆè´¹è€…ç«¯</strong>ã€‚æŒ‡çš„æ˜¯ï¼Œ<code>Ribbon</code> æ˜¯è¿è¡Œåœ¨æ¶ˆè´¹è€…ç«¯çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå¦‚ä¸‹å›¾ã€‚</p><p><img src="/assets/image-20220807221315.b2041897.png" alt="ç§’æ€ç³»ç»Ÿ-ribbon2" loading="lazy"></p><p>å…¶å·¥ä½œåŸç†å°±æ˜¯ <code>Consumer</code> ç«¯è·å–åˆ°äº†æ‰€æœ‰çš„æœåŠ¡åˆ—è¡¨ä¹‹åï¼Œåœ¨å…¶<strong>å†…éƒ¨</strong>ä½¿ç”¨<strong>è´Ÿè½½å‡è¡¡ç®—æ³•</strong>ï¼Œè¿›è¡Œå¯¹å¤šä¸ªç³»ç»Ÿçš„è°ƒç”¨ã€‚</p><h3 id="nginx-å’Œ-ribbon-çš„å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#nginx-å’Œ-ribbon-çš„å¯¹æ¯”" aria-hidden="true">#</a> Nginx å’Œ Ribbon çš„å¯¹æ¯”</h3><p>æåˆ° <strong>è´Ÿè½½å‡è¡¡</strong> å°±ä¸å¾—ä¸æåˆ°å¤§åé¼é¼çš„ <code>Nignx</code> äº†ï¼Œè€Œå’Œ <code>Ribbon</code> ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯ä¸€ç§<strong>é›†ä¸­å¼</strong>çš„è´Ÿè½½å‡è¡¡å™¨ã€‚</p><p>ä½•ä¸ºé›†ä¸­å¼å‘¢ï¼Ÿç®€å•ç†è§£å°±æ˜¯ <strong>å°†æ‰€æœ‰è¯·æ±‚éƒ½é›†ä¸­èµ·æ¥ï¼Œç„¶åå†è¿›è¡Œè´Ÿè½½å‡è¡¡</strong>ã€‚å¦‚ä¸‹å›¾ã€‚</p><p><img src="/assets/image-20220807221350.cb3b11d2.png" alt="nginx-vs-ribbon1" loading="lazy"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>Nginx</code> æ˜¯æ¥æ”¶äº†æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œè´Ÿè½½å‡è¡¡çš„ï¼Œè€Œå¯¹äº <code>Ribbon</code> æ¥è¯´å®ƒæ˜¯åœ¨æ¶ˆè´¹è€…ç«¯è¿›è¡Œçš„è´Ÿè½½å‡è¡¡ã€‚å¦‚ä¸‹å›¾ã€‚</p><p><img src="/assets/image-20220807221402.6024cef9.png" alt="nginx-vs-ribbon2" loading="lazy"></p><blockquote><p>è¯·æ³¨æ„ <code>Request</code> çš„ä½ç½®ï¼Œåœ¨ <code>Nginx</code> ä¸­è¯·æ±‚æ˜¯å…ˆè¿›å…¥è´Ÿè½½å‡è¡¡å™¨ï¼Œè€Œåœ¨ <code>Ribbon</code> ä¸­æ˜¯å…ˆåœ¨å®¢æˆ·ç«¯è¿›è¡Œè´Ÿè½½å‡è¡¡æ‰è¿›è¡Œè¯·æ±‚çš„ã€‚</p></blockquote><h3 id="ribbon-çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#ribbon-çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•" aria-hidden="true">#</a> Ribbon çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•</h3><p>è´Ÿè½½å‡è¡¡ï¼Œä¸ç®¡ <code>Nginx</code> è¿˜æ˜¯ <code>Ribbon</code> éƒ½éœ€è¦å…¶ç®—æ³•çš„æ”¯æŒï¼Œå¦‚æœæˆ‘æ²¡è®°é”™çš„è¯ <code>Nginx</code> ä½¿ç”¨çš„æ˜¯ è½®è¯¢å’ŒåŠ æƒè½®è¯¢ç®—æ³•ã€‚è€Œåœ¨ <code>Ribbon</code> ä¸­æœ‰æ›´å¤šçš„è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³•ï¼Œå…¶é»˜è®¤æ˜¯ä½¿ç”¨çš„ <code>RoundRobinRule</code> è½®è¯¢ç­–ç•¥ã€‚</p><ul><li><strong><code>RoundRobinRule</code></strong>ï¼šè½®è¯¢ç­–ç•¥ã€‚<code>Ribbon</code> é»˜è®¤é‡‡ç”¨çš„ç­–ç•¥ã€‚è‹¥ç»è¿‡ä¸€è½®è½®è¯¢æ²¡æœ‰æ‰¾åˆ°å¯ç”¨çš„ <code>provider</code>ï¼Œå…¶æœ€å¤šè½®è¯¢ 10 è½®ã€‚è‹¥æœ€ç»ˆè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å› <code>null</code>ã€‚</li><li><strong><code>RandomRule</code></strong>: éšæœºç­–ç•¥ï¼Œä»æ‰€æœ‰å¯ç”¨çš„ <code>provider</code> ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªã€‚</li><li><strong><code>RetryRule</code></strong>: é‡è¯•ç­–ç•¥ã€‚å…ˆæŒ‰ç…§ <code>RoundRobinRule</code> ç­–ç•¥è·å– <code>provider</code>ï¼Œè‹¥è·å–å¤±è´¥ï¼Œåˆ™åœ¨æŒ‡å®šçš„æ—¶é™å†…é‡è¯•ã€‚é»˜è®¤çš„æ—¶é™ä¸º 500 æ¯«ç§’ã€‚</li></ul><p>ğŸ¦ğŸ¦ğŸ¦ è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸ä¸€ä¸€ä¸¾ğŸŒ°äº†ï¼Œä½ æœ€éœ€è¦çŸ¥é“çš„æ˜¯é»˜è®¤è½®è¯¢ç®—æ³•ï¼Œå¹¶ä¸”å¯ä»¥æ›´æ¢é»˜è®¤çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åšå‡ºä¿®æ”¹å°±è¡Œã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">providerName</span><span class="token punctuation">:</span>
  <span class="token key atrule">ribbon</span><span class="token punctuation">:</span>
    <span class="token key atrule">NFLoadBalancerRuleClassName</span><span class="token punctuation">:</span> com.netflix.loadbalancer.RandomRule
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶ï¼Œåœ¨ <code>Ribbon</code> ä¸­ä½ è¿˜å¯ä»¥<strong>è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç®—æ³•</strong>ï¼Œä½ åªéœ€è¦å®ç° <code>IRule</code> æ¥å£ï¼Œç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶æˆ–è€…è‡ªå®šä¹‰ <code>Java Config</code> ç±»ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-open-feign" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-open-feign" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯ Open Feign</h2><p>æœ‰äº† <code>Eureka</code> ï¼Œ<code>RestTemplate</code> ï¼Œ<code>Ribbon</code>ï¼Œ æˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«åœ°è¿›è¡ŒæœåŠ¡é—´çš„è°ƒç”¨äº†ï¼Œä½†æ˜¯ä½¿ç”¨ <code>RestTemplate</code> è¿˜æ˜¯ä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½è¦è¿›è¡Œè¿™æ ·çš„è°ƒç”¨ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>
<span class="token comment">// è¿™é‡Œæ˜¯æä¾›è€…Açš„ipåœ°å€ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº† Eureka é‚£ä¹ˆå°±åº”è¯¥æ˜¯æä¾›è€…Açš„åç§°</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SERVICE_PROVIDER_A <span class="token operator">=</span> <span class="token string">&quot;http://localhost:8081&quot;</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/judge&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">judge</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Request</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> SERVICE_PROVIDER_A <span class="token operator">+</span> <span class="token string">&quot;/service1&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// æ˜¯ä¸æ˜¯å¤ªéº»çƒ¦äº†ï¼Ÿï¼Ÿï¼Ÿæ¯æ¬¡éƒ½è¦ urlã€è¯·æ±‚ã€è¿”å›ç±»å‹çš„</span>
    <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForObject</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·æ¯æ¬¡éƒ½è°ƒç”¨ <code>RestRemplate</code> çš„ <code>API</code> æ˜¯å¦å¤ªéº»çƒ¦ï¼Œæˆ‘èƒ½ä¸èƒ½åƒ<strong>è°ƒç”¨åŸæ¥ä»£ç ä¸€æ ·è¿›è¡Œå„ä¸ªæœåŠ¡é—´çš„è°ƒç”¨å‘¢ï¼Ÿ</strong></p><p>ğŸ’¡ğŸ’¡ğŸ’¡èªæ˜çš„å°æœ‹å‹è‚¯å®šæƒ³åˆ°äº†ï¼Œé‚£å°±ç”¨ <strong>æ˜ å°„</strong> å‘€ï¼Œå°±åƒåŸŸåå’Œ IP åœ°å€çš„æ˜ å°„ã€‚æˆ‘ä»¬å¯ä»¥å°†è¢«è°ƒç”¨çš„æœåŠ¡ä»£ç æ˜ å°„åˆ°æ¶ˆè´¹è€…ç«¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ **â€œæ— ç¼å¼€å‘â€ **å•¦ã€‚</p><blockquote><p><code>OpenFeign</code> ä¹Ÿæ˜¯è¿è¡Œåœ¨æ¶ˆè´¹è€…ç«¯çš„ï¼Œä½¿ç”¨ <code>Ribbon</code> è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œæ‰€ä»¥ <code>OpenFeign</code> ç›´æ¥å†…ç½®äº† <code>Ribbon</code>ã€‚</p></blockquote><p>åœ¨å¯¼å…¥äº† <code>Open Feign</code> ä¹‹åæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œæ„‰å¿«ç¼–å†™ <code>Consumer</code> ç«¯ä»£ç äº†ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨ @FeignClient æ³¨è§£æ¥æŒ‡å®šæä¾›è€…çš„åå­—</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;eureka-client-provider&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TestClient</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œä¸€å®šè¦æ³¨æ„éœ€è¦ä½¿ç”¨çš„æ˜¯æä¾›è€…é‚£ç«¯çš„è¯·æ±‚ç›¸å¯¹è·¯å¾„ï¼Œè¿™é‡Œå°±ç›¸å½“äºæ˜ å°„äº†</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/provider/xxx&quot;</span><span class="token punctuation">,</span>
    method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
    <span class="token class-name">CommonResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Plan</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPlans</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> planGetRequest request<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬åœ¨ <code>Controller</code> å°±å¯ä»¥åƒåŸæ¥è°ƒç”¨ <code>Service</code> å±‚ä»£ç ä¸€æ ·è°ƒç”¨å®ƒäº†ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œå°±ç›¸å½“äºåŸæ¥è‡ªåŠ¨æ³¨å…¥çš„ Service</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">TestClient</span> testClient<span class="token punctuation">;</span>
    <span class="token comment">// controller è°ƒç”¨ service å±‚ä»£ç </span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/test&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Plan</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> planGetRequest request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> testClient<span class="token punctuation">.</span><span class="token function">getPlans</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¿…ä¸å¯å°‘çš„-hystrix" tabindex="-1"><a class="header-anchor" href="#å¿…ä¸å¯å°‘çš„-hystrix" aria-hidden="true">#</a> å¿…ä¸å¯å°‘çš„ Hystrix</h2><h3 id="ä»€ä¹ˆæ˜¯-hystrix-ä¹‹ç†”æ–­å’Œé™çº§" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-hystrix-ä¹‹ç†”æ–­å’Œé™çº§" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯ Hystrix ä¹‹ç†”æ–­å’Œé™çº§</h3><blockquote><p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œä¸å¯é¿å…åœ°ä¼šæœ‰è®¸å¤šæœåŠ¡ä¾èµ–é¡¹ä¸­çš„æŸäº›å¤±è´¥ã€‚Hystrix æ˜¯ä¸€ä¸ªåº“ï¼Œå¯é€šè¿‡æ·»åŠ ç­‰å¾…æ—¶é—´å®¹é™å’Œå®¹é”™é€»è¾‘æ¥å¸®åŠ©æ‚¨æ§åˆ¶è¿™äº›åˆ†å¸ƒå¼æœåŠ¡ä¹‹é—´çš„äº¤äº’ã€‚Hystrix é€šè¿‡éš”ç¦»æœåŠ¡ä¹‹é—´çš„è®¿é—®ç‚¹ï¼Œåœæ­¢æœåŠ¡ä¹‹é—´çš„çº§è”æ•…éšœå¹¶æä¾›åå¤‡é€‰é¡¹æ¥å®ç°æ­¤ç›®çš„ï¼Œæ‰€æœ‰è¿™äº›éƒ½å¯ä»¥æé«˜ç³»ç»Ÿçš„æ•´ä½“å¼¹æ€§ã€‚</p></blockquote><p>æ€»ä½“æ¥è¯´ <code>Hystrix</code> å°±æ˜¯ä¸€ä¸ªèƒ½è¿›è¡Œ <strong>ç†”æ–­</strong> å’Œ <strong>é™çº§</strong> çš„åº“ï¼Œé€šè¿‡ä½¿ç”¨å®ƒèƒ½æé«˜æ•´ä¸ªç³»ç»Ÿçš„å¼¹æ€§ã€‚</p><p>é‚£ä¹ˆä»€ä¹ˆæ˜¯ ç†”æ–­å’Œé™çº§ å‘¢ï¼Ÿå†ä¸¾ä¸ªğŸŒ°ï¼Œæ­¤æ—¶æˆ‘ä»¬æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿæ˜¯è¿™æ ·çš„ã€‚æœåŠ¡ A è°ƒç”¨äº†æœåŠ¡ Bï¼ŒæœåŠ¡ B å†è°ƒç”¨äº†æœåŠ¡ Cï¼Œä½†æ˜¯å› ä¸ºæŸäº›åŸå› ï¼ŒæœåŠ¡ C é¡¶ä¸ä½äº†ï¼Œè¿™ä¸ªæ—¶å€™å¤§é‡è¯·æ±‚ä¼šåœ¨æœåŠ¡ C é˜»å¡ã€‚</p><p><img src="/assets/image-20220807221418.0debf18a.png" alt="Hystrix1" loading="lazy"></p><p>æœåŠ¡ C é˜»å¡äº†è¿˜å¥½ï¼Œæ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªç³»ç»Ÿå´©æºƒäº†ã€‚ä½†æ˜¯è¯·æ³¨æ„è¿™ä¸ªæ—¶å€™å› ä¸ºæœåŠ¡ C ä¸èƒ½è¿”å›å“åº”ï¼Œé‚£ä¹ˆæœåŠ¡ B è°ƒç”¨æœåŠ¡ C çš„çš„è¯·æ±‚å°±ä¼šé˜»å¡ï¼ŒåŒç†æœåŠ¡ B é˜»å¡äº†ï¼Œé‚£ä¹ˆæœåŠ¡ A ä¹Ÿä¼šé˜»å¡å´©æºƒã€‚</p><blockquote><p>è¯·æ³¨æ„ï¼Œä¸ºä»€ä¹ˆé˜»å¡ä¼šå´©æºƒã€‚å› ä¸ºè¿™äº›è¯·æ±‚ä¼šæ¶ˆè€—å ç”¨ç³»ç»Ÿçš„çº¿ç¨‹ã€IO ç­‰èµ„æºï¼Œæ¶ˆè€—å®Œä½ è¿™ä¸ªç³»ç»ŸæœåŠ¡å™¨ä¸å°±å´©äº†ä¹ˆã€‚</p></blockquote><p><img src="/assets/image-20220807221431.15a676c1.png" alt="Hystrix2" loading="lazy"></p><p>è¿™å°±å« <strong>æœåŠ¡é›ªå´©</strong>ã€‚å¦ˆè€¶ï¼Œä¸Šé¢ä¸¤ä¸ª <strong>ç†”æ–­</strong> å’Œ <strong>é™çº§</strong> ä½ éƒ½æ²¡ç»™æˆ‘è§£é‡Šæ¸…æ¥šï¼Œä½ ç°åœ¨åˆç»™æˆ‘æ‰¯ä»€ä¹ˆ <strong>æœåŠ¡é›ªå´©</strong> ï¼ŸğŸ˜«ğŸ˜«ğŸ˜«</p><p>åˆ«æ€¥ï¼Œå¬æˆ‘æ…¢æ…¢é“æ¥ã€‚</p><p>ä¸å¬æˆ‘ä¹Ÿå¾—è®²ä¸‹å»ï¼</p><p>æ‰€è°“ <strong>ç†”æ–­</strong> å°±æ˜¯æœåŠ¡é›ªå´©çš„ä¸€ç§æœ‰æ•ˆè§£å†³æ–¹æ¡ˆã€‚å½“æŒ‡å®šæ—¶é—´çª—å†…çš„è¯·æ±‚å¤±è´¥ç‡è¾¾åˆ°è®¾å®šé˜ˆå€¼æ—¶ï¼Œç³»ç»Ÿå°†é€šè¿‡ <strong>æ–­è·¯å™¨</strong> ç›´æ¥å°†æ­¤è¯·æ±‚é“¾è·¯æ–­å¼€ã€‚</p><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æœåŠ¡ B è°ƒç”¨æœåŠ¡ C åœ¨æŒ‡å®šæ—¶é—´çª—å†…ï¼Œè°ƒç”¨çš„å¤±è´¥ç‡åˆ°è¾¾äº†ä¸€å®šçš„å€¼ï¼Œé‚£ä¹ˆ <code>Hystrix</code> åˆ™ä¼šè‡ªåŠ¨å°† æœåŠ¡ B ä¸ C ä¹‹é—´çš„è¯·æ±‚éƒ½æ–­äº†ï¼Œä»¥å…å¯¼è‡´æœåŠ¡é›ªå´©ç°è±¡ã€‚</p><p>å…¶å®è¿™é‡Œæ‰€è®²çš„ <strong>ç†”æ–­</strong> å°±æ˜¯æŒ‡çš„ <code>Hystrix</code> ä¸­çš„ <strong>æ–­è·¯å™¨æ¨¡å¼</strong> ï¼Œä½ å¯ä»¥ä½¿ç”¨ç®€å•çš„ <code>@HystrixCommand</code> æ³¨è§£æ¥æ ‡æ³¨æŸä¸ªæ–¹æ³•ï¼Œè¿™æ · <code>Hystrix</code> å°±ä¼šä½¿ç”¨ <strong>æ–­è·¯å™¨</strong> æ¥â€œåŒ…è£…â€è¿™ä¸ªæ–¹æ³•ï¼Œæ¯å½“è°ƒç”¨æ—¶é—´è¶…è¿‡æŒ‡å®šæ—¶é—´æ—¶(é»˜è®¤ä¸º 1000ms)ï¼Œæ–­è·¯å™¨å°†ä¼šä¸­æ–­å¯¹è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨ã€‚</p><p>å½“ç„¶ä½ å¯ä»¥å¯¹è¿™ä¸ªæ³¨è§£çš„å¾ˆå¤šå±æ€§è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œåƒè¿™æ ·ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>
    commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.thread.timeoutInMilliseconds&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;1200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Xxx</span><span class="token punctuation">&gt;</span></span> <span class="token function">getXxxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...çœç•¥ä»£ç é€»è¾‘</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯ï¼Œæˆ‘æŸ¥é˜…äº†ä¸€äº›åšå®¢ï¼Œå‘ç°ä»–ä»¬éƒ½å°† <strong>ç†”æ–­</strong> å’Œ <strong>é™çº§</strong> çš„æ¦‚å¿µæ··æ·†äº†ï¼Œä»¥æˆ‘çš„ç†è§£ï¼Œ<strong>é™çº§æ˜¯ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå½“ä¸€ä¸ªæ–¹æ³•è°ƒç”¨å¼‚å¸¸æ—¶ï¼Œé€šè¿‡æ‰§è¡Œå¦ä¸€ç§ä»£ç é€»è¾‘æ¥ç»™ç”¨æˆ·å‹å¥½çš„å›å¤</strong>ã€‚è¿™ä¹Ÿå°±å¯¹åº”ç€ <code>Hystrix</code> çš„ <strong>åå¤‡å¤„ç†</strong> æ¨¡å¼ã€‚ä½ å¯ä»¥é€šè¿‡è®¾ç½® <code>fallbackMethod</code> æ¥ç»™ä¸€ä¸ªæ–¹æ³•è®¾ç½®å¤‡ç”¨çš„ä»£ç é€»è¾‘ã€‚æ¯”å¦‚è¿™ä¸ªæ—¶å€™æœ‰ä¸€ä¸ªçƒ­ç‚¹æ–°é—»å‡ºç°äº†ï¼Œæˆ‘ä»¬ä¼šæ¨èç»™ç”¨æˆ·æŸ¥çœ‹è¯¦æƒ…ï¼Œç„¶åç”¨æˆ·ä¼šé€šè¿‡ id å»æŸ¥è¯¢æ–°é—»çš„è¯¦æƒ…ï¼Œä½†æ˜¯å› ä¸ºè¿™æ¡æ–°é—»å¤ªç«äº†(æ¯”å¦‚æœ€è¿‘ä»€ä¹ˆ*æ˜“å¯¹å§)ï¼Œå¤§é‡ç”¨æˆ·åŒæ—¶è®¿é—®å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¿›è¡Œ <strong>æœåŠ¡é™çº§</strong> ï¼Œä¸€äº›è¯·æ±‚ä¼šåšä¸€äº›é™çº§å¤„ç†æ¯”å¦‚å½“å‰äººæ•°å¤ªå¤šè¯·ç¨åæŸ¥çœ‹ç­‰ç­‰ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æŒ‡å®šäº†åå¤‡æ–¹æ³•è°ƒç”¨</span>
<span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;getHystrixNews&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/get/news&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">News</span> <span class="token function">getNews</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è°ƒç”¨æ–°é—»ç³»ç»Ÿçš„è·å–æ–°é—»api ä»£ç é€»è¾‘çœç•¥</span>
<span class="token punctuation">}</span>
<span class="token comment">//</span>
<span class="token keyword">public</span> <span class="token class-name">News</span> <span class="token function">getHystrixNews</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åšæœåŠ¡é™çº§</span>
    <span class="token comment">// è¿”å›å½“å‰äººæ•°å¤ªå¤šï¼Œè¯·ç¨åæŸ¥çœ‹</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä»€ä¹ˆæ˜¯-hystrix-ä¹‹å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-hystrix-ä¹‹å…¶ä»–" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯ Hystrix ä¹‹å…¶ä»–</h3><p>æˆ‘åœ¨é˜…è¯» ã€ŠSpring å¾®æœåŠ¡å®æˆ˜ã€‹è¿™æœ¬ä¹¦çš„æ—¶å€™è¿˜æ¥è§¦åˆ°äº†ä¸€ä¸ª <strong>èˆ±å£æ¨¡å¼</strong> çš„æ¦‚å¿µã€‚åœ¨ä¸ä½¿ç”¨èˆ±å£æ¨¡å¼çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡ A è°ƒç”¨æœåŠ¡ Bï¼Œè¿™ç§è°ƒç”¨é»˜è®¤çš„æ˜¯ <strong>ä½¿ç”¨åŒä¸€æ‰¹çº¿ç¨‹æ¥æ‰§è¡Œ</strong> çš„ï¼Œè€Œåœ¨ä¸€ä¸ªæœåŠ¡å‡ºç°æ€§èƒ½é—®é¢˜çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°æ‰€æœ‰çº¿ç¨‹è¢«åˆ·çˆ†å¹¶ç­‰å¾…å¤„ç†å·¥ä½œï¼ŒåŒæ—¶é˜»å¡æ–°è¯·æ±‚ï¼Œæœ€ç»ˆå¯¼è‡´ç¨‹åºå´©æºƒã€‚è€Œèˆ±å£æ¨¡å¼ä¼šå°†è¿œç¨‹èµ„æºè°ƒç”¨éš”ç¦»åœ¨ä»–ä»¬è‡ªå·±çš„çº¿ç¨‹æ± ä¸­ï¼Œä»¥ä¾¿å¯ä»¥æ§åˆ¶å•ä¸ªè¡¨ç°ä¸ä½³çš„æœåŠ¡ï¼Œè€Œä¸ä¼šä½¿è¯¥ç¨‹åºå´©æºƒã€‚</p><p>å…·ä½“å…¶åŸç†æˆ‘æ¨èå¤§å®¶è‡ªå·±å»äº†è§£ä¸€ä¸‹ï¼Œæœ¬ç¯‡æ–‡ç« ä¸­å¯¹ <strong>èˆ±å£æ¨¡å¼</strong> ä¸åšè¿‡å¤šè§£é‡Šã€‚å½“ç„¶è¿˜æœ‰ <strong><code>Hystrix</code> ä»ªè¡¨ç›˜</strong>ï¼Œå®ƒæ˜¯<strong>ç”¨æ¥å®æ—¶ç›‘æ§ <code>Hystrix</code> çš„å„é¡¹æŒ‡æ ‡ä¿¡æ¯çš„</strong>ï¼Œè¿™é‡Œæˆ‘å°†è¿™ä¸ªé—®é¢˜ä¹ŸæŠ›å‡ºå»ï¼Œå¸Œæœ›æœ‰ä¸äº†è§£çš„å¯ä»¥è‡ªå·±å»æœç´¢ä¸€ä¸‹ã€‚</p><h2 id="å¾®æœåŠ¡ç½‘å…³â€”â€”zuul" tabindex="-1"><a class="header-anchor" href="#å¾®æœåŠ¡ç½‘å…³â€”â€”zuul" aria-hidden="true">#</a> å¾®æœåŠ¡ç½‘å…³â€”â€”Zuul</h2><blockquote><p>ZUUL æ˜¯ä»è®¾å¤‡å’Œ web ç«™ç‚¹åˆ° Netflix æµåº”ç”¨åç«¯çš„æ‰€æœ‰è¯·æ±‚çš„å‰é—¨ã€‚ä½œä¸ºè¾¹ç•ŒæœåŠ¡åº”ç”¨ï¼ŒZUUL æ˜¯ä¸ºäº†å®ç°åŠ¨æ€è·¯ç”±ã€ç›‘è§†ã€å¼¹æ€§å’Œå®‰å…¨æ€§è€Œæ„å»ºçš„ã€‚å®ƒè¿˜å…·æœ‰æ ¹æ®æƒ…å†µå°†è¯·æ±‚è·¯ç”±åˆ°å¤šä¸ª Amazon Auto Scaling Groupsï¼ˆäºšé©¬é€Šè‡ªåŠ¨ç¼©æ”¾ç»„ï¼Œäºšé©¬é€Šçš„ä¸€ç§äº‘è®¡ç®—æ–¹å¼ï¼‰ çš„èƒ½åŠ›</p></blockquote><p>åœ¨ä¸Šé¢æˆ‘ä»¬å­¦ä¹ äº† <code>Eureka</code> ä¹‹åæˆ‘ä»¬çŸ¥é“äº† <em>æœåŠ¡æä¾›è€…</em> æ˜¯ <em>æ¶ˆè´¹è€…</em> é€šè¿‡ <code>Eureka Server</code> è¿›è¡Œè®¿é—®çš„ï¼Œå³ <code>Eureka Server</code> æ˜¯ <em>æœåŠ¡æä¾›è€…</em> çš„ç»Ÿä¸€å…¥å£ã€‚é‚£ä¹ˆæ•´ä¸ªåº”ç”¨ä¸­å­˜åœ¨é‚£ä¹ˆå¤š <em>æ¶ˆè´¹è€…</em> éœ€è¦ç”¨æˆ·è¿›è¡Œè°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™ç”¨æˆ·è¯¥æ€æ ·è®¿é—®è¿™äº› <em>æ¶ˆè´¹è€…å·¥ç¨‹</em> å‘¢ï¼Ÿå½“ç„¶å¯ä»¥åƒä¹‹å‰é‚£æ ·ç›´æ¥è®¿é—®è¿™äº›å·¥ç¨‹ã€‚ä½†è¿™ç§æ–¹å¼æ²¡æœ‰ç»Ÿä¸€çš„æ¶ˆè´¹è€…å·¥ç¨‹è°ƒç”¨å…¥å£ï¼Œä¸ä¾¿äºè®¿é—®ä¸ç®¡ç†ï¼Œè€Œ Zuul å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªå¯¹äº <em>æ¶ˆè´¹è€…</em> çš„ç»Ÿä¸€å…¥å£ã€‚</p><blockquote><p>å¦‚æœå­¦è¿‡å‰ç«¯çš„è‚¯å®šéƒ½çŸ¥é“ Router å§ï¼Œæ¯”å¦‚ Flutter ä¸­çš„è·¯ç”±ï¼ŒVueï¼ŒReact ä¸­çš„è·¯ç”±ï¼Œç”¨äº† Zuul ä½ ä¼šå‘ç°åœ¨è·¯ç”±åŠŸèƒ½æ–¹é¢å’Œå‰ç«¯é…ç½®è·¯ç”±åŸºæœ¬æ˜¯ä¸€ä¸ªç†ã€‚ğŸ˜„ æˆ‘å¶å°”æ’¸æ’¸ Flutterã€‚</p></blockquote><p>å¤§å®¶å¯¹ç½‘å…³åº”è¯¥å¾ˆç†Ÿå§ï¼Œç®€å•æ¥è®²ç½‘å…³æ˜¯ç³»ç»Ÿå”¯ä¸€å¯¹å¤–çš„å…¥å£ï¼Œä»‹äºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ä¹‹é—´ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œ<strong>é‰´æƒ</strong>ã€<strong>é™æµ</strong>ã€ <strong>è·¯ç”±</strong>ã€<strong>ç›‘æ§</strong>ç­‰åŠŸèƒ½ã€‚</p><p><img src="/assets/image-20220807221449.c1bf2a79.png" alt="" loading="lazy"></p><p>æ²¡é”™ï¼Œç½‘å…³æœ‰çš„åŠŸèƒ½ï¼Œ<code>Zuul</code> åŸºæœ¬éƒ½æœ‰ã€‚è€Œ <code>Zuul</code> ä¸­æœ€å…³é”®çš„å°±æ˜¯ <strong>è·¯ç”±å’Œè¿‡æ»¤å™¨</strong> äº†ï¼Œåœ¨å®˜æ–¹æ–‡æ¡£ä¸­ <code>Zuul</code> çš„æ ‡é¢˜å°±æ˜¯</p><blockquote><p>Router and Filter : Zuul</p></blockquote><h3 id="zuul-çš„è·¯ç”±åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#zuul-çš„è·¯ç”±åŠŸèƒ½" aria-hidden="true">#</a> Zuul çš„è·¯ç”±åŠŸèƒ½</h3><h4 id="ç®€å•é…ç½®" tabindex="-1"><a class="header-anchor" href="#ç®€å•é…ç½®" aria-hidden="true">#</a> ç®€å•é…ç½®</h4><p>æœ¬æ¥æƒ³ç»™ä½ ä»¬å¤åˆ¶ä¸€äº›ä»£ç ï¼Œä½†æ˜¯æƒ³äº†æƒ³ï¼Œå› ä¸ºå„ä¸ªä»£ç é…ç½®æ¯”è¾ƒé›¶æ•£ï¼Œçœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒé›¶æ•£ï¼Œæˆ‘å†³å®šè¿˜æ˜¯ç»™ä½ ä»¬ç”»ä¸ªå›¾æ¥è§£é‡Šå§ã€‚</p><blockquote><p>è¯·ä¸è¦å› ä¸ºæˆ‘è¿™ä¹ˆå¥½å°±ç»™æˆ‘ç‚¹èµ ğŸ‘ ã€‚ ç–¯ç‹‚æš—ç¤ºã€‚</p></blockquote><p>æ¯”å¦‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å·²ç»å‘ <code>Eureka Server</code> æ³¨å†Œäº†ä¸¤ä¸ª <code>Consumer</code> ã€ä¸‰ä¸ª <code>Provicer</code> ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†åŠ ä¸ª <code>Zuul</code> ç½‘å…³åº”è¯¥å˜æˆè¿™æ ·å­äº†ã€‚</p><p><img src="/assets/image-20220807221500.dd0c5671.png" alt="" loading="lazy"></p><p>emmmï¼Œä¿¡æ¯é‡æœ‰ç‚¹å¤§ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ã€‚å…³äºå‰é¢çš„çŸ¥è¯†æˆ‘å°±ä¸è§£é‡Šäº†ğŸ˜ã€‚</p><p>é¦–å…ˆï¼Œ<code>Zuul</code> éœ€è¦å‘ <code>Eureka</code> è¿›è¡Œæ³¨å†Œï¼Œæ³¨å†Œæœ‰å•¥å¥½å¤„å‘¢ï¼Ÿ</p><p>ä½ å‚»å‘€ï¼Œ<code>Consumer</code> éƒ½å‘ <code>Eureka Server</code> è¿›è¡Œæ³¨å†Œäº†ï¼Œæˆ‘ç½‘å…³æ˜¯ä¸æ˜¯åªè¦æ³¨å†Œå°±èƒ½æ‹¿åˆ°æ‰€æœ‰ <code>Consumer</code> çš„ä¿¡æ¯äº†ï¼Ÿ</p><p>æ‹¿åˆ°ä¿¡æ¯æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p><p>æˆ‘æ‹¿åˆ°ä¿¡æ¯æˆ‘æ˜¯ä¸æ˜¯å¯ä»¥è·å–æ‰€æœ‰çš„ <code>Consumer</code> çš„å…ƒæ•°æ®(åç§°ï¼Œipï¼Œç«¯å£)ï¼Ÿ</p><p>æ‹¿åˆ°è¿™äº›å…ƒæ•°æ®æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæ‹¿åˆ°äº†æˆ‘ä»¬æ˜¯ä¸æ˜¯ç›´æ¥å¯ä»¥åš<strong>è·¯ç”±æ˜ å°„</strong>ï¼Ÿæ¯”å¦‚åŸæ¥ç”¨æˆ·è°ƒç”¨ <code>Consumer1</code> çš„æ¥å£ <code>localhost:8001/studentInfo/update</code> è¿™ä¸ªè¯·æ±‚ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·è¿›è¡Œè°ƒç”¨äº†å‘¢ï¼Ÿ<code>localhost:9000/consumer1/studentInfo/update</code> å‘¢ï¼Ÿä½ è¿™æ ·æ˜¯ä¸æ˜¯æç„¶å¤§æ‚Ÿäº†ï¼Ÿ</p><blockquote><p>è¿™é‡Œçš„ url ä¸ºäº†è®©æ›´å¤šäººçœ‹æ‡‚æ‰€ä»¥æ²¡æœ‰ä½¿ç”¨ restful é£æ ¼ã€‚</p></blockquote><p>ä¸Šé¢çš„ä½ ç†è§£äº†ï¼Œé‚£ä¹ˆå°±èƒ½ç†è§£å…³äº <code>Zuul</code> æœ€åŸºæœ¬çš„é…ç½®äº†ï¼Œçœ‹ä¸‹é¢ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9000</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment"># è¿™é‡Œåªè¦æ³¨å†Œ Eureka å°±è¡Œäº†</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>9997/eureka
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶ååœ¨å¯åŠ¨ç±»ä¸ŠåŠ å…¥ <code>@EnableZuulProxy</code> æ³¨è§£å°±è¡Œäº†ã€‚æ²¡é”™ï¼Œå°±æ˜¯é‚£ä¹ˆç®€å•ğŸ˜ƒã€‚</p><h4 id="ç»Ÿä¸€å‰ç¼€" tabindex="-1"><a class="header-anchor" href="#ç»Ÿä¸€å‰ç¼€" aria-hidden="true">#</a> ç»Ÿä¸€å‰ç¼€</h4><p>è¿™ä¸ªå¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å‰é¢åŠ ä¸€ä¸ªç»Ÿä¸€çš„å‰ç¼€ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆšåˆšè°ƒç”¨çš„æ˜¯ <code>localhost:9000/consumer1/studentInfo/update</code>ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åœ¨ <code>yaml</code> é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">prefix</span><span class="token punctuation">:</span> /zuul
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·æˆ‘ä»¬å°±éœ€è¦é€šè¿‡ <code>localhost:9000/zuul/consumer1/studentInfo/update</code> æ¥è¿›è¡Œè®¿é—®äº†ã€‚</p><h4 id="è·¯ç”±ç­–ç•¥é…ç½®" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±ç­–ç•¥é…ç½®" aria-hidden="true">#</a> è·¯ç”±ç­–ç•¥é…ç½®</h4><p>ä½ ä¼šå‘ç°å‰é¢çš„è®¿é—®æ–¹å¼(ç›´æ¥ä½¿ç”¨æœåŠ¡å)ï¼Œéœ€è¦å°†å¾®æœåŠ¡åç§°æš´éœ²ç»™ç”¨æˆ·ï¼Œä¼šå­˜åœ¨å®‰å…¨æ€§é—®é¢˜ã€‚æ‰€ä»¥ï¼Œå¯ä»¥è‡ªå®šä¹‰è·¯å¾„æ¥æ›¿ä»£å¾®æœåŠ¡åç§°ï¼Œå³è‡ªå®šä¹‰è·¯ç”±ç­–ç•¥ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">routes</span><span class="token punctuation">:</span>
    <span class="token key atrule">consumer1</span><span class="token punctuation">:</span> /FrancisQ1/<span class="token important">**</span>
    <span class="token key atrule">consumer2</span><span class="token punctuation">:</span> /FrancisQ2/<span class="token important">**</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥ä½¿ç”¨ ``localhost:9000/zuul/FrancisQ1/studentInfo/update` è¿›è¡Œè®¿é—®äº†ã€‚</p><h4 id="æœåŠ¡åå±è”½" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡åå±è”½" aria-hidden="true">#</a> æœåŠ¡åå±è”½</h4><p>è¿™ä¸ªæ—¶å€™ä½ åˆ«ä»¥ä¸ºä½ å¥½äº†ï¼Œä½ å¯ä»¥è¯•è¯•ï¼Œåœ¨ä½ é…ç½®å®Œè·¯ç”±ç­–ç•¥ä¹‹åä½¿ç”¨å¾®æœåŠ¡åç§°è¿˜æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œè¿™ä¸ªæ—¶å€™ä½ éœ€è¦å°†æœåŠ¡åå±è”½ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">ignore-services</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è·¯å¾„å±è”½" tabindex="-1"><a class="header-anchor" href="#è·¯å¾„å±è”½" aria-hidden="true">#</a> è·¯å¾„å±è”½</h4><p><code>Zuul</code> è¿˜å¯ä»¥æŒ‡å®šå±è”½æ‰çš„è·¯å¾„ URIï¼Œå³åªè¦ç”¨æˆ·è¯·æ±‚ä¸­åŒ…å«æŒ‡å®šçš„ URI è·¯å¾„ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚å°†æ— æ³•è®¿é—®åˆ°æŒ‡å®šçš„æœåŠ¡ã€‚é€šè¿‡è¯¥æ–¹å¼å¯ä»¥é™åˆ¶ç”¨æˆ·çš„æƒé™ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">ignore-patterns</span><span class="token punctuation">:</span> <span class="token important">**/auto/**</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å…³äº auto çš„è¯·æ±‚æˆ‘ä»¬å°±å¯ä»¥è¿‡æ»¤æ‰äº†ã€‚</p><blockquote><p>** ä»£è¡¨åŒ¹é…å¤šçº§ä»»æ„è·¯å¾„</p><p>*ä»£è¡¨åŒ¹é…ä¸€çº§ä»»æ„è·¯å¾„</p></blockquote><h4 id="æ•æ„Ÿè¯·æ±‚å¤´å±è”½" tabindex="-1"><a class="header-anchor" href="#æ•æ„Ÿè¯·æ±‚å¤´å±è”½" aria-hidden="true">#</a> æ•æ„Ÿè¯·æ±‚å¤´å±è”½</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåƒ <code>Cookie</code>ã€<code>Set-Cookie</code> ç­‰æ•æ„Ÿè¯·æ±‚å¤´ä¿¡æ¯ä¼šè¢« <code>zuul</code> å±è”½æ‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›é»˜è®¤å±è”½å»æ‰ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ·»åŠ è¦å±è”½çš„è¯·æ±‚å¤´ã€‚</p><h3 id="zuul-çš„è¿‡æ»¤åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#zuul-çš„è¿‡æ»¤åŠŸèƒ½" aria-hidden="true">#</a> Zuul çš„è¿‡æ»¤åŠŸèƒ½</h3><p>å¦‚æœè¯´ï¼Œè·¯ç”±åŠŸèƒ½æ˜¯ <code>Zuul</code> çš„åŸºæ“çš„è¯ï¼Œé‚£ä¹ˆ<strong>è¿‡æ»¤å™¨</strong>å°±æ˜¯ <code>Zuul</code>çš„åˆ©å™¨äº†ã€‚æ¯•ç«Ÿæ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡ç½‘å…³(Zuul)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿›è¡Œå„ç§è¿‡æ»¤ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å®ç° <strong>é™æµ</strong>ï¼Œ<strong>ç°åº¦å‘å¸ƒ</strong>ï¼Œ<strong>æƒé™æ§åˆ¶</strong> ç­‰ç­‰ã€‚</p><h4 id="ç®€å•å®ç°ä¸€ä¸ªè¯·æ±‚æ—¶é—´æ—¥å¿—æ‰“å°" tabindex="-1"><a class="header-anchor" href="#ç®€å•å®ç°ä¸€ä¸ªè¯·æ±‚æ—¶é—´æ—¥å¿—æ‰“å°" aria-hidden="true">#</a> ç®€å•å®ç°ä¸€ä¸ªè¯·æ±‚æ—¶é—´æ—¥å¿—æ‰“å°</h4><p>è¦å®ç°è‡ªå·±å®šä¹‰çš„ <code>Filter</code> æˆ‘ä»¬åªéœ€è¦ç»§æ‰¿ <code>ZuulFilter</code> ç„¶åå°†è¿™ä¸ªè¿‡æ»¤å™¨ç±»ä»¥ <code>@Component</code> æ³¨è§£åŠ å…¥ Spring å®¹å™¨ä¸­å°±è¡Œäº†ã€‚</p><p>åœ¨ç»™ä½ ä»¬çœ‹ä»£ç ä¹‹å‰æˆ‘å…ˆç»™ä½ ä»¬è§£é‡Šä¸€ä¸‹å…³äºè¿‡æ»¤å™¨çš„ä¸€äº›æ³¨æ„ç‚¹ã€‚</p><p><img src="/assets/image-20220807221523.1f89cc33.png" alt="" loading="lazy"></p><p>è¿‡æ»¤å™¨ç±»å‹ï¼š<code>Pre</code>ã€<code>Routing</code>ã€<code>Post</code>ã€‚å‰ç½®<code>Pre</code>å°±æ˜¯åœ¨è¯·æ±‚ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œ<code>Routing</code>è·¯ç”±è¿‡æ»¤å™¨å°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€è®²çš„è·¯ç”±ç­–ç•¥ï¼Œè€Œ<code>Post</code>åç½®è¿‡æ»¤å™¨å°±æ˜¯åœ¨ <code>Response</code> ä¹‹å‰è¿›è¡Œè¿‡æ»¤çš„è¿‡æ»¤å™¨ã€‚ä½ å¯ä»¥è§‚å¯Ÿä¸Šå›¾ç»“åˆç€ç†è§£ï¼Œå¹¶ä¸”ä¸‹é¢æˆ‘ä¼šç»™å‡ºç›¸åº”çš„æ³¨é‡Šã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// åŠ å…¥Springå®¹å™¨</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PreRequestFilter</span> <span class="token keyword">extends</span> <span class="token class-name">ZuulFilter</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿”å›è¿‡æ»¤å™¨ç±»å‹ è¿™é‡Œæ˜¯å‰ç½®è¿‡æ»¤å™¨</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">filterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FilterConstants</span><span class="token punctuation">.</span>PRE_TYPE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æŒ‡å®šè¿‡æ»¤é¡ºåº è¶Šå°è¶Šå…ˆæ‰§è¡Œï¼Œè¿™é‡Œç¬¬ä¸€ä¸ªæ‰§è¡Œ</span>
    <span class="token comment">// å½“ç„¶ä¸æ˜¯åªçœŸæ­£ç¬¬ä¸€ä¸ª åœ¨Zuulå†…ç½®ä¸­æœ‰å…¶ä»–è¿‡æ»¤å™¨ä¼šå…ˆæ‰§è¡Œ</span>
    <span class="token comment">// é‚£æ˜¯å†™æ­»çš„ æ¯”å¦‚ SERVLET_DETECTION_FILTER_ORDER = -3</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">filterOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ä»€ä¹ˆæ—¶å€™è¯¥è¿›è¡Œè¿‡æ»¤</span>
    <span class="token comment">// è¿™é‡Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›åˆ¤æ–­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿‡æ»¤æ‰ä¸€äº›ä¸ç¬¦åˆè§„å®šçš„è¯·æ±‚ç­‰ç­‰</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å¦‚æœè¿‡æ»¤å™¨å…è®¸é€šè¿‡åˆ™æ€ä¹ˆè¿›è¡Œå¤„ç†</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ZuulException</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿™é‡Œæˆ‘è®¾ç½®äº†å…¨å±€çš„RequestContextå¹¶è®°å½•äº†è¯·æ±‚å¼€å§‹æ—¶é—´</span>
        <span class="token class-name">RequestContext</span> ctx <span class="token operator">=</span> <span class="token class-name">RequestContext</span><span class="token punctuation">.</span><span class="token function">getCurrentContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;startTime&quot;</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// lombokçš„æ—¥å¿—</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token comment">// åŠ å…¥ Spring å®¹å™¨</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccessLogFilter</span> <span class="token keyword">extends</span> <span class="token class-name">ZuulFilter</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŒ‡å®šè¯¥è¿‡æ»¤å™¨çš„è¿‡æ»¤ç±»å‹</span>
    <span class="token comment">// æ­¤æ—¶æ˜¯åç½®è¿‡æ»¤å™¨</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">filterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FilterConstants</span><span class="token punctuation">.</span>POST_TYPE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// SEND_RESPONSE_FILTER_ORDER æ˜¯æœ€åä¸€ä¸ªè¿‡æ»¤å™¨</span>
    <span class="token comment">// æˆ‘ä»¬æ­¤è¿‡æ»¤å™¨åœ¨å®ƒä¹‹å‰æ‰§è¡Œ</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">filterOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FilterConstants</span><span class="token punctuation">.</span>SEND_RESPONSE_FILTER_ORDER <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è¿‡æ»¤æ—¶æ‰§è¡Œçš„ç­–ç•¥</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ZuulException</span> <span class="token punctuation">{</span>
        <span class="token class-name">RequestContext</span> context <span class="token operator">=</span> <span class="token class-name">RequestContext</span><span class="token punctuation">.</span><span class="token function">getCurrentContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä»RequestContextè·å–åŸå…ˆçš„å¼€å§‹æ—¶é—´ å¹¶é€šè¿‡å®ƒè®¡ç®—æ•´ä¸ªæ—¶é—´é—´éš”</span>
        <span class="token class-name">Long</span> startTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;startTime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¿™é‡Œæˆ‘å¯ä»¥è·å–HttpServletRequestæ¥è·å–URIå¹¶ä¸”æ‰“å°å‡ºæ¥</span>
        <span class="token class-name">String</span> uri <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> duration <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;uri: &quot;</span> <span class="token operator">+</span> uri <span class="token operator">+</span> <span class="token string">&quot;, duration: &quot;</span> <span class="token operator">+</span> duration <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢å°±ç®€å•å®ç°äº†è¯·æ±‚æ—¶é—´æ—¥å¿—æ‰“å°åŠŸèƒ½ï¼Œä½ æœ‰æ²¡æœ‰æ„Ÿå—åˆ° <code>Zuul</code> è¿‡æ»¤åŠŸèƒ½çš„å¼ºå¤§äº†å‘¢ï¼Ÿ</p><p>æ²¡æœ‰ï¼Ÿå¥½çš„ã€é‚£æˆ‘ä»¬å†æ¥ã€‚</p><h4 id="ä»¤ç‰Œæ¡¶é™æµ" tabindex="-1"><a class="header-anchor" href="#ä»¤ç‰Œæ¡¶é™æµ" aria-hidden="true">#</a> ä»¤ç‰Œæ¡¶é™æµ</h4><p>å½“ç„¶ä¸ä»…ä»…æ˜¯ä»¤ç‰Œæ¡¶é™æµæ–¹å¼ï¼Œ<code>Zuul</code> åªè¦æ˜¯é™æµçš„æ´»å®ƒéƒ½èƒ½å¹²ï¼Œè¿™é‡Œæˆ‘åªæ˜¯ç®€å•ä¸¾ä¸ªğŸŒ°ã€‚</p><p><img src="/assets/image-20220807221534.316ed07d.png" alt="zuui-ä»¤ç‰Œæ¡¶é™æµ" loading="lazy"></p><p>æˆ‘å…ˆæ¥è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ <strong>ä»¤ç‰Œæ¡¶é™æµ</strong> å§ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬ä¼šæœ‰ä¸ªæ¡¶ï¼Œå¦‚æœé‡Œé¢æ²¡æœ‰æ»¡é‚£ä¹ˆå°±ä¼šä»¥ä¸€å®š <strong>å›ºå®šçš„é€Ÿç‡</strong> ä¼šå¾€é‡Œé¢æ”¾ä»¤ç‰Œï¼Œä¸€ä¸ªè¯·æ±‚è¿‡æ¥é¦–å…ˆè¦ä»æ¡¶ä¸­è·å–ä»¤ç‰Œï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ°ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°±æ‹’ç»ï¼Œå¦‚æœè·å–åˆ°é‚£ä¹ˆå°±æ”¾è¡Œã€‚å¾ˆç®€å•å§ï¼Œå•Šå“ˆå“ˆã€</p><p>ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡ <code>Zuul</code> çš„å‰ç½®è¿‡æ»¤å™¨æ¥å®ç°ä¸€ä¸‹ä»¤ç‰Œæ¡¶é™æµã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lgq<span class="token punctuation">.</span>zuul<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">RateLimiter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>zuul<span class="token punctuation">.</span></span><span class="token class-name">ZuulFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>zuul<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">RequestContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>zuul<span class="token punctuation">.</span>exception<span class="token punctuation">.</span></span><span class="token class-name">ZuulException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>zuul<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">FilterConstants</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RouteFilter</span> <span class="token keyword">extends</span> <span class="token class-name">ZuulFilter</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®šä¹‰ä¸€ä¸ªä»¤ç‰Œæ¡¶ï¼Œæ¯ç§’äº§ç”Ÿ2ä¸ªä»¤ç‰Œï¼Œå³æ¯ç§’æœ€å¤šå¤„ç†2ä¸ªè¯·æ±‚</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">RateLimiter</span> RATE_LIMITER <span class="token operator">=</span> <span class="token class-name">RateLimiter</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">filterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FilterConstants</span><span class="token punctuation">.</span>PRE_TYPE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">filterOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ZuulException</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ”¾è¡Œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RequestContext</span> context <span class="token operator">=</span> <span class="token class-name">RequestContext</span><span class="token punctuation">.</span><span class="token function">getCurrentContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>RATE_LIMITER<span class="token punctuation">.</span><span class="token function">tryAcquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;è®¿é—®é‡è¶…è½½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æŒ‡å®šå½“å‰è¯·æ±‚æœªé€šè¿‡è¿‡æ»¤</span>
            context<span class="token punctuation">.</span><span class="token function">setSendZuulResponse</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å‘å®¢æˆ·ç«¯è¿”å›å“åº”ç 429ï¼Œè¯·æ±‚æ•°é‡è¿‡å¤š</span>
            context<span class="token punctuation">.</span><span class="token function">setResponseStatusCode</span><span class="token punctuation">(</span><span class="token number">429</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·æˆ‘ä»¬å°±èƒ½å°†è¯·æ±‚æ•°é‡æ§åˆ¶åœ¨ä¸€ç§’ä¸¤ä¸ªï¼Œæœ‰æ²¡æœ‰è§‰å¾—å¾ˆé…·ï¼Ÿ</p><h3 id="å…³äº-zuul-çš„å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#å…³äº-zuul-çš„å…¶ä»–" aria-hidden="true">#</a> å…³äº Zuul çš„å…¶ä»–</h3><p><code>Zuul</code> çš„è¿‡æ»¤å™¨çš„åŠŸèƒ½è‚¯å®šä¸æ­¢ä¸Šé¢æˆ‘æ‰€å®ç°çš„ä¸¤ç§ï¼Œå®ƒè¿˜å¯ä»¥å®ç° <strong>æƒé™æ ¡éªŒ</strong>ï¼ŒåŒ…æ‹¬æˆ‘ä¸Šé¢æåˆ°çš„ <strong>ç°åº¦å‘å¸ƒ</strong> ç­‰ç­‰ã€‚</p><p>å½“ç„¶ï¼Œ<code>Zuul</code> ä½œä¸ºç½‘å…³è‚¯å®šä¹Ÿå­˜åœ¨ <strong>å•ç‚¹é—®é¢˜</strong> ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿è¯ <code>Zuul</code> çš„é«˜å¯ç”¨ï¼Œæˆ‘ä»¬å°±éœ€è¦è¿›è¡Œ <code>Zuul</code> çš„é›†ç¾¤é…ç½®ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å€ŸåŠ©é¢å¤–çš„ä¸€äº›è´Ÿè½½å‡è¡¡å™¨æ¯”å¦‚ <code>Nginx</code> ã€‚</p><h2 id="spring-cloud-é…ç½®ç®¡ç†â€”â€”config" tabindex="-1"><a class="header-anchor" href="#spring-cloud-é…ç½®ç®¡ç†â€”â€”config" aria-hidden="true">#</a> Spring Cloud é…ç½®ç®¡ç†â€”â€”Config</h2><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†ï¼Ÿ</h3><p>å½“æˆ‘ä»¬çš„å¾®æœåŠ¡ç³»ç»Ÿå¼€å§‹æ…¢æ…¢åœ°åºå¤§èµ·æ¥ï¼Œé‚£ä¹ˆå¤š <code>Consumer</code> ã€<code>Provider</code> ã€<code>Eureka Server</code> ã€<code>Zuul</code> ç³»ç»Ÿéƒ½ä¼šæŒæœ‰è‡ªå·±çš„é…ç½®ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åœ¨é¡¹ç›®è¿è¡Œçš„æ—¶å€™å¯èƒ½éœ€è¦æ›´æ”¹æŸäº›åº”ç”¨çš„é…ç½®ï¼Œå¦‚æœæˆ‘ä»¬ä¸è¿›è¡Œé…ç½®çš„ç»Ÿä¸€ç®¡ç†ï¼Œæˆ‘ä»¬åªèƒ½<strong>å»æ¯ä¸ªåº”ç”¨ä¸‹ä¸€ä¸ªä¸€ä¸ªå¯»æ‰¾é…ç½®æ–‡ä»¶ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶å†é‡å¯åº”ç”¨</strong>ã€‚</p><p>é¦–å…ˆå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿè€Œè¨€æˆ‘ä»¬å°±ä¸åº”è¯¥å»æ¯ä¸ªåº”ç”¨ä¸‹å»åˆ†åˆ«ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå†è€…å¯¹äºé‡å¯åº”ç”¨æ¥è¯´ï¼ŒæœåŠ¡æ— æ³•è®¿é—®æ‰€ä»¥ç›´æ¥æŠ›å¼ƒäº†å¯ç”¨æ€§ï¼Œè¿™æ˜¯æˆ‘ä»¬æ›´ä¸æ„¿è§åˆ°çš„ã€‚</p><p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•<strong>æ—¢èƒ½å¯¹é…ç½®æ–‡ä»¶ç»Ÿä¸€åœ°è¿›è¡Œç®¡ç†ï¼Œåˆèƒ½åœ¨é¡¹ç›®è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹é…ç½®æ–‡ä»¶å‘¢ï¼Ÿ</strong></p><p>é‚£å°±æ˜¯æˆ‘ä»Šå¤©æ‰€è¦ä»‹ç»çš„ <code>Spring Cloud Config</code> ã€‚</p><blockquote><p>èƒ½è¿›è¡Œé…ç½®ç®¡ç†çš„æ¡†æ¶ä¸æ­¢ <code>Spring Cloud Config</code> ä¸€ç§ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªå·±é€‰æ‹©ï¼ˆ<code>disconf</code>ï¼Œé˜¿æ³¢ç½—ç­‰ç­‰ï¼‰ã€‚è€Œä¸”å¯¹äº <code>Config</code> æ¥è¯´æœ‰äº›åœ°æ–¹å®ç°çš„ä¸æ˜¯é‚£ä¹ˆå°½äººæ„ã€‚</p></blockquote><h3 id="config-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#config-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> Config æ˜¯ä»€ä¹ˆ</h3><blockquote><p><code>Spring Cloud Config</code> ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®æä¾›æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ”¯æŒã€‚ä½¿ç”¨ <code>Config</code> æœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨ä¸­å¿ƒä½ç½®ç®¡ç†æ‰€æœ‰ç¯å¢ƒä¸­åº”ç”¨ç¨‹åºçš„å¤–éƒ¨å±æ€§ã€‚</p></blockquote><p>ç®€å•æ¥è¯´ï¼Œ<code>Spring Cloud Config</code> å°±æ˜¯èƒ½å°†å„ä¸ª åº”ç”¨/ç³»ç»Ÿ/æ¨¡å— çš„é…ç½®æ–‡ä»¶å­˜æ”¾åˆ° <strong>ç»Ÿä¸€çš„åœ°æ–¹ç„¶åè¿›è¡Œç®¡ç†</strong>(Git æˆ–è€… SVN)ã€‚</p><p>ä½ æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸æ˜¯åªæœ‰å¯åŠ¨çš„æ—¶å€™æ‰ä¼šè¿›è¡Œé…ç½®æ–‡ä»¶çš„åŠ è½½ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ <code>Spring Cloud Config</code> å°±æš´éœ²å‡ºä¸€ä¸ªæ¥å£ç»™å¯åŠ¨åº”ç”¨æ¥è·å–å®ƒæ‰€æƒ³è¦çš„é…ç½®æ–‡ä»¶ï¼Œåº”ç”¨è·å–åˆ°é…ç½®æ–‡ä»¶ç„¶åå†è¿›è¡Œå®ƒçš„åˆå§‹åŒ–å·¥ä½œã€‚å°±å¦‚ä¸‹å›¾ã€‚</p><p><img src="/assets/image-20220807221548.c86ecece.png" alt="" loading="lazy"></p><p>å½“ç„¶è¿™é‡Œä½ è‚¯å®šè¿˜ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¦‚æœæˆ‘åœ¨åº”ç”¨è¿è¡Œæ—¶å»æ›´æ”¹è¿œç¨‹é…ç½®ä»“åº“(Git)ä¸­çš„å¯¹åº”é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆä¾èµ–äºè¿™ä¸ªé…ç½®æ–‡ä»¶çš„å·²å¯åŠ¨çš„åº”ç”¨ä¼šä¸ä¼šè¿›è¡Œå…¶ç›¸åº”é…ç½®çš„æ›´æ”¹å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ä¸ä¼šçš„ã€‚</p><p>ä»€ä¹ˆï¼Ÿé‚£æ€ä¹ˆè¿›è¡ŒåŠ¨æ€ä¿®æ”¹é…ç½®æ–‡ä»¶å‘¢ï¼Ÿè¿™ä¸æ˜¯å‡ºç°äº† <strong>é…ç½®æ¼‚ç§»</strong> å—ï¼Ÿä½ ä¸ªæ¸£ç”·ğŸ˜¡ï¼Œä½ åˆéª—æˆ‘ï¼</p><p>åˆ«æ€¥å˜›ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>Webhooks</code> ï¼Œè¿™æ˜¯ <code>github</code> æä¾›çš„åŠŸèƒ½ï¼Œå®ƒèƒ½ç¡®ä¿è¿œç¨‹åº“çš„é…ç½®æ–‡ä»¶æ›´æ–°åå®¢æˆ·ç«¯ä¸­çš„é…ç½®ä¿¡æ¯ä¹Ÿå¾—åˆ°æ›´æ–°ã€‚</p><p>å™¢å™¢ï¼Œè¿™è¿˜å·®ä¸å¤šã€‚æˆ‘å»æŸ¥æŸ¥æ€ä¹ˆç”¨ã€‚</p><p>æ…¢ç€ï¼Œå¬æˆ‘è¯´å®Œï¼Œ<code>Webhooks</code> è™½ç„¶èƒ½è§£å†³ï¼Œä½†æ˜¯ä½ äº†è§£ä¸€ä¸‹ä¼šå‘ç°å®ƒæ ¹æœ¬ä¸é€‚åˆç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæ‰€ä»¥åŸºæœ¬ä¸ä¼šä½¿ç”¨å®ƒçš„ã€‚</p><p>è€Œä¸€èˆ¬æˆ‘ä»¬ä¼šä½¿ç”¨ <code>Bus</code> æ¶ˆæ¯æ€»çº¿ + <code>Spring Cloud Config</code> è¿›è¡Œé…ç½®çš„åŠ¨æ€åˆ·æ–°ã€‚</p><h2 id="å¼•å‡º-spring-cloud-bus" tabindex="-1"><a class="header-anchor" href="#å¼•å‡º-spring-cloud-bus" aria-hidden="true">#</a> å¼•å‡º Spring Cloud Bus</h2><blockquote><p>ç”¨äºå°†æœåŠ¡å’ŒæœåŠ¡å®ä¾‹ä¸åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿé“¾æ¥åœ¨ä¸€èµ·çš„äº‹ä»¶æ€»çº¿ã€‚åœ¨é›†ç¾¤ä¸­ä¼ æ’­çŠ¶æ€æ›´æ”¹å¾ˆæœ‰ç”¨ï¼ˆä¾‹å¦‚é…ç½®æ›´æ”¹äº‹ä»¶ï¼‰ã€‚</p></blockquote><p>ä½ å¯ä»¥ç®€å•ç†è§£ä¸º <code>Spring Cloud Bus</code> çš„ä½œç”¨å°±æ˜¯<strong>ç®¡ç†å’Œå¹¿æ’­åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ¶ˆæ¯</strong>ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯å¼•æ“ç³»ç»Ÿä¸­çš„å¹¿æ’­æ¨¡å¼ã€‚å½“ç„¶ä½œä¸º <strong>æ¶ˆæ¯æ€»çº¿</strong> çš„ <code>Spring Cloud Bus</code> å¯ä»¥åšå¾ˆå¤šäº‹è€Œä¸ä»…ä»…æ˜¯å®¢æˆ·ç«¯çš„é…ç½®åˆ·æ–°åŠŸèƒ½ã€‚</p><p>è€Œæ‹¥æœ‰äº† <code>Spring Cloud Bus</code> ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªç®€å•çš„è¯·æ±‚ï¼Œå¹¶ä¸”åŠ ä¸Š <code>@ResfreshScope</code> æ³¨è§£å°±èƒ½è¿›è¡Œé…ç½®çš„åŠ¨æ€ä¿®æ”¹äº†ï¼Œä¸‹é¢æˆ‘ç”»äº†å¼ å›¾ä¾›ä½ ç†è§£ã€‚</p><p><img src="/assets/image-20220807221600.e7544a52.png" alt="" loading="lazy"></p><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>è¿™ç¯‡æ–‡ç« ä¸­æˆ‘å¸¦å¤§å®¶åˆæ­¥äº†è§£äº† <code>Spring Cloud</code> çš„å„ä¸ªç»„ä»¶ï¼Œä»–ä»¬æœ‰</p><ul><li><code>Eureka</code> æœåŠ¡å‘ç°æ¡†æ¶</li><li><code>Ribbon</code> è¿›ç¨‹å†…è´Ÿè½½å‡è¡¡å™¨</li><li><code>Open Feign</code> æœåŠ¡è°ƒç”¨æ˜ å°„</li><li><code>Hystrix</code> æœåŠ¡é™çº§ç†”æ–­å™¨</li><li><code>Zuul</code> å¾®æœåŠ¡ç½‘å…³</li><li><code>Config</code> å¾®æœåŠ¡ç»Ÿä¸€é…ç½®ä¸­å¿ƒ</li><li><code>Bus</code> æ¶ˆæ¯æ€»çº¿</li></ul><p>å¦‚æœä½ èƒ½è¿™ä¸ªæ—¶å€™èƒ½çœ‹æ‡‚æ–‡é¦–é‚£å¼ å›¾ï¼Œä¹Ÿå°±è¯´æ˜äº†ä½ å·²ç»å¯¹ <code>Spring Cloud</code> å¾®æœåŠ¡æœ‰äº†ä¸€å®šçš„æ¶æ„è®¤è¯†ã€‚</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/heplex/EzfriDocs/edit/main/docs/RD/system-design/framework/springcloud/springcloud-intro.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/12/2 21:59:58</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: zcilive@gmail.com">chun.zheng</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/RD/system-design/framework/netty.html" class="nav-link prev" aria-label="Netty çŸ¥è¯†ç‚¹&amp;é¢è¯•é¢˜æ€»ç»“"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Netty çŸ¥è¯†ç‚¹&amp;é¢è¯•é¢˜æ€»ç»“</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">æµ™ICPå¤‡2021004971å·-2</a></div><div class="copyright">Copyright Â© 2022 EzFri</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.65bdb7b8.js" defer></script>
  </body>
</html>
