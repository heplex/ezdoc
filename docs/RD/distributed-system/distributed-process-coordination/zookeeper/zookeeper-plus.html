<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.ezfri.com/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html"><meta property="og:site_name" content="EzFri"><meta property="og:title" content="ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(è¿›é˜¶)"><meta property="og:type" content="article"><meta property="og:image" content="https://www.ezfri.com/"><meta property="og:updated_time" content="2022-12-02T13:59:58.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(è¿›é˜¶)"><meta property="article:modified_time" content="2022-12-02T13:59:58.000Z"><meta name="robots" content="all"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="JavaåŸºç¡€, å¤šçº¿ç¨‹, JVM, è™šæ‹Ÿæœº, æ•°æ®åº“, MySQL, Spring, Redis, MyBatis, ç³»ç»Ÿè®¾è®¡, åˆ†å¸ƒå¼, RPC, é«˜å¯ç”¨, é«˜å¹¶å‘"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="stylesheet" href="/iconfont/iconfont.css"><title>ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(è¿›é˜¶) | EzFri</title><meta name="description" content="EzFriçŸ¥è¯†åº“">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.eed630e3.css">
    <link rel="modulepreload" href="/assets/app.65bdb7b8.js"><link rel="modulepreload" href="/assets/zookeeper-plus.html.a79742c7.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/zookeeper-plus.html.a94c7f9f.js"><link rel="prefetch" href="/assets/home.html.cf680523.js"><link rel="prefetch" href="/assets/index.html.e304fcf7.js"><link rel="prefetch" href="/assets/slide.html.194facad.js"><link rel="prefetch" href="/assets/home.html.69b5a2a3.js"><link rel="prefetch" href="/assets/home.html.af75b058.js"><link rel="prefetch" href="/assets/home.html.71b1ca4f.js"><link rel="prefetch" href="/assets/home.html.ce1a6133.js"><link rel="prefetch" href="/assets/interview-ready.html.2e762f9b.js"><link rel="prefetch" href="/assets/interview-recards.html.20f21e29.js"><link rel="prefetch" href="/assets/devops.html.b1575585.js"><link rel="prefetch" href="/assets/basis.html.abfab2cc.js"><link rel="prefetch" href="/assets/character-set.html.41d6485e.js"><link rel="prefetch" href="/assets/cluster.html.3a4cd408.js"><link rel="prefetch" href="/assets/disaster-recovery_remote-live.html.cf88d69f.js"><link rel="prefetch" href="/assets/fallback_circuit-breaker.html.2d06c9e3.js"><link rel="prefetch" href="/assets/high-availability-system-design.html.549a70cf.js"><link rel="prefetch" href="/assets/limit-request.html.df37cefa.js"><link rel="prefetch" href="/assets/performance-test.html.711a0cad.js"><link rel="prefetch" href="/assets/timeout-and-retry.html.b70dff28.js"><link rel="prefetch" href="/assets/load-balancing.html.67da77d5.js"><link rel="prefetch" href="/assets/read-and-write-separation-and-library-subtable.html.c44692c7.js"><link rel="prefetch" href="/assets/api-gateway.html.36151504.js"><link rel="prefetch" href="/assets/distributed-id.html.957080df.js"><link rel="prefetch" href="/assets/distributed-transaction.html.4d79482e.js"><link rel="prefetch" href="/assets/design-pattern.html.6f20f626.js"><link rel="prefetch" href="/assets/J2EEåŸºç¡€çŸ¥è¯†.html.9dd70d78.js"><link rel="prefetch" href="/assets/schedule-task.html.4ba2373d.js"><link rel="prefetch" href="/assets/system-design-questions.html.b73c4747.js"><link rel="prefetch" href="/assets/10-classical-sorting-algorithms.html.cc46b6e2.js"><link rel="prefetch" href="/assets/linkedlist-algorithm-problems.html.9db6a817.js"><link rel="prefetch" href="/assets/string-algorithm-problems.html.dd5b5a9d.js"><link rel="prefetch" href="/assets/the-sword-refers-to-offer.html.f3f1eb66.js"><link rel="prefetch" href="/assets/bloom-filter.html.fd377e06.js"><link rel="prefetch" href="/assets/graph.html.9eabddcc.js"><link rel="prefetch" href="/assets/heap.html.2d7a5a9b.js"><link rel="prefetch" href="/assets/linear-data-structure.html.d68252fc.js"><link rel="prefetch" href="/assets/red-black-tree.html.d375553a.js"><link rel="prefetch" href="/assets/tree.html.cf9cbaa2.js"><link rel="prefetch" href="/assets/linux-intro.html.7f29d8e5.js"><link rel="prefetch" href="/assets/operating-system-basic-questions-01.html.204f9eed.js"><link rel="prefetch" href="/assets/shell-intro.html.7099ad8b.js"><link rel="prefetch" href="/assets/http_https.html.e4c1e646.js"><link rel="prefetch" href="/assets/http1.0_http1.1.html.78f2ce86.js"><link rel="prefetch" href="/assets/osi_tcp-ip-model.html.2de7eac0.js"><link rel="prefetch" href="/assets/other-network-questions.html.474b82fd.js"><link rel="prefetch" href="/assets/è®¡ç®—æœºç½‘ç»œå†…å®¹æ€»ç»“.html.09f22934.js"><link rel="prefetch" href="/assets/a-thousand-lines-of-mysql-study-notes.html.e15999c6.js"><link rel="prefetch" href="/assets/how-sql-executed-in-mysql.html.366e4db4.js"><link rel="prefetch" href="/assets/index-invalidation-caused-by-implicit-conversion.html.0e509999.js"><link rel="prefetch" href="/assets/innodb-implementation-of-mvcc.html.2862b60c.js"><link rel="prefetch" href="/assets/mysql-high-performance-optimization-specification-recommendations.html.b2474ec2.js"><link rel="prefetch" href="/assets/mysql-index.html.b4f2b724.js"><link rel="prefetch" href="/assets/mysql-logs.html.cb4d4684.js"><link rel="prefetch" href="/assets/mysql-questions-01.html.f09dec84.js"><link rel="prefetch" href="/assets/some-thoughts-on-database-storage-time.html.517f9c8e.js"><link rel="prefetch" href="/assets/transaction-isolation-level.html.ee7b43a8.js"><link rel="prefetch" href="/assets/3-commonly-used-cache-read-and-write-strategies.html.4e61d40d.js"><link rel="prefetch" href="/assets/cache-basics.html.b7b04f9e.js"><link rel="prefetch" href="/assets/redis-cluster.html.6ea71110.js"><link rel="prefetch" href="/assets/redis-memory-fragmentation.html.7785b35c.js"><link rel="prefetch" href="/assets/redis-questions-01.html.8e6b298b.js"><link rel="prefetch" href="/assets/kafka-questions-01.html.a17bb8bc.js"><link rel="prefetch" href="/assets/message-queue.html.b5212a15.js"><link rel="prefetch" href="/assets/rabbitmq-intro.html.8b9f74eb.js"><link rel="prefetch" href="/assets/rocketmq-intro.html.6cf01955.js"><link rel="prefetch" href="/assets/rocketmq-questions.html.535053d6.js"><link rel="prefetch" href="/assets/dubbo.html.bb2aa5bb.js"><link rel="prefetch" href="/assets/why-use-rpc.html.d2085c3f.js"><link rel="prefetch" href="/assets/cap_base-theorem.html.aabff7cc.js"><link rel="prefetch" href="/assets/gossip.html.2d4e902b.js"><link rel="prefetch" href="/assets/paxos-algorithm.html.a47bf98e.js"><link rel="prefetch" href="/assets/raft-algorithm.html.14d6c544.js"><link rel="prefetch" href="/assets/bigdecimal.html.28ab69a8.js"><link rel="prefetch" href="/assets/io.html.873e8200.js"><link rel="prefetch" href="/assets/java-basic-01.html.e27ea2f8.js"><link rel="prefetch" href="/assets/java-basic-02.html.f427c901.js"><link rel="prefetch" href="/assets/java-basic-03.html.d3926693.js"><link rel="prefetch" href="/assets/proxy.html.92ab3050.js"><link rel="prefetch" href="/assets/reflection.html.16b3d66b.js"><link rel="prefetch" href="/assets/serialization.html.dbad4a3a.js"><link rel="prefetch" href="/assets/why-there-only-value-passing-in-java.html.f658b65c.js"><link rel="prefetch" href="/assets/java-collection-precautions-for-use.html.6caa4ae5.js"><link rel="prefetch" href="/assets/java-collection-questions-01.html.26a24dea.js"><link rel="prefetch" href="/assets/java-collection-questions-02.html.43867a2b.js"><link rel="prefetch" href="/assets/aqs.html.95a41fa3.js"><link rel="prefetch" href="/assets/atomic-classes.html.2f10c11f.js"><link rel="prefetch" href="/assets/completablefuture-intro.html.4c97fae1.js"><link rel="prefetch" href="/assets/java-concurrent-collections.html.585fbe4b.js"><link rel="prefetch" href="/assets/java-concurrent-questions-01.html.6210ab74.js"><link rel="prefetch" href="/assets/java-concurrent-questions-02.html.d40cbd56.js"><link rel="prefetch" href="/assets/java-thread-pool-best-practices.html.1b007a54.js"><link rel="prefetch" href="/assets/java-thread-pool-summary.html.a5326c97.js"><link rel="prefetch" href="/assets/reentrantlock.html.3b435c70.js"><link rel="prefetch" href="/assets/threadlocal.html.52df7b3b.js"><link rel="prefetch" href="/assets/classloader.html.ef5e778d.js"><link rel="prefetch" href="/assets/java-jvm-questions-01.html.e05c2a8f.js"><link rel="prefetch" href="/assets/jvm-intro.html.a74aca72.js"><link rel="prefetch" href="/assets/jvm-parameters-intro.html.69056348.js"><link rel="prefetch" href="/assets/java10.html.25b31a3d.js"><link rel="prefetch" href="/assets/java11.html.11815e16.js"><link rel="prefetch" href="/assets/java12-13.html.53e9e62e.js"><link rel="prefetch" href="/assets/java14-15.html.fbc231f4.js"><link rel="prefetch" href="/assets/java8-common-new-features.html.cb27fd26.js"><link rel="prefetch" href="/assets/java8-tutorial-translate.html.3bd56699.js"><link rel="prefetch" href="/assets/java9.html.0b5e8022.js"><link rel="prefetch" href="/assets/naming.html.5d93cd63.js"><link rel="prefetch" href="/assets/refactoring.html.9d5d9701.js"><link rel="prefetch" href="/assets/RESTfulAPI.html.47972874.js"><link rel="prefetch" href="/assets/netty.html.d07112f5.js"><link rel="prefetch" href="/assets/advantages_disadvantages-of-jwt.html.cc868daa.js"><link rel="prefetch" href="/assets/basis-of-authority-certification.html.f7a4a7ea.js"><link rel="prefetch" href="/assets/data-desensitization.html.45aebe96.js"><link rel="prefetch" href="/assets/jwt-intro.html.d1668099.js"><link rel="prefetch" href="/assets/sentive-words-filter.html.13060ac4.js"><link rel="prefetch" href="/assets/sso-intro.html.de08967b.js"><link rel="prefetch" href="/assets/md-editor.html.4ce6887e.js"><link rel="prefetch" href="/assets/plugin-tools.html.857276c6.js"><link rel="prefetch" href="/assets/zookeeper-in-action.html.1f29429b.js"><link rel="prefetch" href="/assets/zookeeper-intro.html.5d4503cf.js"><link rel="prefetch" href="/assets/arraylist-source-code.html.a234e69c.js"><link rel="prefetch" href="/assets/concurrent-hash-map-source-code.html.c8544a8e.js"><link rel="prefetch" href="/assets/hashmap-source-code.html.27eabd8d.js"><link rel="prefetch" href="/assets/page.html.5a76bdd1.js"><link rel="prefetch" href="/assets/page.html.cbabda5c.js"><link rel="prefetch" href="/assets/page.html.40626177.js"><link rel="prefetch" href="/assets/page.html.52073a4a.js"><link rel="prefetch" href="/assets/page.html.0cb78876.js"><link rel="prefetch" href="/assets/mybatis-interview.html.813d2199.js"><link rel="prefetch" href="/assets/spring-boot-auto-assembly-principles.html.eb9783e1.js"><link rel="prefetch" href="/assets/spring-common-annotations.html.a7564ecc.js"><link rel="prefetch" href="/assets/spring-design-patterns-summary.html.22c2bb09.js"><link rel="prefetch" href="/assets/spring-knowledge-and-questions-summary.html.a01d437b.js"><link rel="prefetch" href="/assets/spring-transaction.html.57c87f7b.js"><link rel="prefetch" href="/assets/springcloud-intro.html.18d06837.js"><link rel="prefetch" href="/assets/git-intro.html.9085b2a9.js"><link rel="prefetch" href="/assets/github-tips.html.38846baf.js"><link rel="prefetch" href="/assets/404.html.e0b0a01e.js"><link rel="prefetch" href="/assets/index.html.c1a77ebe.js"><link rel="prefetch" href="/assets/index.html.79779236.js"><link rel="prefetch" href="/assets/index.html.c75bd714.js"><link rel="prefetch" href="/assets/index.html.bd2e2eca.js"><link rel="prefetch" href="/assets/index.html.0500b22a.js"><link rel="prefetch" href="/assets/index.html.e5ef0c99.js"><link rel="prefetch" href="/assets/index.html.7dd53cd7.js"><link rel="prefetch" href="/assets/index.html.b3a29827.js"><link rel="prefetch" href="/assets/index.html.c3bf5ca9.js"><link rel="prefetch" href="/assets/index.html.d5d68b07.js"><link rel="prefetch" href="/assets/index.html.187c41f2.js"><link rel="prefetch" href="/assets/index.html.45316c81.js"><link rel="prefetch" href="/assets/index.html.64205451.js"><link rel="prefetch" href="/assets/index.html.b3c1f666.js"><link rel="prefetch" href="/assets/index.html.2f1e4983.js"><link rel="prefetch" href="/assets/index.html.7805f1d4.js"><link rel="prefetch" href="/assets/index.html.a465a3f6.js"><link rel="prefetch" href="/assets/index.html.629d4310.js"><link rel="prefetch" href="/assets/index.html.439c7396.js"><link rel="prefetch" href="/assets/index.html.25fb4a72.js"><link rel="prefetch" href="/assets/index.html.e8b544a7.js"><link rel="prefetch" href="/assets/index.html.a9ef7b24.js"><link rel="prefetch" href="/assets/index.html.37fc2e83.js"><link rel="prefetch" href="/assets/index.html.a1267f38.js"><link rel="prefetch" href="/assets/index.html.a57a03e9.js"><link rel="prefetch" href="/assets/index.html.de0a1f9c.js"><link rel="prefetch" href="/assets/index.html.7f377eba.js"><link rel="prefetch" href="/assets/index.html.4f49cd3b.js"><link rel="prefetch" href="/assets/index.html.2f1ed682.js"><link rel="prefetch" href="/assets/index.html.9041a696.js"><link rel="prefetch" href="/assets/index.html.0aedeb7e.js"><link rel="prefetch" href="/assets/index.html.4a12d8dc.js"><link rel="prefetch" href="/assets/index.html.0d6cd3bb.js"><link rel="prefetch" href="/assets/index.html.8f506dd4.js"><link rel="prefetch" href="/assets/index.html.412fef02.js"><link rel="prefetch" href="/assets/index.html.425e72c3.js"><link rel="prefetch" href="/assets/index.html.4a4e1b0f.js"><link rel="prefetch" href="/assets/index.html.7a0d4eca.js"><link rel="prefetch" href="/assets/index.html.fb14bb03.js"><link rel="prefetch" href="/assets/index.html.7daab107.js"><link rel="prefetch" href="/assets/home.html.7b05106f.js"><link rel="prefetch" href="/assets/index.html.68b817b0.js"><link rel="prefetch" href="/assets/slide.html.dfa9aa7d.js"><link rel="prefetch" href="/assets/home.html.8bb93b9d.js"><link rel="prefetch" href="/assets/home.html.92cba5ef.js"><link rel="prefetch" href="/assets/home.html.7bc871f1.js"><link rel="prefetch" href="/assets/home.html.5e24954b.js"><link rel="prefetch" href="/assets/interview-ready.html.40674e08.js"><link rel="prefetch" href="/assets/interview-recards.html.5edd740e.js"><link rel="prefetch" href="/assets/devops.html.5c325fb1.js"><link rel="prefetch" href="/assets/basis.html.47eab738.js"><link rel="prefetch" href="/assets/character-set.html.202cf36c.js"><link rel="prefetch" href="/assets/cluster.html.ade426ec.js"><link rel="prefetch" href="/assets/disaster-recovery_remote-live.html.884a1bb9.js"><link rel="prefetch" href="/assets/fallback_circuit-breaker.html.fb829c7b.js"><link rel="prefetch" href="/assets/high-availability-system-design.html.b4792ee7.js"><link rel="prefetch" href="/assets/limit-request.html.f9d2dda4.js"><link rel="prefetch" href="/assets/performance-test.html.bde7afa4.js"><link rel="prefetch" href="/assets/timeout-and-retry.html.9c70b031.js"><link rel="prefetch" href="/assets/load-balancing.html.977aea91.js"><link rel="prefetch" href="/assets/read-and-write-separation-and-library-subtable.html.c4b2517c.js"><link rel="prefetch" href="/assets/api-gateway.html.0c9d7e7d.js"><link rel="prefetch" href="/assets/distributed-id.html.412c9215.js"><link rel="prefetch" href="/assets/distributed-transaction.html.556f9104.js"><link rel="prefetch" href="/assets/design-pattern.html.0e3ea800.js"><link rel="prefetch" href="/assets/J2EEåŸºç¡€çŸ¥è¯†.html.edb04315.js"><link rel="prefetch" href="/assets/schedule-task.html.44195533.js"><link rel="prefetch" href="/assets/system-design-questions.html.df327fca.js"><link rel="prefetch" href="/assets/10-classical-sorting-algorithms.html.924e8195.js"><link rel="prefetch" href="/assets/linkedlist-algorithm-problems.html.0c8c1672.js"><link rel="prefetch" href="/assets/string-algorithm-problems.html.3dbea779.js"><link rel="prefetch" href="/assets/the-sword-refers-to-offer.html.6402a519.js"><link rel="prefetch" href="/assets/bloom-filter.html.941d06c6.js"><link rel="prefetch" href="/assets/graph.html.23a31a24.js"><link rel="prefetch" href="/assets/heap.html.886bdc3c.js"><link rel="prefetch" href="/assets/linear-data-structure.html.b1d0c86f.js"><link rel="prefetch" href="/assets/red-black-tree.html.af1cc9bb.js"><link rel="prefetch" href="/assets/tree.html.dc3f28d4.js"><link rel="prefetch" href="/assets/linux-intro.html.19e80646.js"><link rel="prefetch" href="/assets/operating-system-basic-questions-01.html.433ce476.js"><link rel="prefetch" href="/assets/shell-intro.html.945a2d3e.js"><link rel="prefetch" href="/assets/http_https.html.60a7f2e6.js"><link rel="prefetch" href="/assets/http1.0_http1.1.html.608e8547.js"><link rel="prefetch" href="/assets/osi_tcp-ip-model.html.ec78db5d.js"><link rel="prefetch" href="/assets/other-network-questions.html.2f7c5553.js"><link rel="prefetch" href="/assets/è®¡ç®—æœºç½‘ç»œå†…å®¹æ€»ç»“.html.3cdfdb6b.js"><link rel="prefetch" href="/assets/a-thousand-lines-of-mysql-study-notes.html.45aa0e86.js"><link rel="prefetch" href="/assets/how-sql-executed-in-mysql.html.b35bed2f.js"><link rel="prefetch" href="/assets/index-invalidation-caused-by-implicit-conversion.html.af985417.js"><link rel="prefetch" href="/assets/innodb-implementation-of-mvcc.html.d6fca0bf.js"><link rel="prefetch" href="/assets/mysql-high-performance-optimization-specification-recommendations.html.35191f00.js"><link rel="prefetch" href="/assets/mysql-index.html.a8570099.js"><link rel="prefetch" href="/assets/mysql-logs.html.92bc6b18.js"><link rel="prefetch" href="/assets/mysql-questions-01.html.c312b5d5.js"><link rel="prefetch" href="/assets/some-thoughts-on-database-storage-time.html.3cabd558.js"><link rel="prefetch" href="/assets/transaction-isolation-level.html.4e659fae.js"><link rel="prefetch" href="/assets/3-commonly-used-cache-read-and-write-strategies.html.b523e067.js"><link rel="prefetch" href="/assets/cache-basics.html.00fa8b54.js"><link rel="prefetch" href="/assets/redis-cluster.html.fe0a613b.js"><link rel="prefetch" href="/assets/redis-memory-fragmentation.html.dcd6ff59.js"><link rel="prefetch" href="/assets/redis-questions-01.html.fe4212b5.js"><link rel="prefetch" href="/assets/kafka-questions-01.html.a6b34043.js"><link rel="prefetch" href="/assets/message-queue.html.cd4cf406.js"><link rel="prefetch" href="/assets/rabbitmq-intro.html.a6687714.js"><link rel="prefetch" href="/assets/rocketmq-intro.html.409d2bad.js"><link rel="prefetch" href="/assets/rocketmq-questions.html.6a094b03.js"><link rel="prefetch" href="/assets/dubbo.html.134566ab.js"><link rel="prefetch" href="/assets/why-use-rpc.html.8c14d4da.js"><link rel="prefetch" href="/assets/cap_base-theorem.html.8144ce61.js"><link rel="prefetch" href="/assets/gossip.html.bcaf4ca7.js"><link rel="prefetch" href="/assets/paxos-algorithm.html.dc01536c.js"><link rel="prefetch" href="/assets/raft-algorithm.html.18cae65e.js"><link rel="prefetch" href="/assets/bigdecimal.html.14cef66c.js"><link rel="prefetch" href="/assets/io.html.1f23a33c.js"><link rel="prefetch" href="/assets/java-basic-01.html.27ffce33.js"><link rel="prefetch" href="/assets/java-basic-02.html.e46896a9.js"><link rel="prefetch" href="/assets/java-basic-03.html.66dad484.js"><link rel="prefetch" href="/assets/proxy.html.b8d6a973.js"><link rel="prefetch" href="/assets/reflection.html.5cfeb738.js"><link rel="prefetch" href="/assets/serialization.html.1a2a5728.js"><link rel="prefetch" href="/assets/why-there-only-value-passing-in-java.html.96beae4d.js"><link rel="prefetch" href="/assets/java-collection-precautions-for-use.html.743b3e58.js"><link rel="prefetch" href="/assets/java-collection-questions-01.html.7516c047.js"><link rel="prefetch" href="/assets/java-collection-questions-02.html.d1cd1615.js"><link rel="prefetch" href="/assets/aqs.html.cb151361.js"><link rel="prefetch" href="/assets/atomic-classes.html.d82b2fba.js"><link rel="prefetch" href="/assets/completablefuture-intro.html.d08b5016.js"><link rel="prefetch" href="/assets/java-concurrent-collections.html.ab89b367.js"><link rel="prefetch" href="/assets/java-concurrent-questions-01.html.e3293cbb.js"><link rel="prefetch" href="/assets/java-concurrent-questions-02.html.b93966dc.js"><link rel="prefetch" href="/assets/java-thread-pool-best-practices.html.31609446.js"><link rel="prefetch" href="/assets/java-thread-pool-summary.html.a3a73a0b.js"><link rel="prefetch" href="/assets/reentrantlock.html.58c60540.js"><link rel="prefetch" href="/assets/threadlocal.html.2d087e98.js"><link rel="prefetch" href="/assets/classloader.html.33d18b6e.js"><link rel="prefetch" href="/assets/java-jvm-questions-01.html.f87832f5.js"><link rel="prefetch" href="/assets/jvm-intro.html.5601f004.js"><link rel="prefetch" href="/assets/jvm-parameters-intro.html.55456736.js"><link rel="prefetch" href="/assets/java10.html.f44c9b45.js"><link rel="prefetch" href="/assets/java11.html.e6af7b25.js"><link rel="prefetch" href="/assets/java12-13.html.d1cea51d.js"><link rel="prefetch" href="/assets/java14-15.html.67bcf1aa.js"><link rel="prefetch" href="/assets/java8-common-new-features.html.e987bc8f.js"><link rel="prefetch" href="/assets/java8-tutorial-translate.html.dea30ffc.js"><link rel="prefetch" href="/assets/java9.html.2c83beaf.js"><link rel="prefetch" href="/assets/naming.html.844446ad.js"><link rel="prefetch" href="/assets/refactoring.html.767eba96.js"><link rel="prefetch" href="/assets/RESTfulAPI.html.2db42498.js"><link rel="prefetch" href="/assets/netty.html.01ad275b.js"><link rel="prefetch" href="/assets/advantages_disadvantages-of-jwt.html.8bbcebd8.js"><link rel="prefetch" href="/assets/basis-of-authority-certification.html.5f664db3.js"><link rel="prefetch" href="/assets/data-desensitization.html.a83c5a01.js"><link rel="prefetch" href="/assets/jwt-intro.html.f9cb367d.js"><link rel="prefetch" href="/assets/sentive-words-filter.html.e0a34626.js"><link rel="prefetch" href="/assets/sso-intro.html.db6df719.js"><link rel="prefetch" href="/assets/md-editor.html.d033ffc8.js"><link rel="prefetch" href="/assets/plugin-tools.html.ea6c7d4b.js"><link rel="prefetch" href="/assets/zookeeper-in-action.html.85210906.js"><link rel="prefetch" href="/assets/zookeeper-intro.html.16f31537.js"><link rel="prefetch" href="/assets/arraylist-source-code.html.948bd7b1.js"><link rel="prefetch" href="/assets/concurrent-hash-map-source-code.html.9d8e7186.js"><link rel="prefetch" href="/assets/hashmap-source-code.html.e28f4dff.js"><link rel="prefetch" href="/assets/page.html.4b3c1085.js"><link rel="prefetch" href="/assets/page.html.ff78d264.js"><link rel="prefetch" href="/assets/page.html.143ddeea.js"><link rel="prefetch" href="/assets/page.html.637b1d8a.js"><link rel="prefetch" href="/assets/page.html.156699c7.js"><link rel="prefetch" href="/assets/mybatis-interview.html.11a52e8f.js"><link rel="prefetch" href="/assets/spring-boot-auto-assembly-principles.html.55f0479e.js"><link rel="prefetch" href="/assets/spring-common-annotations.html.7097f46c.js"><link rel="prefetch" href="/assets/spring-design-patterns-summary.html.76c77e54.js"><link rel="prefetch" href="/assets/spring-knowledge-and-questions-summary.html.763dee3b.js"><link rel="prefetch" href="/assets/spring-transaction.html.70f406bc.js"><link rel="prefetch" href="/assets/springcloud-intro.html.c706b436.js"><link rel="prefetch" href="/assets/git-intro.html.ed0b915a.js"><link rel="prefetch" href="/assets/github-tips.html.26905af6.js"><link rel="prefetch" href="/assets/404.html.c1604ac8.js"><link rel="prefetch" href="/assets/index.html.8f57c1ed.js"><link rel="prefetch" href="/assets/index.html.dadb1ded.js"><link rel="prefetch" href="/assets/index.html.6d2662c2.js"><link rel="prefetch" href="/assets/index.html.c8d81d05.js"><link rel="prefetch" href="/assets/index.html.1bacc233.js"><link rel="prefetch" href="/assets/index.html.1f5da5de.js"><link rel="prefetch" href="/assets/index.html.d4620cd9.js"><link rel="prefetch" href="/assets/index.html.5f857ba8.js"><link rel="prefetch" href="/assets/index.html.107fcdd3.js"><link rel="prefetch" href="/assets/index.html.3b6e8a0d.js"><link rel="prefetch" href="/assets/index.html.3c193590.js"><link rel="prefetch" href="/assets/index.html.171c5fc6.js"><link rel="prefetch" href="/assets/index.html.ece507ab.js"><link rel="prefetch" href="/assets/index.html.53e29f60.js"><link rel="prefetch" href="/assets/index.html.65bd8ec7.js"><link rel="prefetch" href="/assets/index.html.670542d7.js"><link rel="prefetch" href="/assets/index.html.cf534cdc.js"><link rel="prefetch" href="/assets/index.html.fa7756e8.js"><link rel="prefetch" href="/assets/index.html.231c05ae.js"><link rel="prefetch" href="/assets/index.html.88affc4d.js"><link rel="prefetch" href="/assets/index.html.ade912d4.js"><link rel="prefetch" href="/assets/index.html.864117f7.js"><link rel="prefetch" href="/assets/index.html.f36fb649.js"><link rel="prefetch" href="/assets/index.html.c9c517f6.js"><link rel="prefetch" href="/assets/index.html.a288ec80.js"><link rel="prefetch" href="/assets/index.html.d03b3f1c.js"><link rel="prefetch" href="/assets/index.html.81555e72.js"><link rel="prefetch" href="/assets/index.html.b023a612.js"><link rel="prefetch" href="/assets/index.html.232272ba.js"><link rel="prefetch" href="/assets/index.html.40e1f5c5.js"><link rel="prefetch" href="/assets/index.html.57f27470.js"><link rel="prefetch" href="/assets/index.html.ada5b0f0.js"><link rel="prefetch" href="/assets/index.html.d8e3e45b.js"><link rel="prefetch" href="/assets/index.html.2d9f93f1.js"><link rel="prefetch" href="/assets/index.html.b72e4972.js"><link rel="prefetch" href="/assets/index.html.3f95ebad.js"><link rel="prefetch" href="/assets/index.html.5f9eb2b7.js"><link rel="prefetch" href="/assets/index.html.224f9255.js"><link rel="prefetch" href="/assets/index.html.af4255c3.js"><link rel="prefetch" href="/assets/index.html.34c3015b.js"><link rel="prefetch" href="/assets/404.e6b4a04f.js"><link rel="prefetch" href="/assets/Layout.d0ad6130.js"><link rel="prefetch" href="/assets/Slide.e00ebc64.js"><link rel="prefetch" href="/assets/Blog.677db895.js"><link rel="prefetch" href="/assets/auto.esm.36809f22.js"><link rel="prefetch" href="/assets/index.daae04bf.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.d8b76e20.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.92018b73.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.png" alt="EzFri"><!----><span class="site-name hide-in-pad">EzFri</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="çŸ¥è¯†åº“"><span class="title"><span class="icon iconfont icon-knowledge" style=""></span>çŸ¥è¯†åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/RD/home.html" class="nav-link" aria-label="åç«¯"><span class="icon iconfont icon-houduankaifa" style=""></span>åç«¯<!----></a></li><li class="dropdown-item"><a href="/FE/home.html" class="nav-link" aria-label="å‰ç«¯"><span class="icon iconfont icon-qianduankaifa" style=""></span>å‰ç«¯<!----></a></li><li class="dropdown-item"><a href="/OP/home.html" class="nav-link" aria-label="è¿ç»´"><span class="icon iconfont icon-yunwei" style=""></span>è¿ç»´<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/extend/home/" class="nav-link" aria-label="äººç”Ÿå¦‚é…’"><span class="icon iconfont icon-jiushuihongjiuhongjiubei" style=""></span>äººç”Ÿå¦‚é…’<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/heplex/EzfriDocs" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-java" style=""></span><span class="title">Java</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-computer" style=""></span><span class="title">è®¡ç®—æœºåŸºç¡€</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-database" style=""></span><span class="title">æ•°æ®åº“</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-framework" style=""></span><span class="title">å¸¸ç”¨æ¡†æ¶</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-xitongsheji" style=""></span><span class="title">ç³»ç»Ÿè®¾è®¡</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-fenbushi" style=""></span><span class="title">åˆ†å¸ƒå¼</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-lilungongshijisuan" style=""></span><span class="title">ç†è®º&amp;ç®—æ³•&amp;åè®®</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><a href="/RD/distributed-system/api-gateway.html" class="nav-link sidebar-link sidebar-page" aria-label="ç½‘å…³"><!---->ç½‘å…³<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/RD/distributed-system/distributed-id.html" class="nav-link sidebar-link sidebar-page" aria-label="åˆ†å¸ƒå¼ ID"><!---->åˆ†å¸ƒå¼ ID<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-APItiaoyong" style=""></span><span class="title">RPC</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><a href="/RD/distributed-system/distributed-transaction.html" class="nav-link sidebar-link sidebar-page" aria-label="åˆ†å¸ƒå¼äº‹åŠ¡"><!---->åˆ†å¸ƒå¼äº‹åŠ¡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-zuzhixietiaonengli" style=""></span><span class="title">åˆ†å¸ƒå¼åè°ƒ</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-intro.html" class="nav-link sidebar-link sidebar-page" aria-label="ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(å…¥é—¨)"><!---->ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(å…¥é—¨)<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(è¿›é˜¶)"><!---->ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(è¿›é˜¶)<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_1-å¥½ä¹…ä¸è§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. å¥½ä¹…ä¸è§"><!---->1. å¥½ä¹…ä¸è§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_2-ä»€ä¹ˆæ˜¯zookeeper" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. ä»€ä¹ˆæ˜¯ZooKeeper"><!---->2. ä»€ä¹ˆæ˜¯ZooKeeper<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_3-ä¸€è‡´æ€§é—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. ä¸€è‡´æ€§é—®é¢˜"><!---->3. ä¸€è‡´æ€§é—®é¢˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-ä¸€è‡´æ€§åè®®å’Œç®—æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. ä¸€è‡´æ€§åè®®å’Œç®—æ³•"><!---->4. ä¸€è‡´æ€§åè®®å’Œç®—æ³•<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-1-2pc-ä¸¤é˜¶æ®µæäº¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰"><!---->4.1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-2-3pc-ä¸‰é˜¶æ®µæäº¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰"><!---->4.2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-3-paxos-ç®—æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3. Paxos ç®—æ³•"><!---->4.3. Paxos ç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-å¼•å‡º-zab" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5. å¼•å‡º ZAB"><!---->5. å¼•å‡º ZAB<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-1-zookeeper-æ¶æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1. Zookeeper æ¶æ„"><!---->5.1. Zookeeper æ¶æ„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-2-zab-ä¸­çš„ä¸‰ä¸ªè§’è‰²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2. ZAB ä¸­çš„ä¸‰ä¸ªè§’è‰²"><!---->5.2. ZAB ä¸­çš„ä¸‰ä¸ªè§’è‰²<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-3-æ¶ˆæ¯å¹¿æ’­æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.3. æ¶ˆæ¯å¹¿æ’­æ¨¡å¼"><!---->5.3. æ¶ˆæ¯å¹¿æ’­æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-4-å´©æºƒæ¢å¤æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.4. å´©æºƒæ¢å¤æ¨¡å¼"><!---->5.4. å´©æºƒæ¢å¤æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6. Zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†"><!---->6. Zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-1-æ•°æ®æ¨¡å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1. æ•°æ®æ¨¡å‹"><!---->6.1. æ•°æ®æ¨¡å‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-2-ä¼šè¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2. ä¼šè¯"><!---->6.2. ä¼šè¯<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-3-acl" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3. ACL"><!---->6.3. ACL<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-4-watcheræœºåˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.4. Watcheræœºåˆ¶"><!---->6.4. Watcheræœºåˆ¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-zookeeperçš„å‡ ä¸ªå…¸å‹åº”ç”¨åœºæ™¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7. Zookeeperçš„å‡ ä¸ªå…¸å‹åº”ç”¨åœºæ™¯"><!---->7. Zookeeperçš„å‡ ä¸ªå…¸å‹åº”ç”¨åœºæ™¯<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-1-é€‰ä¸»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1. é€‰ä¸»"><!---->7.1. é€‰ä¸»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-2-åˆ†å¸ƒå¼é”" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2. åˆ†å¸ƒå¼é”"><!---->7.2. åˆ†å¸ƒå¼é”<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-3-å‘½åæœåŠ¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3. å‘½åæœåŠ¡"><!---->7.3. å‘½åæœåŠ¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-4-é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.4. é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ"><!---->7.4. é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_8-æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8. æ€»ç»“"><!---->8. æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-in-action.html" class="nav-link sidebar-link sidebar-page" aria-label="ZooKeeper å®æˆ˜"><!---->ZooKeeper å®æˆ˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-et-performance" style=""></span><span class="title">é«˜æ€§èƒ½</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-highavailable" style=""></span><span class="title">é«˜å¯ç”¨</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-tool" style=""></span><span class="title">å·¥å…·</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(è¿›é˜¶)</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´12æœˆ2æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.ezfri.com" target="_blank" rel="noopener noreferrer">EzFri</a></span><span property="author" content="EzFri"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´12æœˆ2æ—¥</span><meta property="datePublished" content="2022-12-02T13:59:58.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´12æœˆ2æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 33 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT33M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_1-å¥½ä¹…ä¸è§" class="router-link-active router-link-exact-active toc-link level2">1. å¥½ä¹…ä¸è§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_2-ä»€ä¹ˆæ˜¯zookeeper" class="router-link-active router-link-exact-active toc-link level2">2. ä»€ä¹ˆæ˜¯ZooKeeper</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_3-ä¸€è‡´æ€§é—®é¢˜" class="router-link-active router-link-exact-active toc-link level2">3. ä¸€è‡´æ€§é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-ä¸€è‡´æ€§åè®®å’Œç®—æ³•" class="router-link-active router-link-exact-active toc-link level2">4. ä¸€è‡´æ€§åè®®å’Œç®—æ³•</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-1-2pc-ä¸¤é˜¶æ®µæäº¤" class="router-link-active router-link-exact-active toc-link level3">4.1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-2-3pc-ä¸‰é˜¶æ®µæäº¤" class="router-link-active router-link-exact-active toc-link level3">4.2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-3-paxos-ç®—æ³•" class="router-link-active router-link-exact-active toc-link level3">4.3. Paxos ç®—æ³•</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-å¼•å‡º-zab" class="router-link-active router-link-exact-active toc-link level2">5. å¼•å‡º ZAB</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-1-zookeeper-æ¶æ„" class="router-link-active router-link-exact-active toc-link level3">5.1. Zookeeper æ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-2-zab-ä¸­çš„ä¸‰ä¸ªè§’è‰²" class="router-link-active router-link-exact-active toc-link level3">5.2. ZAB ä¸­çš„ä¸‰ä¸ªè§’è‰²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-3-æ¶ˆæ¯å¹¿æ’­æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">5.3. æ¶ˆæ¯å¹¿æ’­æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-4-å´©æºƒæ¢å¤æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">5.4. å´©æºƒæ¢å¤æ¨¡å¼</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†" class="router-link-active router-link-exact-active toc-link level2">6. Zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-1-æ•°æ®æ¨¡å‹" class="router-link-active router-link-exact-active toc-link level3">6.1. æ•°æ®æ¨¡å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-2-ä¼šè¯" class="router-link-active router-link-exact-active toc-link level3">6.2. ä¼šè¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-3-acl" class="router-link-active router-link-exact-active toc-link level3">6.3. ACL</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-4-watcheræœºåˆ¶" class="router-link-active router-link-exact-active toc-link level3">6.4. Watcheræœºåˆ¶</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-zookeeperçš„å‡ ä¸ªå…¸å‹åº”ç”¨åœºæ™¯" class="router-link-active router-link-exact-active toc-link level2">7. Zookeeperçš„å‡ ä¸ªå…¸å‹åº”ç”¨åœºæ™¯</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-1-é€‰ä¸»" class="router-link-active router-link-exact-active toc-link level3">7.1. é€‰ä¸»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-2-åˆ†å¸ƒå¼é”" class="router-link-active router-link-exact-active toc-link level3">7.2. åˆ†å¸ƒå¼é”</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-3-å‘½åæœåŠ¡" class="router-link-active router-link-exact-active toc-link level3">7.3. å‘½åæœåŠ¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-4-é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ" class="router-link-active router-link-exact-active toc-link level3">7.4. é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_8-æ€»ç»“" class="router-link-active router-link-exact-active toc-link level2">8. æ€»ç»“</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="zookeeper-ç›¸å…³æ¦‚å¿µæ€»ç»“-è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#zookeeper-ç›¸å…³æ¦‚å¿µæ€»ç»“-è¿›é˜¶" aria-hidden="true">#</a> ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(è¿›é˜¶)</h1><h2 id="_1-å¥½ä¹…ä¸è§" tabindex="-1"><a class="header-anchor" href="#_1-å¥½ä¹…ä¸è§" aria-hidden="true">#</a> 1. å¥½ä¹…ä¸è§</h2><p>ç¦»ä¸Šä¸€ç¯‡æ–‡ç« çš„å‘å¸ƒä¹Ÿå¿«ä¸€ä¸ªæœˆäº†ï¼Œæƒ³æƒ³å·²ç»å¿«ä¸€ä¸ªæœˆæ²¡å†™ä¸œè¥¿äº†ï¼Œå…¶ä¸­å¯èƒ½æœ‰æœŸæœ«è€ƒè¯•ã€è¯¾ç¨‹è®¾è®¡å’Œé©¾ç…§è€ƒè¯•ï¼Œä½†è¿™éƒ½ä¸æ˜¯å€Ÿå£ï¼</p><p>ä¸€åˆ°å†¬å¤©å°±æ‡’çš„ä¸è¡Œï¼Œæœ›å¹¿å¤§æ˜å‹ç£ä¿ƒæˆ‘ğŸ™„ğŸ™„âœï¸âœï¸ã€‚</p><blockquote><p>æ–‡ç« å¾ˆé•¿ï¼Œå…ˆèµåçœ‹ï¼Œå…»æˆä¹ æƒ¯ã€‚â¤ï¸ ğŸ§¡ ğŸ’› ğŸ’š ğŸ’™ ğŸ’œ</p></blockquote><h2 id="_2-ä»€ä¹ˆæ˜¯zookeeper" tabindex="-1"><a class="header-anchor" href="#_2-ä»€ä¹ˆæ˜¯zookeeper" aria-hidden="true">#</a> 2. ä»€ä¹ˆæ˜¯ZooKeeper</h2><p><code>ZooKeeper</code> ç”± <code>Yahoo</code> å¼€å‘ï¼Œåæ¥æèµ ç»™äº† <code>Apache</code> ï¼Œç°å·²æˆä¸º <code>Apache</code> é¡¶çº§é¡¹ç›®ã€‚<code>ZooKeeper</code> æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡å™¨ï¼Œå…¶ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿæä¾›ä¸€è‡´æ€§æœåŠ¡ã€‚å…¶ä¸€è‡´æ€§æ˜¯é€šè¿‡åŸºäº <code>Paxos</code> ç®—æ³•çš„ <code>ZAB</code> åè®®å®Œæˆçš„ã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åˆ†å¸ƒå¼åŒæ­¥ã€é›†ç¾¤ç®¡ç†ã€åˆ†å¸ƒå¼äº‹åŠ¡ç­‰ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œ <code>ZooKeeper</code> æ˜¯ä¸€ä¸ª <strong>åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¡†æ¶</strong> ã€‚åˆ†å¸ƒå¼ï¼Ÿåè°ƒæœåŠ¡ï¼Ÿè¿™å•¥ç©æ„ï¼ŸğŸ¤”ğŸ¤”</p><p>å…¶å®è§£é‡Šåˆ°åˆ†å¸ƒå¼è¿™ä¸ªæ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘å‘ç°æœ‰äº›åŒå­¦å¹¶ä¸æ˜¯èƒ½æŠŠ **åˆ†å¸ƒå¼å’Œé›†ç¾¤ **è¿™ä¸¤ä¸ªæ¦‚å¿µå¾ˆå¥½çš„ç†è§£é€ã€‚å‰æ®µæ—¶é—´æœ‰åŒå­¦å’Œæˆ‘æ¢è®¨èµ·åˆ†å¸ƒå¼çš„ä¸œè¥¿ï¼Œä»–è¯´åˆ†å¸ƒå¼ä¸å°±æ˜¯åŠ æœºå™¨å—ï¼Ÿä¸€å°æœºå™¨ä¸å¤Ÿç”¨å†åŠ ä¸€å°æŠ—å‹å‘—ã€‚å½“ç„¶åŠ æœºå™¨è¿™ç§è¯´æ³•ä¹Ÿæ— å¯åšéï¼Œä½ ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå¿…å®šæ¶‰åŠåˆ°å¤šä¸ªæœºå™¨ï¼Œä½†æ˜¯ä½ åˆ«å¿˜äº†ï¼Œè®¡ç®—æœºå­¦ç§‘ä¸­è¿˜æœ‰ä¸€ä¸ªç›¸ä¼¼çš„æ¦‚å¿µâ€”â€” <code>Cluster</code> ï¼Œé›†ç¾¤ä¸ä¹Ÿæ˜¯åŠ æœºå™¨å—ï¼Ÿä½†æ˜¯ é›†ç¾¤ å’Œ åˆ†å¸ƒå¼ å…¶å®å°±æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ç°åœ¨æœ‰ä¸€ä¸ªç§’æ€æœåŠ¡ï¼Œå¹¶å‘é‡å¤ªå¤§å•æœºç³»ç»Ÿæ‰¿å—ä¸ä½ï¼Œé‚£æˆ‘åŠ å‡ å°æœåŠ¡å™¨ä¹Ÿ <strong>ä¸€æ ·</strong> æä¾›ç§’æ€æœåŠ¡ï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯ <strong><code>Cluster</code> é›†ç¾¤</strong> ã€‚</p><p><img src="/assets/image-20220808011849.93a019dd.png" alt="cluster" loading="lazy"></p><p>ä½†æ˜¯ï¼Œæˆ‘ç°åœ¨æ¢ä¸€ç§æ–¹å¼ï¼Œæˆ‘å°†ä¸€ä¸ªç§’æ€æœåŠ¡ <strong>æ‹†åˆ†æˆå¤šä¸ªå­æœåŠ¡</strong> ï¼Œæ¯”å¦‚åˆ›å»ºè®¢å•æœåŠ¡ï¼Œå¢åŠ ç§¯åˆ†æœåŠ¡ï¼Œæ‰£ä¼˜æƒ åˆ¸æœåŠ¡ç­‰ç­‰ï¼Œ<strong>ç„¶åæˆ‘å°†è¿™äº›å­æœåŠ¡éƒ½éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Š</strong> ï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯ <strong><code>Distributed</code> åˆ†å¸ƒå¼</strong> ã€‚</p><p><img src="/assets/image-20220808011906.9dc8e41b.png" alt="distributed" loading="lazy"></p><p>è€Œæˆ‘ä¸ºä»€ä¹ˆåé©³åŒå­¦æ‰€è¯´çš„åˆ†å¸ƒå¼å°±æ˜¯åŠ æœºå™¨å‘¢ï¼Ÿå› ä¸ºæˆ‘è®¤ä¸ºåŠ æœºå™¨æ›´åŠ é€‚ç”¨äºæ„å»ºé›†ç¾¤ï¼Œå› ä¸ºå®ƒçœŸæ˜¯åªæœ‰åŠ æœºå™¨ã€‚è€Œå¯¹äºåˆ†å¸ƒå¼æ¥è¯´ï¼Œä½ é¦–å…ˆéœ€è¦å°†ä¸šåŠ¡è¿›è¡Œæ‹†åˆ†ï¼Œç„¶åå†åŠ æœºå™¨ï¼ˆä¸ä»…ä»…æ˜¯åŠ æœºå™¨é‚£ä¹ˆç®€å•ï¼‰ï¼ŒåŒæ—¶ä½ è¿˜è¦å»è§£å†³åˆ†å¸ƒå¼å¸¦æ¥çš„ä¸€ç³»åˆ—é—®é¢˜ã€‚</p><p>æ¯”å¦‚å„ä¸ªåˆ†å¸ƒå¼ç»„ä»¶å¦‚ä½•åè°ƒèµ·æ¥ï¼Œå¦‚ä½•å‡å°‘å„ä¸ªç³»ç»Ÿä¹‹é—´çš„è€¦åˆåº¦ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡çš„å¤„ç†ï¼Œå¦‚ä½•å»é…ç½®æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿç­‰ç­‰ã€‚<code>ZooKeeper</code> ä¸»è¦å°±æ˜¯è§£å†³è¿™äº›é—®é¢˜çš„ã€‚</p><h2 id="_3-ä¸€è‡´æ€§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-ä¸€è‡´æ€§é—®é¢˜" aria-hidden="true">#</a> 3. ä¸€è‡´æ€§é—®é¢˜</h2><p>è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå¿…å®šä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜â€”â€” <strong>å› ä¸ºåˆ†åŒºå®¹å¿æ€§ï¼ˆpartition toleranceï¼‰çš„å­˜åœ¨ï¼Œå°±å¿…å®šè¦æ±‚æˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿå¯ç”¨æ€§ï¼ˆavailabilityï¼‰å’Œæ•°æ®ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰ä¸­åšå‡ºæƒè¡¡</strong> ã€‚è¿™å°±æ˜¯è‘—åçš„ <code>CAP</code> å®šç†ã€‚</p><p>ç†è§£èµ·æ¥å…¶å®å¾ˆç®€å•ï¼Œæ¯”å¦‚è¯´æŠŠä¸€ä¸ªç­çº§ä½œä¸ºæ•´ä¸ªç³»ç»Ÿï¼Œè€Œå­¦ç”Ÿæ˜¯ç³»ç»Ÿä¸­çš„ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å­ç³»ç»Ÿã€‚è¿™ä¸ªæ—¶å€™ç­é‡Œçš„å°çº¢å°æ˜å·å·è°ˆæ‹çˆ±è¢«ç­é‡Œçš„å¤§å˜´å·´å°èŠ±å‘ç°äº†ï¼Œå°èŠ±æ¬£å–œè‹¥ç‹‚å‘Šè¯‰äº†å‘¨å›´çš„äººï¼Œç„¶åå°çº¢å°æ˜è°ˆæ‹çˆ±çš„æ¶ˆæ¯åœ¨ç­çº§é‡Œä¼ æ’­èµ·æ¥äº†ã€‚å½“åœ¨æ¶ˆæ¯çš„ä¼ æ’­ï¼ˆæ•£å¸ƒï¼‰è¿‡ç¨‹ä¸­ï¼Œä½ æŠ“åˆ°ä¸€ä¸ªåŒå­¦é—®ä»–ä»¬çš„æƒ…å†µï¼Œå¦‚æœå›ç­”ä½ ä¸çŸ¥é“ï¼Œé‚£ä¹ˆè¯´æ˜æ•´ä¸ªç­çº§ç³»ç»Ÿå‡ºç°äº†æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼ˆå› ä¸ºå°èŠ±å·²ç»çŸ¥é“è¿™ä¸ªæ¶ˆæ¯äº†ï¼‰ã€‚è€Œå¦‚æœä»–ç›´æ¥ä¸å›ç­”ä½ ï¼Œå› ä¸ºæ•´ä¸ªç­çº§æœ‰æ¶ˆæ¯åœ¨è¿›è¡Œä¼ æ’­ï¼ˆä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œéœ€è¦æ‰€æœ‰äººéƒ½çŸ¥é“æ‰å¯æä¾›æœåŠ¡ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™å°±å‡ºç°äº†ç³»ç»Ÿçš„å¯ç”¨æ€§é—®é¢˜ã€‚</p><p>è€Œä¸Šè¿°å‰è€…å°±æ˜¯ <code>Eureka</code> çš„å¤„ç†æ–¹å¼ï¼Œå®ƒä¿è¯äº†APï¼ˆå¯ç”¨æ€§ï¼‰ï¼Œåè€…å°±æ˜¯æˆ‘ä»¬ä»Šå¤©æ‰€è¦è®²çš„ <code>ZooKeeper</code> çš„å¤„ç†æ–¹å¼ï¼Œå®ƒä¿è¯äº†CPï¼ˆæ•°æ®ä¸€è‡´æ€§ï¼‰ã€‚</p><h2 id="_4-ä¸€è‡´æ€§åè®®å’Œç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_4-ä¸€è‡´æ€§åè®®å’Œç®—æ³•" aria-hidden="true">#</a> 4. ä¸€è‡´æ€§åè®®å’Œç®—æ³•</h2><p>è€Œä¸ºäº†è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œåœ¨ç§‘å­¦å®¶å’Œç¨‹åºå‘˜çš„ä¸æ–­æ¢ç´¢ä¸­ï¼Œå°±å‡ºç°äº†å¾ˆå¤šçš„ä¸€è‡´æ€§åè®®å’Œç®—æ³•ã€‚æ¯”å¦‚ 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰ï¼Œ3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰ï¼ŒPaxosç®—æ³•ç­‰ç­‰ã€‚</p><p>è¿™æ—¶å€™è¯·ä½ æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼ŒåŒå­¦ä¹‹é—´å¦‚æœé‡‡ç”¨ä¼ çº¸æ¡çš„æ–¹å¼å»ä¼ æ’­æ¶ˆæ¯ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜â€”â€”æˆ‘å’‹çŸ¥é“æˆ‘çš„å°çº¸æ¡æœ‰æ²¡æœ‰ä¼ åˆ°æˆ‘æƒ³è¦ä¼ é€’çš„é‚£ä¸ªäººæ‰‹ä¸­å‘¢ï¼Ÿä¸‡ä¸€è¢«å“ªä¸ªå°å®¶ä¼™ç»™åŠ«æŒç¯¡æ”¹äº†å‘¢ï¼Œå¯¹å§ï¼Ÿ</p><p>è¿™ä¸ªæ—¶å€™å°±å¼•ç”³å‡ºä¸€ä¸ªæ¦‚å¿µâ€”â€” <strong>æ‹œå åº­å°†å†›é—®é¢˜</strong> ã€‚å®ƒæ„æŒ‡ <strong>åœ¨ä¸å¯é ä¿¡é“ä¸Šè¯•å›¾é€šè¿‡æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼è¾¾åˆ°ä¸€è‡´æ€§æ˜¯ä¸å¯èƒ½çš„</strong>ï¼Œ æ‰€ä»¥æ‰€æœ‰çš„ä¸€è‡´æ€§ç®—æ³•çš„ <strong>å¿…è¦å‰æ</strong> å°±æ˜¯å®‰å…¨å¯é çš„æ¶ˆæ¯é€šé“ã€‚</p><p>è€Œä¸ºä»€ä¹ˆè¦å»è§£å†³æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ï¼Ÿä½ æƒ³æƒ³ï¼Œå¦‚æœä¸€ä¸ªç§’æ€ç³»ç»Ÿå°†æœåŠ¡æ‹†åˆ†æˆäº†ä¸‹è®¢å•å’ŒåŠ ç§¯åˆ†æœåŠ¡ï¼Œè¿™ä¸¤ä¸ªæœåŠ¡éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šäº†ï¼Œä¸‡ä¸€åœ¨æ¶ˆæ¯çš„ä¼ æ’­è¿‡ç¨‹ä¸­ç§¯åˆ†ç³»ç»Ÿå®•æœºäº†ï¼Œæ€»ä¸èƒ½ä½ è¿™è¾¹ä¸‹äº†è®¢å•å´æ²¡åŠ ç§¯åˆ†å§ï¼Ÿä½ æ€»å¾—ä¿è¯ä¸¤è¾¹çš„æ•°æ®éœ€è¦ä¸€è‡´å§ï¼Ÿ</p><h3 id="_4-1-2pc-ä¸¤é˜¶æ®µæäº¤" tabindex="-1"><a class="header-anchor" href="#_4-1-2pc-ä¸¤é˜¶æ®µæäº¤" aria-hidden="true">#</a> 4.1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰</h3><p>ä¸¤é˜¶æ®µæäº¤æ˜¯ä¸€ç§ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§çš„åè®®ï¼Œç°åœ¨å¾ˆå¤šæ•°æ®åº“éƒ½æ˜¯é‡‡ç”¨çš„ä¸¤é˜¶æ®µæäº¤åè®®æ¥å®Œæˆ <strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong> çš„å¤„ç†ã€‚</p><p>åœ¨ä»‹ç»2PCä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æƒ³æƒ³åˆ†å¸ƒå¼äº‹åŠ¡åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p><p>è¿˜æ‹¿ç§’æ€ç³»ç»Ÿçš„ä¸‹è®¢å•å’ŒåŠ ç§¯åˆ†ä¸¤ä¸ªç³»ç»Ÿæ¥ä¸¾ä¾‹å§ï¼ˆæˆ‘æƒ³ä½ ä»¬å¯èƒ½éƒ½åäº†ğŸ¤®ğŸ¤®ğŸ¤®ï¼‰ï¼Œæˆ‘ä»¬æ­¤æ—¶ä¸‹å®Œè®¢å•ä¼šå‘ä¸ªæ¶ˆæ¯ç»™ç§¯åˆ†ç³»ç»Ÿå‘Šè¯‰å®ƒä¸‹é¢è¯¥å¢åŠ ç§¯åˆ†äº†ã€‚å¦‚æœæˆ‘ä»¬ä»…ä»…æ˜¯å‘é€ä¸€ä¸ªæ¶ˆæ¯ä¹Ÿä¸æ”¶å›å¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„è®¢å•ç³»ç»Ÿæ€ä¹ˆèƒ½çŸ¥é“ç§¯åˆ†ç³»ç»Ÿçš„æ”¶åˆ°æ¶ˆæ¯çš„æƒ…å†µå‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬å¢åŠ ä¸€ä¸ªæ”¶å›å¤çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆå½“ç§¯åˆ†ç³»ç»Ÿæ”¶åˆ°æ¶ˆæ¯åè¿”å›ç»™è®¢å•ç³»ç»Ÿä¸€ä¸ª <code>Response</code> ï¼Œä½†åœ¨ä¸­é—´å‡ºç°äº†ç½‘ç»œæ³¢åŠ¨ï¼Œé‚£ä¸ªå›å¤æ¶ˆæ¯æ²¡æœ‰å‘é€æˆåŠŸï¼Œè®¢å•ç³»ç»Ÿæ˜¯ä¸æ˜¯ä»¥ä¸ºç§¯åˆ†ç³»ç»Ÿæ¶ˆæ¯æ¥æ”¶å¤±è´¥äº†ï¼Ÿå®ƒæ˜¯ä¸æ˜¯ä¼šå›æ»šäº‹åŠ¡ï¼Ÿä½†æ­¤æ—¶ç§¯åˆ†ç³»ç»Ÿæ˜¯æˆåŠŸæ”¶åˆ°æ¶ˆæ¯çš„ï¼Œå®ƒå°±ä¼šå»å¤„ç†æ¶ˆæ¯ç„¶åç»™ç”¨æˆ·å¢åŠ ç§¯åˆ†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºç°ç§¯åˆ†åŠ äº†ä½†æ˜¯è®¢å•æ²¡ä¸‹æˆåŠŸã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬æ‰€éœ€è¦è§£å†³çš„æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ•´ä¸ªè°ƒç”¨é“¾ä¸­ï¼Œæˆ‘ä»¬æ‰€æœ‰æœåŠ¡çš„æ•°æ®å¤„ç†è¦ä¹ˆéƒ½æˆåŠŸè¦ä¹ˆéƒ½å¤±è´¥ï¼Œå³æ‰€æœ‰æœåŠ¡çš„ <strong>åŸå­æ€§é—®é¢˜</strong> ã€‚</p><p>åœ¨ä¸¤é˜¶æ®µæäº¤ä¸­ï¼Œä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªè§’è‰²ï¼Œåˆ†åˆ«æ˜¯åè°ƒè€…å’Œå‚ä¸è€…ã€‚</p><p>ç¬¬ä¸€é˜¶æ®µï¼šå½“è¦æ‰§è¡Œä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™ï¼Œäº‹åŠ¡å‘èµ·è€…é¦–å…ˆå‘åè°ƒè€…å‘èµ·äº‹åŠ¡è¯·æ±‚ï¼Œç„¶ååè°ƒè€…ä¼šç»™æ‰€æœ‰å‚ä¸è€…å‘é€ <code>prepare</code> è¯·æ±‚ï¼ˆå…¶ä¸­åŒ…æ‹¬äº‹åŠ¡å†…å®¹ï¼‰å‘Šè¯‰å‚ä¸è€…ä½ ä»¬éœ€è¦æ‰§è¡Œäº‹åŠ¡äº†ï¼Œå¦‚æœèƒ½æ‰§è¡Œæˆ‘å‘çš„äº‹åŠ¡å†…å®¹é‚£ä¹ˆå°±å…ˆæ‰§è¡Œä½†ä¸æäº¤ï¼Œæ‰§è¡Œåè¯·ç»™æˆ‘å›å¤ã€‚ç„¶åå‚ä¸è€…æ”¶åˆ° <code>prepare</code> æ¶ˆæ¯åï¼Œä»–ä»¬ä¼šå¼€å§‹æ‰§è¡Œäº‹åŠ¡ï¼ˆä½†ä¸æäº¤ï¼‰ï¼Œå¹¶å°† <code>Undo</code> å’Œ <code>Redo</code> ä¿¡æ¯è®°å…¥äº‹åŠ¡æ—¥å¿—ä¸­ï¼Œä¹‹åå‚ä¸è€…å°±å‘åè°ƒè€…åé¦ˆæ˜¯å¦å‡†å¤‡å¥½äº†ã€‚</p><p>ç¬¬äºŒé˜¶æ®µï¼šç¬¬äºŒé˜¶æ®µä¸»è¦æ˜¯åè°ƒè€…æ ¹æ®å‚ä¸è€…åé¦ˆçš„æƒ…å†µæ¥å†³å®šæ¥ä¸‹æ¥æ˜¯å¦å¯ä»¥è¿›è¡Œäº‹åŠ¡çš„æäº¤æ“ä½œï¼Œå³æäº¤äº‹åŠ¡æˆ–è€…å›æ»šäº‹åŠ¡ã€‚</p><p>æ¯”å¦‚è¿™ä¸ªæ—¶å€™ <strong>æ‰€æœ‰çš„å‚ä¸è€…</strong> éƒ½è¿”å›äº†å‡†å¤‡å¥½äº†çš„æ¶ˆæ¯ï¼Œè¿™ä¸ªæ—¶å€™å°±è¿›è¡Œäº‹åŠ¡çš„æäº¤ï¼Œåè°ƒè€…æ­¤æ—¶ä¼šç»™æ‰€æœ‰çš„å‚ä¸è€…å‘é€ <strong><code>Commit</code> è¯·æ±‚</strong> ï¼Œå½“å‚ä¸è€…æ”¶åˆ° <code>Commit</code> è¯·æ±‚çš„æ—¶å€™ä¼šæ‰§è¡Œå‰é¢æ‰§è¡Œçš„äº‹åŠ¡çš„ <strong>æäº¤æ“ä½œ</strong> ï¼Œæäº¤å®Œæ¯•ä¹‹åå°†ç»™åè°ƒè€…å‘é€æäº¤æˆåŠŸçš„å“åº”ã€‚</p><p>è€Œå¦‚æœåœ¨ç¬¬ä¸€é˜¶æ®µå¹¶ä¸æ˜¯æ‰€æœ‰å‚ä¸è€…éƒ½è¿”å›äº†å‡†å¤‡å¥½äº†çš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆæ­¤æ—¶åè°ƒè€…å°†ä¼šç»™æ‰€æœ‰å‚ä¸è€…å‘é€ <strong>å›æ»šäº‹åŠ¡çš„ <code>rollback</code> è¯·æ±‚</strong>ï¼Œå‚ä¸è€…æ”¶åˆ°ä¹‹åå°†ä¼š <strong>å›æ»šå®ƒåœ¨ç¬¬ä¸€é˜¶æ®µæ‰€åšçš„äº‹åŠ¡å¤„ç†</strong> ï¼Œç„¶åå†å°†å¤„ç†æƒ…å†µè¿”å›ç»™åè°ƒè€…ï¼Œæœ€ç»ˆåè°ƒè€…æ”¶åˆ°å“åº”åä¾¿ç»™äº‹åŠ¡å‘èµ·è€…è¿”å›å¤„ç†å¤±è´¥çš„ç»“æœã€‚</p><p><img src="/assets/image-20220808011930.93d54368.png" alt="2PCæµç¨‹" loading="lazy"></p><p>ä¸ªäººè§‰å¾— 2PC å®ç°å¾—è¿˜æ˜¯æ¯”è¾ƒé¸¡è‚‹çš„ï¼Œå› ä¸ºäº‹å®ä¸Šå®ƒåªè§£å†³äº†å„ä¸ªäº‹åŠ¡çš„åŸå­æ€§é—®é¢˜ï¼Œéšä¹‹ä¹Ÿå¸¦æ¥äº†å¾ˆå¤šçš„é—®é¢˜ã€‚</p><ul><li><strong>å•ç‚¹æ•…éšœé—®é¢˜</strong>ï¼Œå¦‚æœåè°ƒè€…æŒ‚äº†é‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿéƒ½å¤„äºä¸å¯ç”¨çš„çŠ¶æ€äº†ã€‚</li><li><strong>é˜»å¡é—®é¢˜</strong>ï¼Œå³å½“åè°ƒè€…å‘é€ <code>prepare</code> è¯·æ±‚ï¼Œå‚ä¸è€…æ”¶åˆ°ä¹‹åå¦‚æœèƒ½å¤„ç†é‚£ä¹ˆå®ƒå°†ä¼šè¿›è¡Œäº‹åŠ¡çš„å¤„ç†ä½†å¹¶ä¸æäº¤ï¼Œè¿™ä¸ªæ—¶å€™ä¼šä¸€ç›´å ç”¨ç€èµ„æºä¸é‡Šæ”¾ï¼Œå¦‚æœæ­¤æ—¶åè°ƒè€…æŒ‚äº†ï¼Œé‚£ä¹ˆè¿™äº›èµ„æºéƒ½ä¸ä¼šå†é‡Šæ”¾äº†ï¼Œè¿™ä¼šæå¤§å½±å“æ€§èƒ½ã€‚</li><li><strong>æ•°æ®ä¸ä¸€è‡´é—®é¢˜</strong>ï¼Œæ¯”å¦‚å½“ç¬¬äºŒé˜¶æ®µï¼Œåè°ƒè€…åªå‘é€äº†ä¸€éƒ¨åˆ†çš„ <code>commit</code> è¯·æ±‚å°±æŒ‚äº†ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€ï¼Œæ”¶åˆ°æ¶ˆæ¯çš„å‚ä¸è€…ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤ï¼Œè€Œåé¢æ²¡æ”¶åˆ°çš„åˆ™ä¸ä¼šè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±ä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚</li></ul><h3 id="_4-2-3pc-ä¸‰é˜¶æ®µæäº¤" tabindex="-1"><a class="header-anchor" href="#_4-2-3pc-ä¸‰é˜¶æ®µæäº¤" aria-hidden="true">#</a> 4.2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰</h3><p>å› ä¸º2PCå­˜åœ¨çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ¯”å¦‚å•ç‚¹ï¼Œå®¹é”™æœºåˆ¶ç¼ºé™·ç­‰ç­‰ï¼Œä»è€Œäº§ç”Ÿäº† <strong>3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰</strong> ã€‚é‚£ä¹ˆè¿™ä¸‰é˜¶æ®µåˆåˆ†åˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><blockquote><p>åƒä¸‡ä¸è¦å§PCç†è§£æˆä¸ªäººç”µè„‘äº†ï¼Œå…¶å®ä»–ä»¬æ˜¯ phase-commit çš„ç¼©å†™ï¼Œå³é˜¶æ®µæäº¤ã€‚</p></blockquote><ol><li><strong>CanCommité˜¶æ®µ</strong>ï¼šåè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€ <code>CanCommit</code> è¯·æ±‚ï¼Œå‚ä¸è€…æ”¶åˆ°è¯·æ±‚åä¼šæ ¹æ®è‡ªèº«æƒ…å†µæŸ¥çœ‹æ˜¯å¦èƒ½æ‰§è¡Œäº‹åŠ¡ï¼Œå¦‚æœå¯ä»¥åˆ™è¿”å› YES å“åº”å¹¶è¿›å…¥é¢„å¤‡çŠ¶æ€ï¼Œå¦åˆ™è¿”å› NO ã€‚</li><li><strong>PreCommité˜¶æ®µ</strong>ï¼šåè°ƒè€…æ ¹æ®å‚ä¸è€…è¿”å›çš„å“åº”æ¥å†³å®šæ˜¯å¦å¯ä»¥è¿›è¡Œä¸‹é¢çš„ <code>PreCommit</code> æ“ä½œã€‚å¦‚æœä¸Šé¢å‚ä¸è€…è¿”å›çš„éƒ½æ˜¯ YESï¼Œé‚£ä¹ˆåè°ƒè€…å°†å‘æ‰€æœ‰å‚ä¸è€…å‘é€ <code>PreCommit</code> é¢„æäº¤è¯·æ±‚ï¼Œ<strong>å‚ä¸è€…æ”¶åˆ°é¢„æäº¤è¯·æ±‚åï¼Œä¼šè¿›è¡Œäº‹åŠ¡çš„æ‰§è¡Œæ“ä½œï¼Œå¹¶å°† <code>Undo</code> å’Œ <code>Redo</code> ä¿¡æ¯å†™å…¥äº‹åŠ¡æ—¥å¿—ä¸­</strong> ï¼Œæœ€åå¦‚æœå‚ä¸è€…é¡ºåˆ©æ‰§è¡Œäº†äº‹åŠ¡åˆ™ç»™åè°ƒè€…è¿”å›æˆåŠŸçš„å“åº”ã€‚å¦‚æœåœ¨ç¬¬ä¸€é˜¶æ®µåè°ƒè€…æ”¶åˆ°äº† <strong>ä»»ä½•ä¸€ä¸ª NO</strong> çš„ä¿¡æ¯ï¼Œæˆ–è€… <strong>åœ¨ä¸€å®šæ—¶é—´å†…</strong> å¹¶æ²¡æœ‰æ”¶åˆ°å…¨éƒ¨çš„å‚ä¸è€…çš„å“åº”ï¼Œé‚£ä¹ˆå°±ä¼šä¸­æ–­äº‹åŠ¡ï¼Œå®ƒä¼šå‘æ‰€æœ‰å‚ä¸è€…å‘é€ä¸­æ–­è¯·æ±‚ï¼ˆabortï¼‰ï¼Œå‚ä¸è€…æ”¶åˆ°ä¸­æ–­è¯·æ±‚ä¹‹åä¼šç«‹å³ä¸­æ–­äº‹åŠ¡ï¼Œæˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°åè°ƒè€…çš„è¯·æ±‚ï¼Œå®ƒä¹Ÿä¼šä¸­æ–­äº‹åŠ¡ã€‚</li><li><strong>DoCommité˜¶æ®µ</strong>ï¼šè¿™ä¸ªé˜¶æ®µå…¶å®å’Œ <code>2PC</code> çš„ç¬¬äºŒé˜¶æ®µå·®ä¸å¤šï¼Œå¦‚æœåè°ƒè€…æ”¶åˆ°äº†æ‰€æœ‰å‚ä¸è€…åœ¨ <code>PreCommit</code> é˜¶æ®µçš„ YES å“åº”ï¼Œé‚£ä¹ˆåè°ƒè€…å°†ä¼šç»™æ‰€æœ‰å‚ä¸è€…å‘é€ <code>DoCommit</code> è¯·æ±‚ï¼Œ<strong>å‚ä¸è€…æ”¶åˆ° <code>DoCommit</code> è¯·æ±‚ååˆ™ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤å·¥ä½œ</strong>ï¼Œå®Œæˆååˆ™ä¼šç»™åè°ƒè€…è¿”å›å“åº”ï¼Œåè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…è¿”å›çš„äº‹åŠ¡æäº¤æˆåŠŸçš„å“åº”ä¹‹ååˆ™å®Œæˆäº‹åŠ¡ã€‚è‹¥åè°ƒè€…åœ¨ <code>PreCommit</code> é˜¶æ®µ <strong>æ”¶åˆ°äº†ä»»ä½•ä¸€ä¸ª NO æˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„å“åº”</strong> ï¼Œé‚£ä¹ˆå°±ä¼šè¿›è¡Œä¸­æ–­è¯·æ±‚çš„å‘é€ï¼Œå‚ä¸è€…æ”¶åˆ°ä¸­æ–­è¯·æ±‚ååˆ™ä¼š <strong>é€šè¿‡ä¸Šé¢è®°å½•çš„å›æ»šæ—¥å¿—</strong> æ¥è¿›è¡Œäº‹åŠ¡çš„å›æ»šæ“ä½œï¼Œå¹¶å‘åè°ƒè€…åé¦ˆå›æ»šçŠ¶å†µï¼Œåè°ƒè€…æ”¶åˆ°å‚ä¸è€…è¿”å›çš„æ¶ˆæ¯åï¼Œä¸­æ–­äº‹åŠ¡ã€‚</li></ol><p><img src="/assets/image-20220808011943.c6d4ec45.png" alt="3PCæµç¨‹" loading="lazy"></p><blockquote><p>è¿™é‡Œæ˜¯ <code>3PC</code> åœ¨æˆåŠŸçš„ç¯å¢ƒä¸‹çš„æµç¨‹å›¾ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>3PC</code> åœ¨å¾ˆå¤šåœ°æ–¹è¿›è¡Œäº†è¶…æ—¶ä¸­æ–­çš„å¤„ç†ï¼Œæ¯”å¦‚åè°ƒè€…åœ¨æŒ‡å®šæ—¶é—´å†…ä¸ºæ”¶åˆ°å…¨éƒ¨çš„ç¡®è®¤æ¶ˆæ¯åˆ™è¿›è¡Œäº‹åŠ¡ä¸­æ–­çš„å¤„ç†ï¼Œè¿™æ ·èƒ½ <strong>å‡å°‘åŒæ­¥é˜»å¡çš„æ—¶é—´</strong> ã€‚è¿˜æœ‰éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong><code>3PC</code> åœ¨ <code>DoCommit</code> é˜¶æ®µå‚ä¸è€…å¦‚æœªæ”¶åˆ°åè°ƒè€…å‘é€çš„æäº¤äº‹åŠ¡çš„è¯·æ±‚ï¼Œå®ƒä¼šåœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œäº‹åŠ¡çš„æäº¤</strong>ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿæ˜¯å› ä¸ºè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è‚¯å®š<strong>ä¿è¯äº†åœ¨ç¬¬ä¸€é˜¶æ®µæ‰€æœ‰çš„åè°ƒè€…å…¨éƒ¨è¿”å›äº†å¯ä»¥æ‰§è¡Œäº‹åŠ¡çš„å“åº”</strong>ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æœ‰ç†ç”±<strong>ç›¸ä¿¡å…¶ä»–ç³»ç»Ÿéƒ½èƒ½è¿›è¡Œäº‹åŠ¡çš„æ‰§è¡Œå’Œæäº¤</strong>ï¼Œæ‰€ä»¥<strong>ä¸ç®¡</strong>åè°ƒè€…æœ‰æ²¡æœ‰å‘æ¶ˆæ¯ç»™å‚ä¸è€…ï¼Œè¿›å…¥ç¬¬ä¸‰é˜¶æ®µå‚ä¸è€…éƒ½ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤æ“ä½œã€‚</p></blockquote><p>æ€»ä¹‹ï¼Œ<code>3PC</code> é€šè¿‡ä¸€ç³»åˆ—çš„è¶…æ—¶æœºåˆ¶å¾ˆå¥½çš„ç¼“è§£äº†é˜»å¡é—®é¢˜ï¼Œä½†æ˜¯æœ€é‡è¦çš„ä¸€è‡´æ€§å¹¶æ²¡æœ‰å¾—åˆ°æ ¹æœ¬çš„è§£å†³ï¼Œæ¯”å¦‚åœ¨ <code>PreCommit</code> é˜¶æ®µï¼Œå½“ä¸€ä¸ªå‚ä¸è€…æ”¶åˆ°äº†è¯·æ±‚ä¹‹åå…¶ä»–å‚ä¸è€…å’Œåè°ƒè€…æŒ‚äº†æˆ–è€…å‡ºç°äº†ç½‘ç»œåˆ†åŒºï¼Œè¿™ä¸ªæ—¶å€™æ”¶åˆ°æ¶ˆæ¯çš„å‚ä¸è€…éƒ½ä¼šè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œè¿™å°±ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚</p><p>æ‰€ä»¥ï¼Œè¦è§£å†³ä¸€è‡´æ€§é—®é¢˜è¿˜éœ€è¦é  <code>Paxos</code> ç®—æ³•â­ï¸ â­ï¸ â­ï¸ ã€‚</p><h3 id="_4-3-paxos-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_4-3-paxos-ç®—æ³•" aria-hidden="true">#</a> 4.3. <code>Paxos</code> ç®—æ³•</h3><p><code>Paxos</code> ç®—æ³•æ˜¯åŸºäº<strong>æ¶ˆæ¯ä¼ é€’ä¸”å…·æœ‰é«˜åº¦å®¹é”™ç‰¹æ€§çš„ä¸€è‡´æ€§ç®—æ³•</strong>ï¼Œæ˜¯ç›®å‰å…¬è®¤çš„è§£å†³åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜æœ€æœ‰æ•ˆçš„ç®—æ³•ä¹‹ä¸€ï¼Œ<strong>å…¶è§£å†³çš„é—®é¢˜å°±æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¦‚ä½•å°±æŸä¸ªå€¼ï¼ˆå†³è®®ï¼‰è¾¾æˆä¸€è‡´</strong> ã€‚</p><p>åœ¨ <code>Paxos</code> ä¸­ä¸»è¦æœ‰ä¸‰ä¸ªè§’è‰²ï¼Œåˆ†åˆ«ä¸º <code>Proposerææ¡ˆè€…</code>ã€<code>Acceptorè¡¨å†³è€…</code>ã€<code>Learnerå­¦ä¹ è€…</code>ã€‚<code>Paxos</code> ç®—æ³•å’Œ <code>2PC</code> ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸¤ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ä¸º <code>Prepare</code> å’Œ <code>accept</code> é˜¶æ®µã€‚</p><h4 id="_4-3-1-prepare-é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#_4-3-1-prepare-é˜¶æ®µ" aria-hidden="true">#</a> 4.3.1. prepare é˜¶æ®µ</h4><ul><li><code>Proposerææ¡ˆè€…</code>ï¼šè´Ÿè´£æå‡º <code>proposal</code>ï¼Œæ¯ä¸ªææ¡ˆè€…åœ¨æå‡ºææ¡ˆæ—¶éƒ½ä¼šé¦–å…ˆè·å–åˆ°ä¸€ä¸ª <strong>å…·æœ‰å…¨å±€å”¯ä¸€æ€§çš„ã€é€’å¢çš„ææ¡ˆç¼–å·N</strong>ï¼Œå³åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ˜¯å”¯ä¸€çš„ç¼–å· Nï¼Œç„¶åå°†è¯¥ç¼–å·èµ‹äºˆå…¶è¦æå‡ºçš„ææ¡ˆï¼Œåœ¨<strong>ç¬¬ä¸€é˜¶æ®µæ˜¯åªå°†ææ¡ˆç¼–å·å‘é€ç»™æ‰€æœ‰çš„è¡¨å†³è€…</strong>ã€‚</li><li><code>Acceptorè¡¨å†³è€…</code>ï¼šæ¯ä¸ªè¡¨å†³è€…åœ¨ <code>accept</code> æŸææ¡ˆåï¼Œä¼šå°†è¯¥ææ¡ˆç¼–å·Nè®°å½•åœ¨æœ¬åœ°ï¼Œè¿™æ ·æ¯ä¸ªè¡¨å†³è€…ä¸­ä¿å­˜çš„å·²ç»è¢« accept çš„ææ¡ˆä¸­ä¼šå­˜åœ¨ä¸€ä¸ª<strong>ç¼–å·æœ€å¤§çš„ææ¡ˆ</strong>ï¼Œå…¶ç¼–å·å‡è®¾ä¸º <code>maxN</code>ã€‚æ¯ä¸ªè¡¨å†³è€…ä»…ä¼š <code>accept</code> ç¼–å·å¤§äºè‡ªå·±æœ¬åœ° <code>maxN</code> çš„ææ¡ˆï¼Œåœ¨æ‰¹å‡†ææ¡ˆæ—¶è¡¨å†³è€…ä¼šå°†ä»¥å‰æ¥å—è¿‡çš„æœ€å¤§ç¼–å·çš„ææ¡ˆä½œä¸ºå“åº”åé¦ˆç»™ <code>Proposer</code> ã€‚</li></ul><blockquote><p>ä¸‹é¢æ˜¯ <code>prepare</code> é˜¶æ®µçš„æµç¨‹å›¾ï¼Œä½ å¯ä»¥å¯¹ç…§ç€å‚è€ƒä¸€ä¸‹ã€‚</p></blockquote><p><img src="/assets/image-20220808012000.73d72ab6.png" alt="paxosç¬¬ä¸€é˜¶æ®µ" loading="lazy"></p><h4 id="_4-3-2-accept-é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#_4-3-2-accept-é˜¶æ®µ" aria-hidden="true">#</a> 4.3.2. accept é˜¶æ®µ</h4><p>å½“ä¸€ä¸ªææ¡ˆè¢« <code>Proposer</code> æå‡ºåï¼Œå¦‚æœ <code>Proposer</code> æ”¶åˆ°äº†è¶…è¿‡åŠæ•°çš„ <code>Acceptor</code> çš„æ‰¹å‡†ï¼ˆ<code>Proposer</code> æœ¬èº«åŒæ„ï¼‰ï¼Œé‚£ä¹ˆæ­¤æ—¶ <code>Proposer</code> ä¼šç»™æ‰€æœ‰çš„ <code>Acceptor</code> å‘é€çœŸæ­£çš„ææ¡ˆï¼ˆä½ å¯ä»¥ç†è§£ä¸ºç¬¬ä¸€é˜¶æ®µä¸ºè¯•æ¢ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ <code>Proposer</code> å°±ä¼šå‘é€ææ¡ˆçš„å†…å®¹å’Œææ¡ˆç¼–å·ã€‚</p><p>è¡¨å†³è€…æ”¶åˆ°ææ¡ˆè¯·æ±‚åä¼šå†æ¬¡æ¯”è¾ƒæœ¬èº«å·²ç»æ‰¹å‡†è¿‡çš„æœ€å¤§ææ¡ˆç¼–å·å’Œè¯¥ææ¡ˆç¼–å·ï¼Œå¦‚æœè¯¥ææ¡ˆç¼–å· <strong>å¤§äºç­‰äº</strong> å·²ç»æ‰¹å‡†è¿‡çš„æœ€å¤§ææ¡ˆç¼–å·ï¼Œé‚£ä¹ˆå°± <code>accept</code> è¯¥ææ¡ˆï¼ˆæ­¤æ—¶æ‰§è¡Œææ¡ˆå†…å®¹ä½†ä¸æäº¤ï¼‰ï¼Œéšåå°†æƒ…å†µè¿”å›ç»™ <code>Proposer</code> ã€‚å¦‚æœä¸æ»¡è¶³åˆ™ä¸å›åº”æˆ–è€…è¿”å› NO ã€‚</p><p><img src="/assets/image-20220808012010.9b29542c.png" alt="paxosç¬¬äºŒé˜¶æ®µ1" loading="lazy"></p><p>å½“ <code>Proposer</code> æ”¶åˆ°è¶…è¿‡åŠæ•°çš„ <code>accept</code> ï¼Œé‚£ä¹ˆå®ƒè¿™ä¸ªæ—¶å€™ä¼šå‘æ‰€æœ‰çš„ <code>acceptor</code> å‘é€ææ¡ˆçš„æäº¤è¯·æ±‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºä¸Šè¿°ä»…ä»…æ˜¯è¶…è¿‡åŠæ•°çš„ <code>acceptor</code> æ‰¹å‡†æ‰§è¡Œäº†è¯¥ææ¡ˆå†…å®¹ï¼Œå…¶ä»–æ²¡æœ‰æ‰¹å‡†çš„å¹¶æ²¡æœ‰æ‰§è¡Œè¯¥ææ¡ˆå†…å®¹ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™éœ€è¦<strong>å‘æœªæ‰¹å‡†çš„ <code>acceptor</code> å‘é€ææ¡ˆå†…å®¹å’Œææ¡ˆç¼–å·å¹¶è®©å®ƒæ— æ¡ä»¶æ‰§è¡Œå’Œæäº¤</strong>ï¼Œè€Œå¯¹äºå‰é¢å·²ç»æ‰¹å‡†è¿‡è¯¥ææ¡ˆçš„ <code>acceptor</code> æ¥è¯´ <strong>ä»…ä»…éœ€è¦å‘é€è¯¥ææ¡ˆçš„ç¼–å·</strong> ï¼Œè®© <code>acceptor</code> æ‰§è¡Œæäº¤å°±è¡Œäº†ã€‚</p><p><img src="/assets/image-20220808012021.6151ee26.png" alt="paxosç¬¬äºŒé˜¶æ®µ2" loading="lazy"></p><p>è€Œå¦‚æœ <code>Proposer</code> å¦‚æœæ²¡æœ‰æ”¶åˆ°è¶…è¿‡åŠæ•°çš„ <code>accept</code> é‚£ä¹ˆå®ƒå°†ä¼šå°† <strong>é€’å¢</strong> è¯¥ <code>Proposal</code> çš„ç¼–å·ï¼Œç„¶å <strong>é‡æ–°è¿›å…¥ <code>Prepare</code> é˜¶æ®µ</strong> ã€‚</p><blockquote><p>å¯¹äº <code>Learner</code> æ¥è¯´å¦‚ä½•å»å­¦ä¹  <code>Acceptor</code> æ‰¹å‡†çš„ææ¡ˆå†…å®¹ï¼Œè¿™æœ‰å¾ˆå¤šæ–¹å¼ï¼Œè¯»è€…å¯ä»¥è‡ªå·±å»äº†è§£ä¸€ä¸‹ï¼Œè¿™é‡Œä¸åšè¿‡å¤šè§£é‡Šã€‚</p></blockquote><h4 id="_4-3-3-paxos-ç®—æ³•çš„æ­»å¾ªç¯é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4-3-3-paxos-ç®—æ³•çš„æ­»å¾ªç¯é—®é¢˜" aria-hidden="true">#</a> 4.3.3. <code>paxos</code> ç®—æ³•çš„æ­»å¾ªç¯é—®é¢˜</h4><p>å…¶å®å°±æœ‰ç‚¹ç±»ä¼¼äºä¸¤ä¸ªäººåµæ¶ï¼Œå°æ˜è¯´æˆ‘æ˜¯å¯¹çš„ï¼Œå°çº¢è¯´æˆ‘æ‰æ˜¯å¯¹çš„ï¼Œä¸¤ä¸ªäººæ®ç†åŠ›äº‰çš„è°ä¹Ÿä¸è®©è°ğŸ¤¬ğŸ¤¬ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œæ­¤æ—¶ææ¡ˆè€… P1 æå‡ºä¸€ä¸ªæ–¹æ¡ˆ M1ï¼Œå®Œæˆäº† <code>Prepare</code> é˜¶æ®µçš„å·¥ä½œï¼Œè¿™ä¸ªæ—¶å€™ <code>acceptor</code> åˆ™æ‰¹å‡†äº† M1ï¼Œä½†æ˜¯æ­¤æ—¶ææ¡ˆè€… P2 åŒæ—¶ä¹Ÿæå‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆ M2ï¼Œå®ƒä¹Ÿå®Œæˆäº† <code>Prepare</code> é˜¶æ®µçš„å·¥ä½œã€‚ç„¶å P1 çš„æ–¹æ¡ˆå·²ç»ä¸èƒ½åœ¨ç¬¬äºŒé˜¶æ®µè¢«æ‰¹å‡†äº†ï¼ˆå› ä¸º <code>acceptor</code> å·²ç»æ‰¹å‡†äº†æ¯” M1 æ›´å¤§çš„ M2ï¼‰ï¼Œæ‰€ä»¥ P1 è‡ªå¢æ–¹æ¡ˆå˜ä¸º M3 é‡æ–°è¿›å…¥ <code>Prepare</code> é˜¶æ®µï¼Œç„¶å <code>acceptor</code> ï¼Œåˆæ‰¹å‡†äº†æ–°çš„ M3 æ–¹æ¡ˆï¼Œå®ƒåˆä¸èƒ½æ‰¹å‡† M2 äº†ï¼Œè¿™ä¸ªæ—¶å€™ M2 åˆè‡ªå¢è¿›å…¥ <code>Prepare</code> é˜¶æ®µã€‚ã€‚ã€‚</p><p>å°±è¿™æ ·æ— ä¼‘æ— æ­¢çš„æ°¸è¿œææ¡ˆä¸‹å»ï¼Œè¿™å°±æ˜¯ <code>paxos</code> ç®—æ³•çš„æ­»å¾ªç¯é—®é¢˜ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è§£å†³å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œäººå¤šäº†å®¹æ˜“åµæ¶ï¼Œæˆ‘ç°åœ¨ <strong>å°±å…è®¸ä¸€ä¸ªèƒ½ææ¡ˆ</strong> å°±è¡Œäº†ã€‚</p><h2 id="_5-å¼•å‡º-zab" tabindex="-1"><a class="header-anchor" href="#_5-å¼•å‡º-zab" aria-hidden="true">#</a> 5. å¼•å‡º <code>ZAB</code></h2><h3 id="_5-1-zookeeper-æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_5-1-zookeeper-æ¶æ„" aria-hidden="true">#</a> 5.1. <code>Zookeeper</code> æ¶æ„</h3><p>ä½œä¸ºä¸€ä¸ªä¼˜ç§€é«˜æ•ˆä¸”å¯é çš„åˆ†å¸ƒå¼åè°ƒæ¡†æ¶ï¼Œ<code>ZooKeeper</code> åœ¨è§£å†³åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§é—®é¢˜æ—¶å¹¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨ <code>Paxos</code> ï¼Œè€Œæ˜¯ä¸“é—¨å®šåˆ¶äº†ä¸€è‡´æ€§åè®®å«åš <code>ZAB(ZooKeeper Atomic Broadcast)</code> åŸå­å¹¿æ’­åè®®ï¼Œè¯¥åè®®èƒ½å¤Ÿå¾ˆå¥½åœ°æ”¯æŒ <strong>å´©æºƒæ¢å¤</strong> ã€‚</p><p><img src="/assets/image-20220808012038.23bbd628.png" alt="Zookeeperæ¶æ„" loading="lazy"></p><h3 id="_5-2-zab-ä¸­çš„ä¸‰ä¸ªè§’è‰²" tabindex="-1"><a class="header-anchor" href="#_5-2-zab-ä¸­çš„ä¸‰ä¸ªè§’è‰²" aria-hidden="true">#</a> 5.2. <code>ZAB</code> ä¸­çš„ä¸‰ä¸ªè§’è‰²</h3><p>å’Œä»‹ç» <code>Paxos</code> ä¸€æ ·ï¼Œåœ¨ä»‹ç» <code>ZAB</code> åè®®ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹åœ¨ <code>ZAB</code> ä¸­ä¸‰ä¸ªä¸»è¦çš„è§’è‰²ï¼Œ<code>Leader é¢†å¯¼è€…</code>ã€<code>Followerè·Ÿéšè€…</code>ã€<code>Observerè§‚å¯Ÿè€…</code> ã€‚</p><ul><li><code>Leader</code> ï¼šé›†ç¾¤ä¸­ <strong>å”¯ä¸€çš„å†™è¯·æ±‚å¤„ç†è€…</strong> ï¼Œèƒ½å¤Ÿå‘èµ·æŠ•ç¥¨ï¼ˆæŠ•ç¥¨ä¹Ÿæ˜¯ä¸ºäº†è¿›è¡Œå†™è¯·æ±‚ï¼‰ã€‚</li><li><code>Follower</code>ï¼šèƒ½å¤Ÿæ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¦‚æœæ˜¯è¯»è¯·æ±‚åˆ™å¯ä»¥è‡ªå·±å¤„ç†ï¼Œ<strong>å¦‚æœæ˜¯å†™è¯·æ±‚åˆ™è¦è½¬å‘ç»™ <code>Leader</code></strong> ã€‚åœ¨é€‰ä¸¾è¿‡ç¨‹ä¸­ä¼šå‚ä¸æŠ•ç¥¨ï¼Œ<strong>æœ‰é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒ</strong> ã€‚</li><li><code>Observer</code> ï¼šå°±æ˜¯æ²¡æœ‰é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒçš„ <code>Follower</code> ã€‚</li></ul><p>åœ¨ <code>ZAB</code> åè®®ä¸­å¯¹ <code>zkServer</code>(å³ä¸Šé¢æˆ‘ä»¬è¯´çš„ä¸‰ä¸ªè§’è‰²çš„æ€»ç§°) è¿˜æœ‰ä¸¤ç§æ¨¡å¼çš„å®šä¹‰ï¼Œåˆ†åˆ«æ˜¯ <strong>æ¶ˆæ¯å¹¿æ’­</strong> å’Œ <strong>å´©æºƒæ¢å¤</strong> ã€‚</p><h3 id="_5-3-æ¶ˆæ¯å¹¿æ’­æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_5-3-æ¶ˆæ¯å¹¿æ’­æ¨¡å¼" aria-hidden="true">#</a> 5.3. æ¶ˆæ¯å¹¿æ’­æ¨¡å¼</h3><p>è¯´ç™½äº†å°±æ˜¯ <code>ZAB</code> åè®®æ˜¯å¦‚ä½•å¤„ç†å†™è¯·æ±‚çš„ï¼Œä¸Šé¢æˆ‘ä»¬ä¸æ˜¯è¯´åªæœ‰ <code>Leader</code> èƒ½å¤„ç†å†™è¯·æ±‚å˜›ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬çš„ <code>Follower</code> å’Œ <code>Observer</code> æ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦ <strong>åŒæ­¥æ›´æ–°æ•°æ®</strong> å‘¢ï¼Ÿæ€»ä¸èƒ½æ•°æ®åªåœ¨ <code>Leader</code> ä¸­æ›´æ–°äº†ï¼Œå…¶ä»–è§’è‰²éƒ½æ²¡æœ‰å¾—åˆ°æ›´æ–°å§ï¼Ÿ</p><p>ä¸å°±æ˜¯ <strong>åœ¨æ•´ä¸ªé›†ç¾¤ä¸­ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§</strong> å˜›ï¼Ÿå¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>åºŸè¯ï¼Œç¬¬ä¸€æ­¥è‚¯å®šéœ€è¦ <code>Leader</code> å°†å†™è¯·æ±‚ <strong>å¹¿æ’­</strong> å‡ºå»å‘€ï¼Œè®© <code>Leader</code> é—®é—® <code>Followers</code> æ˜¯å¦åŒæ„æ›´æ–°ï¼Œå¦‚æœè¶…è¿‡åŠæ•°ä»¥ä¸Šçš„åŒæ„é‚£ä¹ˆå°±è¿›è¡Œ <code>Follower</code> å’Œ <code>Observer</code> çš„æ›´æ–°ï¼ˆå’Œ <code>Paxos</code> ä¸€æ ·ï¼‰ã€‚å½“ç„¶è¿™ä¹ˆè¯´æœ‰ç‚¹è™šï¼Œç”»å¼ å›¾ç†è§£ä¸€ä¸‹ã€‚</p><p><img src="/assets/image-20220808012252.d25d4af0.png" alt="æ¶ˆæ¯å¹¿æ’­" loading="lazy"></p><p>å—¯ã€‚ã€‚ã€‚çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œè²Œä¼¼æ‡‚äº†ğŸ¤¥ğŸ¤¥ğŸ¤¥ã€‚è¿™ä¸¤ä¸ª <code>Queue</code> å“ªå†’å‡ºæ¥çš„ï¼Ÿç­”æ¡ˆæ˜¯ <strong><code>ZAB</code> éœ€è¦è®© <code>Follower</code> å’Œ <code>Observer</code> ä¿è¯é¡ºåºæ€§</strong> ã€‚ä½•ä¸ºé¡ºåºæ€§ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªå†™è¯·æ±‚Aï¼Œæ­¤æ—¶ <code>Leader</code> å°†è¯·æ±‚Aå¹¿æ’­å‡ºå»ï¼Œå› ä¸ºåªéœ€è¦åŠæ•°åŒæ„å°±è¡Œï¼Œæ‰€ä»¥å¯èƒ½è¿™ä¸ªæ—¶å€™æœ‰ä¸€ä¸ª <code>Follower</code> F1å› ä¸ºç½‘ç»œåŸå› æ²¡æœ‰æ”¶åˆ°ï¼Œè€Œ <code>Leader</code> åˆå¹¿æ’­äº†ä¸€ä¸ªè¯·æ±‚Bï¼Œå› ä¸ºç½‘ç»œåŸå› ï¼ŒF1ç«Ÿç„¶å…ˆæ”¶åˆ°äº†è¯·æ±‚Bç„¶åæ‰æ”¶åˆ°äº†è¯·æ±‚Aï¼Œè¿™ä¸ªæ—¶å€™è¯·æ±‚å¤„ç†çš„é¡ºåºä¸åŒå°±ä¼šå¯¼è‡´æ•°æ®çš„ä¸åŒï¼Œä»è€Œ <strong>äº§ç”Ÿæ•°æ®ä¸ä¸€è‡´é—®é¢˜</strong> ã€‚</p><p>æ‰€ä»¥åœ¨ <code>Leader</code> è¿™ç«¯ï¼Œå®ƒä¸ºæ¯ä¸ªå…¶ä»–çš„ <code>zkServer</code> å‡†å¤‡äº†ä¸€ä¸ª <strong>é˜Ÿåˆ—</strong> ï¼Œé‡‡ç”¨å…ˆè¿›å…ˆå‡ºçš„æ–¹å¼å‘é€æ¶ˆæ¯ã€‚ç”±äºåè®®æ˜¯ **é€šè¿‡ <code>TCP</code> **æ¥è¿›è¡Œç½‘ç»œé€šä¿¡çš„ï¼Œä¿è¯äº†æ¶ˆæ¯çš„å‘é€é¡ºåºæ€§ï¼Œæ¥å—é¡ºåºæ€§ä¹Ÿå¾—åˆ°äº†ä¿è¯ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ <code>ZAB</code> ä¸­è¿˜å®šä¹‰äº†ä¸€ä¸ª <strong>å…¨å±€å•è°ƒé€’å¢çš„äº‹åŠ¡ID <code>ZXID</code></strong> ï¼Œå®ƒæ˜¯ä¸€ä¸ª64ä½longå‹ï¼Œå…¶ä¸­é«˜32ä½è¡¨ç¤º <code>epoch</code> å¹´ä»£ï¼Œä½32ä½è¡¨ç¤ºäº‹åŠ¡idã€‚<code>epoch</code> æ˜¯ä¼šæ ¹æ® <code>Leader</code> çš„å˜åŒ–è€Œå˜åŒ–çš„ï¼Œå½“ä¸€ä¸ª <code>Leader</code> æŒ‚äº†ï¼Œæ–°çš„ <code>Leader</code> ä¸Šä½çš„æ—¶å€™ï¼Œå¹´ä»£ï¼ˆ<code>epoch</code>ï¼‰å°±å˜äº†ã€‚è€Œä½32ä½å¯ä»¥ç®€å•ç†è§£ä¸ºé€’å¢çš„äº‹åŠ¡idã€‚</p><p>å®šä¹‰è¿™ä¸ªçš„åŸå› ä¹Ÿæ˜¯ä¸ºäº†é¡ºåºæ€§ï¼Œæ¯ä¸ª <code>proposal</code> åœ¨ <code>Leader</code> ä¸­ç”Ÿæˆåéœ€è¦ <strong>é€šè¿‡å…¶ <code>ZXID</code> æ¥è¿›è¡Œæ’åº</strong> ï¼Œæ‰èƒ½å¾—åˆ°å¤„ç†ã€‚</p><h3 id="_5-4-å´©æºƒæ¢å¤æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_5-4-å´©æºƒæ¢å¤æ¨¡å¼" aria-hidden="true">#</a> 5.4. å´©æºƒæ¢å¤æ¨¡å¼</h3><p>è¯´åˆ°å´©æºƒæ¢å¤æˆ‘ä»¬é¦–å…ˆè¦æåˆ° <code>ZAB</code> ä¸­çš„ <code>Leader</code> é€‰ä¸¾ç®—æ³•ï¼Œå½“ç³»ç»Ÿå‡ºç°å´©æºƒå½±å“æœ€å¤§åº”è¯¥æ˜¯ <code>Leader</code> çš„å´©æºƒï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰ä¸€ä¸ª <code>Leader</code> ï¼Œæ‰€ä»¥å½“ <code>Leader</code> å‡ºç°é—®é¢˜çš„æ—¶å€™æˆ‘ä»¬åŠ¿å¿…éœ€è¦é‡æ–°é€‰ä¸¾ <code>Leader</code> ã€‚</p><p><code>Leader</code> é€‰ä¸¾å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„é˜¶æ®µï¼Œç¬¬ä¸€ä¸ªæ˜¯æˆ‘ä»¬æåˆ°çš„ <code>Leader</code> å®•æœºéœ€è¦é‡æ–°é€‰ä¸¾ï¼Œç¬¬äºŒåˆ™æ˜¯å½“ <code>Zookeeper</code> å¯åŠ¨æ—¶éœ€è¦è¿›è¡Œç³»ç»Ÿçš„ <code>Leader</code> åˆå§‹åŒ–é€‰ä¸¾ã€‚ä¸‹é¢æˆ‘å…ˆæ¥ä»‹ç»ä¸€ä¸‹ <code>ZAB</code> æ˜¯å¦‚ä½•è¿›è¡Œåˆå§‹åŒ–é€‰ä¸¾çš„ã€‚</p><p>å‡è®¾æˆ‘ä»¬é›†ç¾¤ä¸­æœ‰3å°æœºå™¨ï¼Œé‚£ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸¤å°ä»¥ä¸ŠåŒæ„ï¼ˆè¶…è¿‡åŠæ•°ï¼‰ã€‚æ¯”å¦‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯åŠ¨äº† <code>server1</code> ï¼Œå®ƒä¼šé¦–å…ˆ <strong>æŠ•ç¥¨ç»™è‡ªå·±</strong> ï¼ŒæŠ•ç¥¨å†…å®¹ä¸ºæœåŠ¡å™¨çš„ <code>myid</code> å’Œ <code>ZXID</code> ï¼Œå› ä¸ºåˆå§‹åŒ–æ‰€ä»¥ <code>ZXID</code> éƒ½ä¸º0ï¼Œæ­¤æ—¶ <code>server1</code> å‘å‡ºçš„æŠ•ç¥¨ä¸º (1,0)ã€‚ä½†æ­¤æ—¶ <code>server1</code> çš„æŠ•ç¥¨ä»…ä¸º1ï¼Œæ‰€ä»¥ä¸èƒ½ä½œä¸º <code>Leader</code> ï¼Œæ­¤æ—¶è¿˜åœ¨é€‰ä¸¾é˜¶æ®µæ‰€ä»¥æ•´ä¸ªé›†ç¾¤å¤„äº <strong><code>Looking</code> çŠ¶æ€</strong>ã€‚</p><p>æ¥ç€ <code>server2</code> å¯åŠ¨äº†ï¼Œå®ƒé¦–å…ˆä¹Ÿä¼šå°†æŠ•ç¥¨é€‰ç»™è‡ªå·±(2,0)ï¼Œå¹¶å°†æŠ•ç¥¨ä¿¡æ¯å¹¿æ’­å‡ºå»ï¼ˆ<code>server1</code>ä¹Ÿä¼šï¼Œåªæ˜¯å®ƒé‚£æ—¶æ²¡æœ‰å…¶ä»–çš„æœåŠ¡å™¨äº†ï¼‰ï¼Œ<code>server1</code> åœ¨æ”¶åˆ° <code>server2</code> çš„æŠ•ç¥¨ä¿¡æ¯åä¼šå°†æŠ•ç¥¨ä¿¡æ¯ä¸è‡ªå·±çš„ä½œæ¯”è¾ƒã€‚<strong>é¦–å…ˆå®ƒä¼šæ¯”è¾ƒ <code>ZXID</code> ï¼Œ<code>ZXID</code> å¤§çš„ä¼˜å…ˆä¸º <code>Leader</code>ï¼Œå¦‚æœç›¸åŒåˆ™æ¯”è¾ƒ <code>myid</code>ï¼Œ<code>myid</code> å¤§çš„ä¼˜å…ˆä½œä¸º <code>Leader</code></strong>ã€‚æ‰€ä»¥æ­¤æ—¶<code>server1</code> å‘ç° <code>server2</code> æ›´é€‚åˆåš <code>Leader</code>ï¼Œå®ƒå°±ä¼šå°†è‡ªå·±çš„æŠ•ç¥¨ä¿¡æ¯æ›´æ”¹ä¸º(2,0)ç„¶åå†å¹¿æ’­å‡ºå»ï¼Œä¹‹å<code>server2</code> æ”¶åˆ°ä¹‹åå‘ç°å’Œè‡ªå·±çš„ä¸€æ ·æ— éœ€åšæ›´æ”¹ï¼Œå¹¶ä¸”è‡ªå·±çš„ <strong>æŠ•ç¥¨å·²ç»è¶…è¿‡åŠæ•°</strong> ï¼Œåˆ™ <strong>ç¡®å®š <code>server2</code> ä¸º <code>Leader</code></strong>ï¼Œ<code>server1</code> ä¹Ÿä¼šå°†è‡ªå·±æœåŠ¡å™¨è®¾ç½®ä¸º <code>Following</code> å˜ä¸º <code>Follower</code>ã€‚æ•´ä¸ªæœåŠ¡å™¨å°±ä» <code>Looking</code> å˜ä¸ºäº†æ­£å¸¸çŠ¶æ€ã€‚</p><p>å½“ <code>server3</code> å¯åŠ¨å‘ç°é›†ç¾¤æ²¡æœ‰å¤„äº <code>Looking</code> çŠ¶æ€æ—¶ï¼Œå®ƒä¼šç›´æ¥ä»¥ <code>Follower</code> çš„èº«ä»½åŠ å…¥é›†ç¾¤ã€‚</p><p>è¿˜æ˜¯å‰é¢ä¸‰ä¸ª <code>server</code> çš„ä¾‹å­ï¼Œå¦‚æœåœ¨æ•´ä¸ªé›†ç¾¤è¿è¡Œçš„è¿‡ç¨‹ä¸­ <code>server2</code> æŒ‚äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤ä¼šå¦‚ä½•é‡æ–°é€‰ä¸¾ <code>Leader</code> å‘¢ï¼Ÿå…¶å®å’Œåˆå§‹åŒ–é€‰ä¸¾å·®ä¸å¤šã€‚</p><p>é¦–å…ˆæ¯«æ— ç–‘é—®çš„æ˜¯å‰©ä¸‹çš„ä¸¤ä¸ª <code>Follower</code> ä¼šå°†è‡ªå·±çš„çŠ¶æ€ <strong>ä» <code>Following</code> å˜ä¸º <code>Looking</code> çŠ¶æ€</strong> ï¼Œç„¶åæ¯ä¸ª <code>server</code> ä¼šå‘åˆå§‹åŒ–æŠ•ç¥¨ä¸€æ ·é¦–å…ˆç»™è‡ªå·±æŠ•ç¥¨ï¼ˆè¿™ä¸è¿‡è¿™é‡Œçš„ <code>zxid</code> å¯èƒ½ä¸æ˜¯0äº†ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿éšä¾¿å–ä¸ªæ•°å­—ï¼‰ã€‚</p><p>å‡è®¾ <code>server1</code> ç»™è‡ªå·±æŠ•ç¥¨ä¸º(1,99)ï¼Œç„¶åå¹¿æ’­ç»™å…¶ä»– <code>server</code>ï¼Œ<code>server3</code> é¦–å…ˆä¹Ÿä¼šç»™è‡ªå·±æŠ•ç¥¨(3,95)ï¼Œç„¶åä¹Ÿå¹¿æ’­ç»™å…¶ä»– <code>server</code>ã€‚<code>server1</code> å’Œ <code>server3</code> æ­¤æ—¶ä¼šæ”¶åˆ°å½¼æ­¤çš„æŠ•ç¥¨ä¿¡æ¯ï¼Œå’Œä¸€å¼€å§‹é€‰ä¸¾ä¸€æ ·ï¼Œä»–ä»¬ä¹Ÿä¼šæ¯”è¾ƒè‡ªå·±çš„æŠ•ç¥¨å’Œæ”¶åˆ°çš„æŠ•ç¥¨ï¼ˆ<code>zxid</code> å¤§çš„ä¼˜å…ˆï¼Œå¦‚æœç›¸åŒé‚£ä¹ˆå°± <code>myid</code> å¤§çš„ä¼˜å…ˆï¼‰ã€‚è¿™ä¸ªæ—¶å€™ <code>server1</code> æ”¶åˆ°äº† <code>server3</code> çš„æŠ•ç¥¨å‘ç°æ²¡è‡ªå·±çš„åˆé€‚æ•…ä¸å˜ï¼Œ<code>server3</code> æ”¶åˆ° <code>server1</code> çš„æŠ•ç¥¨ç»“æœåå‘ç°æ¯”è‡ªå·±çš„åˆé€‚äºæ˜¯æ›´æ”¹æŠ•ç¥¨ä¸º(1,99)ç„¶åå¹¿æ’­å‡ºå»ï¼Œæœ€å <code>server1</code> æ”¶åˆ°äº†å‘ç°è‡ªå·±çš„æŠ•ç¥¨å·²ç»è¶…è¿‡åŠæ•°å°±æŠŠè‡ªå·±è®¾ä¸º <code>Leader</code>ï¼Œ<code>server3</code> ä¹Ÿéšä¹‹å˜ä¸º <code>Follower</code>ã€‚</p><blockquote><p>è¯·æ³¨æ„ <code>ZooKeeper</code> ä¸ºä»€ä¹ˆè¦è®¾ç½®å¥‡æ•°ä¸ªç»“ç‚¹ï¼Ÿæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬æ˜¯ä¸‰ä¸ªï¼ŒæŒ‚äº†ä¸€ä¸ªæˆ‘ä»¬è¿˜èƒ½æ­£å¸¸å·¥ä½œï¼ŒæŒ‚äº†ä¸¤ä¸ªæˆ‘ä»¬å°±ä¸èƒ½æ­£å¸¸å·¥ä½œäº†ï¼ˆå·²ç»æ²¡æœ‰è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ•°äº†ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡ŒæŠ•ç¥¨ç­‰æ“ä½œäº†ï¼‰ã€‚è€Œå‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰å››ä¸ªï¼ŒæŒ‚äº†ä¸€ä¸ªä¹Ÿèƒ½å·¥ä½œï¼Œ<strong>ä½†æ˜¯æŒ‚äº†ä¸¤ä¸ªä¹Ÿä¸èƒ½æ­£å¸¸å·¥ä½œäº†</strong>ï¼Œè¿™æ˜¯å’Œä¸‰ä¸ªä¸€æ ·çš„ï¼Œè€Œä¸‰ä¸ªæ¯”å››ä¸ªè¿˜å°‘ä¸€ä¸ªï¼Œå¸¦æ¥çš„æ•ˆç›Šæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ <code>Zookeeper</code> æ¨èå¥‡æ•°ä¸ª <code>server</code> ã€‚</p></blockquote><p>é‚£ä¹ˆè¯´å®Œäº† <code>ZAB</code> ä¸­çš„ <code>Leader</code> é€‰ä¸¾æ–¹å¼ä¹‹åæˆ‘ä»¬å†æ¥äº†è§£ä¸€ä¸‹ <strong>å´©æºƒæ¢å¤</strong> æ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ</p><p>å…¶å®ä¸»è¦å°±æ˜¯ <strong>å½“é›†ç¾¤ä¸­æœ‰æœºå™¨æŒ‚äº†ï¼Œæˆ‘ä»¬æ•´ä¸ªé›†ç¾¤å¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Ÿ</strong></p><p>å¦‚æœåªæ˜¯ <code>Follower</code> æŒ‚äº†ï¼Œè€Œä¸”æŒ‚çš„æ²¡è¶…è¿‡åŠæ•°çš„æ—¶å€™ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€å¼€å§‹è®²äº†åœ¨ <code>Leader</code> ä¸­ä¼šç»´æŠ¤é˜Ÿåˆ—ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒåé¢çš„æ•°æ®æ²¡æ¥æ”¶åˆ°å¯¼è‡´æ•°æ®ä¸ä¸€è‡´æ€§ã€‚</p><p>å¦‚æœ <code>Leader</code> æŒ‚äº†é‚£å°±éº»çƒ¦äº†ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦å…ˆæš‚åœæœåŠ¡å˜ä¸º <code>Looking</code> çŠ¶æ€ç„¶åè¿›è¡Œ <code>Leader</code> çš„é‡æ–°é€‰ä¸¾ï¼ˆä¸Šé¢æˆ‘è®²è¿‡äº†ï¼‰ï¼Œä½†è¿™ä¸ªå°±è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µäº†ï¼Œåˆ†åˆ«æ˜¯ <strong>ç¡®ä¿å·²ç»è¢«Leaderæäº¤çš„ææ¡ˆæœ€ç»ˆèƒ½å¤Ÿè¢«æ‰€æœ‰çš„Followeræäº¤</strong> å’Œ <strong>è·³è¿‡é‚£äº›å·²ç»è¢«ä¸¢å¼ƒçš„ææ¡ˆ</strong> ã€‚</p><p>ç¡®ä¿å·²ç»è¢«Leaderæäº¤çš„ææ¡ˆæœ€ç»ˆèƒ½å¤Ÿè¢«æ‰€æœ‰çš„Followeræäº¤æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>å‡è®¾ <code>Leader (server2)</code> å‘é€ <code>commit</code> è¯·æ±‚ï¼ˆå¿˜äº†è¯·çœ‹ä¸Šé¢çš„æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ï¼‰ï¼Œä»–å‘é€ç»™äº† <code>server3</code>ï¼Œç„¶åè¦å‘ç»™ <code>server1</code> çš„æ—¶å€™çªç„¶æŒ‚äº†ã€‚è¿™ä¸ªæ—¶å€™é‡æ–°é€‰ä¸¾çš„æ—¶å€™æˆ‘ä»¬å¦‚æœæŠŠ <code>server1</code> ä½œä¸º <code>Leader</code> çš„è¯ï¼Œé‚£ä¹ˆè‚¯å®šä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æ€§ï¼Œå› ä¸º <code>server3</code> è‚¯å®šä¼šæäº¤åˆšåˆš <code>server2</code> å‘é€çš„ <code>commit</code> è¯·æ±‚çš„ææ¡ˆï¼Œè€Œ <code>server1</code> æ ¹æœ¬æ²¡æ”¶åˆ°æ‰€ä»¥ä¼šä¸¢å¼ƒã€‚</p><p><img src="/assets/image-20220808012306.b164acb7.png" alt="å´©æºƒæ¢å¤" loading="lazy"></p><p>é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p><p>èªæ˜çš„åŒå­¦è‚¯å®šä¼šè´¨ç–‘ï¼Œ<strong>è¿™ä¸ªæ—¶å€™ <code>server1</code> å·²ç»ä¸å¯èƒ½æˆä¸º <code>Leader</code> äº†ï¼Œå› ä¸º <code>server1</code> å’Œ <code>server3</code> è¿›è¡ŒæŠ•ç¥¨é€‰ä¸¾çš„æ—¶å€™ä¼šæ¯”è¾ƒ <code>ZXID</code> ï¼Œè€Œæ­¤æ—¶ <code>server3</code> çš„ <code>ZXID</code> è‚¯å®šæ¯” <code>server1</code> çš„å¤§äº†</strong>ã€‚(ä¸ç†è§£å¯ä»¥çœ‹å‰é¢çš„é€‰ä¸¾ç®—æ³•)</p><p>é‚£ä¹ˆè·³è¿‡é‚£äº›å·²ç»è¢«ä¸¢å¼ƒçš„ææ¡ˆåˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>å‡è®¾ <code>Leader (server2)</code> æ­¤æ—¶åŒæ„äº†ææ¡ˆN1ï¼Œè‡ªèº«æäº¤äº†è¿™ä¸ªäº‹åŠ¡å¹¶ä¸”è¦å‘é€ç»™æ‰€æœ‰ <code>Follower</code> è¦ <code>commit</code> çš„è¯·æ±‚ï¼Œå´åœ¨è¿™ä¸ªæ—¶å€™æŒ‚äº†ï¼Œæ­¤æ—¶è‚¯å®šè¦é‡æ–°è¿›è¡Œ <code>Leader</code> çš„é€‰ä¸¾ï¼Œæ¯”å¦‚è¯´æ­¤æ—¶é€‰ <code>server1</code> ä¸º <code>Leader</code> ï¼ˆè¿™æ— æ‰€è°“ï¼‰ã€‚ä½†æ˜¯è¿‡äº†ä¸€ä¼šï¼Œè¿™ä¸ª <strong>æŒ‚æ‰çš„ <code>Leader</code> åˆé‡æ–°æ¢å¤äº†</strong> ï¼Œæ­¤æ—¶å®ƒè‚¯å®šä¼šä½œä¸º <code>Follower</code> çš„èº«ä»½è¿›å…¥é›†ç¾¤ä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åˆšåˆš <code>server2</code> å·²ç»åŒæ„æäº¤äº†ææ¡ˆN1ï¼Œä½†å…¶ä»– <code>server</code> å¹¶æ²¡æœ‰æ”¶åˆ°å®ƒçš„ <code>commit</code> ä¿¡æ¯ï¼Œæ‰€ä»¥å…¶ä»– <code>server</code> ä¸å¯èƒ½å†æäº¤è¿™ä¸ªææ¡ˆN1äº†ï¼Œè¿™æ ·å°±ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜äº†ï¼Œæ‰€ä»¥ <strong>è¯¥ææ¡ˆN1æœ€ç»ˆéœ€è¦è¢«æŠ›å¼ƒæ‰</strong> ã€‚</p><p><img src="/assets/image-20220808012315.3c464d33.png" alt="å´©æºƒæ¢å¤" loading="lazy"></p><h2 id="_6-zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#_6-zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†" aria-hidden="true">#</a> 6. Zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†</h2><p>äº†è§£äº† <code>ZAB</code> åè®®è¿˜ä¸å¤Ÿï¼Œå®ƒä»…ä»…æ˜¯ <code>Zookeeper</code> å†…éƒ¨å®ç°çš„ä¸€ç§æ–¹å¼ï¼Œè€Œæˆ‘ä»¬å¦‚ä½•é€šè¿‡ <code>Zookeeper</code> å»åšä¸€äº›å…¸å‹çš„åº”ç”¨åœºæ™¯å‘¢ï¼Ÿæ¯”å¦‚è¯´é›†ç¾¤ç®¡ç†ï¼Œåˆ†å¸ƒå¼é”ï¼Œ<code>Master</code> é€‰ä¸¾ç­‰ç­‰ã€‚</p><p>è¿™å°±æ¶‰åŠåˆ°å¦‚ä½•ä½¿ç”¨ <code>Zookeeper</code> äº†ï¼Œä½†åœ¨ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦æŒæ¡å‡ ä¸ªæ¦‚å¿µã€‚æ¯”å¦‚ <code>Zookeeper</code> çš„ <strong>æ•°æ®æ¨¡å‹</strong> ã€<strong>ä¼šè¯æœºåˆ¶</strong>ã€<strong>ACL</strong>ã€<strong>Watcheræœºåˆ¶</strong> ç­‰ç­‰ã€‚</p><h3 id="_6-1-æ•°æ®æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_6-1-æ•°æ®æ¨¡å‹" aria-hidden="true">#</a> 6.1. æ•°æ®æ¨¡å‹</h3><p><code>zookeeper</code> æ•°æ®å­˜å‚¨ç»“æ„ä¸æ ‡å‡†çš„ <code>Unix</code> æ–‡ä»¶ç³»ç»Ÿéå¸¸ç›¸ä¼¼ï¼Œéƒ½æ˜¯åœ¨æ ¹èŠ‚ç‚¹ä¸‹æŒ‚å¾ˆå¤šå­èŠ‚ç‚¹(æ ‘å‹)ã€‚ä½†æ˜¯ <code>zookeeper</code> ä¸­æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿä¸­ç›®å½•ä¸æ–‡ä»¶çš„æ¦‚å¿µï¼Œè€Œæ˜¯ <strong>ä½¿ç”¨äº† <code>znode</code> ä½œä¸ºæ•°æ®èŠ‚ç‚¹</strong> ã€‚<code>znode</code> æ˜¯ <code>zookeeper</code> ä¸­çš„æœ€å°æ•°æ®å•å…ƒï¼Œæ¯ä¸ª <code>znode</code> ä¸Šéƒ½å¯ä»¥ä¿å­˜æ•°æ®ï¼ŒåŒæ—¶è¿˜å¯ä»¥æŒ‚è½½å­èŠ‚ç‚¹ï¼Œå½¢æˆä¸€ä¸ªæ ‘å½¢åŒ–å‘½åç©ºé—´ã€‚</p><p><img src="/assets/image-20220808012325.cecb3f77.png" alt="zkæ•°æ®æ¨¡å‹" loading="lazy"></p><p>æ¯ä¸ª <code>znode</code> éƒ½æœ‰è‡ªå·±æ‰€å±çš„ <strong>èŠ‚ç‚¹ç±»å‹</strong> å’Œ <strong>èŠ‚ç‚¹çŠ¶æ€</strong>ã€‚</p><p>å…¶ä¸­èŠ‚ç‚¹ç±»å‹å¯ä»¥åˆ†ä¸º <strong>æŒä¹…èŠ‚ç‚¹</strong>ã€<strong>æŒä¹…é¡ºåºèŠ‚ç‚¹</strong>ã€<strong>ä¸´æ—¶èŠ‚ç‚¹</strong> å’Œ <strong>ä¸´æ—¶é¡ºåºèŠ‚ç‚¹</strong>ã€‚</p><ul><li>æŒä¹…èŠ‚ç‚¹ï¼šä¸€æ—¦åˆ›å»ºå°±ä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°å°†å…¶åˆ é™¤ã€‚</li><li>æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼šä¸€ä¸ªçˆ¶èŠ‚ç‚¹å¯ä»¥ä¸ºå…¶å­èŠ‚ç‚¹ <strong>ç»´æŠ¤ä¸€ä¸ªåˆ›å»ºçš„å…ˆåé¡ºåº</strong> ï¼Œè¿™ä¸ªé¡ºåºä½“ç°åœ¨ <strong>èŠ‚ç‚¹åç§°</strong> ä¸Šï¼Œæ˜¯èŠ‚ç‚¹åç§°åè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªç”± 10 ä½æ•°å­—ç»„æˆçš„æ•°å­—ä¸²ï¼Œä» 0 å¼€å§‹è®¡æ•°ã€‚</li><li>ä¸´æ—¶èŠ‚ç‚¹ï¼šä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ <strong>å®¢æˆ·ç«¯ä¼šè¯</strong> ç»‘å®šçš„ï¼Œ<strong>ä¼šè¯æ¶ˆå¤±åˆ™èŠ‚ç‚¹æ¶ˆå¤±</strong> ã€‚ä¸´æ—¶èŠ‚ç‚¹ <strong>åªèƒ½åšå¶å­èŠ‚ç‚¹</strong> ï¼Œä¸èƒ½åˆ›å»ºå­èŠ‚ç‚¹ã€‚</li><li>ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼šçˆ¶èŠ‚ç‚¹å¯ä»¥åˆ›å»ºä¸€ä¸ªç»´æŒäº†é¡ºåºçš„ä¸´æ—¶èŠ‚ç‚¹(å’Œå‰é¢çš„æŒä¹…é¡ºåºæ€§èŠ‚ç‚¹ä¸€æ ·)ã€‚</li></ul><p>èŠ‚ç‚¹çŠ¶æ€ä¸­åŒ…å«äº†å¾ˆå¤šèŠ‚ç‚¹çš„å±æ€§æ¯”å¦‚ <code>czxid</code> ã€<code>mzxid</code> ç­‰ç­‰ï¼Œåœ¨ <code>zookeeper</code> ä¸­æ˜¯ä½¿ç”¨ <code>Stat</code> è¿™ä¸ªç±»æ¥ç»´æŠ¤çš„ã€‚ä¸‹é¢æˆ‘åˆ—ä¸¾ä¸€äº›å±æ€§è§£é‡Šã€‚</p><ul><li><code>czxid</code>ï¼š<code>Created ZXID</code>ï¼Œè¯¥æ•°æ®èŠ‚ç‚¹è¢« <strong>åˆ›å»º</strong> æ—¶çš„äº‹åŠ¡IDã€‚</li><li><code>mzxid</code>ï¼š<code>Modified ZXID</code>ï¼ŒèŠ‚ç‚¹ <strong>æœ€åä¸€æ¬¡è¢«æ›´æ–°æ—¶</strong> çš„äº‹åŠ¡IDã€‚</li><li><code>ctime</code>ï¼š<code>Created Time</code>ï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ›å»ºçš„æ—¶é—´ã€‚</li><li><code>mtime</code>ï¼š <code>Modified Time</code>ï¼Œè¯¥èŠ‚ç‚¹æœ€åä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´ã€‚</li><li><code>version</code>ï¼šèŠ‚ç‚¹çš„ç‰ˆæœ¬å·ã€‚</li><li><code>cversion</code>ï¼š<strong>å­èŠ‚ç‚¹</strong> çš„ç‰ˆæœ¬å·ã€‚</li><li><code>aversion</code>ï¼šèŠ‚ç‚¹çš„ <code>ACL</code> ç‰ˆæœ¬å·ã€‚</li><li><code>ephemeralOwner</code>ï¼šåˆ›å»ºè¯¥èŠ‚ç‚¹çš„ä¼šè¯çš„ <code>sessionID</code> ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹ä¸ºæŒä¹…èŠ‚ç‚¹ï¼Œè¯¥å€¼ä¸º0ã€‚</li><li><code>dataLength</code>ï¼šèŠ‚ç‚¹æ•°æ®å†…å®¹çš„é•¿åº¦ã€‚</li><li><code>numChildre</code>ï¼šè¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•°ï¼Œå¦‚æœä¸ºä¸´æ—¶èŠ‚ç‚¹ä¸º0ã€‚</li><li><code>pzxid</code>ï¼šè¯¥èŠ‚ç‚¹å­èŠ‚ç‚¹åˆ—è¡¨æœ€åä¸€æ¬¡è¢«ä¿®æ”¹æ—¶çš„äº‹åŠ¡IDï¼Œæ³¨æ„æ˜¯å­èŠ‚ç‚¹çš„ <strong>åˆ—è¡¨</strong> ï¼Œä¸æ˜¯å†…å®¹ã€‚</li></ul><h3 id="_6-2-ä¼šè¯" tabindex="-1"><a class="header-anchor" href="#_6-2-ä¼šè¯" aria-hidden="true">#</a> 6.2. ä¼šè¯</h3><p>æˆ‘æƒ³è¿™ä¸ªå¯¹äºåç«¯å¼€å‘çš„æœ‹å‹è‚¯å®šä¸é™Œç”Ÿï¼Œä¸å°±æ˜¯ <code>session</code> å—ï¼Ÿåªä¸è¿‡ <code>zk</code> å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯é€šè¿‡ <strong><code>TCP</code> é•¿è¿æ¥</strong> ç»´æŒçš„ä¼šè¯æœºåˆ¶ï¼Œå…¶å®å¯¹äºä¼šè¯æ¥è¯´ä½ å¯ä»¥ç†è§£ä¸º <strong>ä¿æŒè¿æ¥çŠ¶æ€</strong> ã€‚</p><p>åœ¨ <code>zookeeper</code> ä¸­ï¼Œä¼šè¯è¿˜æœ‰å¯¹åº”çš„äº‹ä»¶ï¼Œæ¯”å¦‚ <code>CONNECTION_LOSS è¿æ¥ä¸¢å¤±äº‹ä»¶</code> ã€<code>SESSION_MOVED ä¼šè¯è½¬ç§»äº‹ä»¶</code> ã€<code>SESSION_EXPIRED ä¼šè¯è¶…æ—¶å¤±æ•ˆäº‹ä»¶</code> ã€‚</p><h3 id="_6-3-acl" tabindex="-1"><a class="header-anchor" href="#_6-3-acl" aria-hidden="true">#</a> 6.3. ACL</h3><p><code>ACL</code> ä¸º <code>Access Control Lists</code> ï¼Œå®ƒæ˜¯ä¸€ç§æƒé™æ§åˆ¶ã€‚åœ¨ <code>zookeeper</code> ä¸­å®šä¹‰äº†5ç§æƒé™ï¼Œå®ƒä»¬åˆ†åˆ«ä¸ºï¼š</p><ul><li><code>CREATE</code> ï¼šåˆ›å»ºå­èŠ‚ç‚¹çš„æƒé™ã€‚</li><li><code>READ</code>ï¼šè·å–èŠ‚ç‚¹æ•°æ®å’Œå­èŠ‚ç‚¹åˆ—è¡¨çš„æƒé™ã€‚</li><li><code>WRITE</code>ï¼šæ›´æ–°èŠ‚ç‚¹æ•°æ®çš„æƒé™ã€‚</li><li><code>DELETE</code>ï¼šåˆ é™¤å­èŠ‚ç‚¹çš„æƒé™ã€‚</li><li><code>ADMIN</code>ï¼šè®¾ç½®èŠ‚ç‚¹ ACL çš„æƒé™ã€‚</li></ul><h3 id="_6-4-watcheræœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_6-4-watcheræœºåˆ¶" aria-hidden="true">#</a> 6.4. Watcheræœºåˆ¶</h3><p><code>Watcher</code> ä¸ºäº‹ä»¶ç›‘å¬å™¨ï¼Œæ˜¯ <code>zk</code> éå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½ä¾èµ–äºå®ƒï¼Œå®ƒæœ‰ç‚¹ç±»ä¼¼äºè®¢é˜…çš„æ–¹å¼ï¼Œå³å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ <strong>æ³¨å†Œ</strong> æŒ‡å®šçš„ <code>watcher</code> ï¼Œå½“æœåŠ¡ç«¯ç¬¦åˆäº† <code>watcher</code> çš„æŸäº›äº‹ä»¶æˆ–è¦æ±‚åˆ™ä¼š <strong>å‘å®¢æˆ·ç«¯å‘é€äº‹ä»¶é€šçŸ¥</strong> ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°é€šçŸ¥åæ‰¾åˆ°è‡ªå·±å®šä¹‰çš„ <code>Watcher</code> ç„¶å <strong>æ‰§è¡Œç›¸åº”çš„å›è°ƒæ–¹æ³•</strong> ã€‚</p><p><img src="/assets/image-20220808012335.f52e1c3c.png" alt="watcheræœºåˆ¶" loading="lazy"></p><h2 id="_7-zookeeperçš„å‡ ä¸ªå…¸å‹åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_7-zookeeperçš„å‡ ä¸ªå…¸å‹åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> 7. Zookeeperçš„å‡ ä¸ªå…¸å‹åº”ç”¨åœºæ™¯</h2><p>å‰é¢è¯´äº†è¿™ä¹ˆå¤šçš„ç†è®ºçŸ¥è¯†ï¼Œä½ å¯èƒ½å¬å¾—ä¸€å¤´é›¾æ°´ï¼Œè¿™äº›ç©æ„æœ‰å•¥ç”¨ï¼Ÿèƒ½å¹²å•¥äº‹ï¼Ÿåˆ«æ€¥ï¼Œå¬æˆ‘æ…¢æ…¢é“æ¥ã€‚</p><h3 id="_7-1-é€‰ä¸»" tabindex="-1"><a class="header-anchor" href="#_7-1-é€‰ä¸»" aria-hidden="true">#</a> 7.1. é€‰ä¸»</h3><p>è¿˜è®°å¾—ä¸Šé¢æˆ‘ä»¬çš„æ‰€è¯´çš„ä¸´æ—¶èŠ‚ç‚¹å—ï¼Ÿå› ä¸º <code>Zookeeper</code> çš„å¼ºä¸€è‡´æ€§ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°åœ¨ä¿è¯ <strong>åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ä¿è¯èŠ‚ç‚¹åˆ›å»ºçš„å…¨å±€å”¯ä¸€æ€§</strong> (å³æ— æ³•é‡å¤åˆ›å»ºåŒæ ·çš„èŠ‚ç‚¹)ã€‚</p><p>åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ <strong>è®©å¤šä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæŒ‡å®šçš„èŠ‚ç‚¹</strong> ï¼Œåˆ›å»ºæˆåŠŸçš„å°±æ˜¯ <code>master</code>ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœè¿™ä¸ª <code>master</code> æŒ‚äº†æ€ä¹ˆåŠï¼Ÿï¼Ÿï¼Ÿ</p><p>ä½ æƒ³æƒ³ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼Ÿè¿˜è®°å¾—ä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ<code>master</code> æŒ‚äº†æ˜¯ä¸æ˜¯ä»£è¡¨ä¼šè¯æ–­äº†ï¼Ÿä¼šè¯æ–­äº†æ˜¯ä¸æ˜¯æ„å‘³ç€è¿™ä¸ªèŠ‚ç‚¹æ²¡äº†ï¼Ÿè¿˜è®°å¾— <code>watcher</code> å—ï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ <strong>è®©å…¶ä»–ä¸æ˜¯ <code>master</code> çš„èŠ‚ç‚¹ç›‘å¬èŠ‚ç‚¹çš„çŠ¶æ€</strong> ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ç›‘å¬è¿™ä¸ªä¸´æ—¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œå¦‚æœå­èŠ‚ç‚¹ä¸ªæ•°å˜äº†å°±ä»£è¡¨ <code>master</code> æŒ‚äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ <strong>è§¦å‘å›è°ƒå‡½æ•°è¿›è¡Œé‡æ–°é€‰ä¸¾</strong> ï¼Œæˆ–è€…æˆ‘ä»¬ç›´æ¥ç›‘å¬èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡èŠ‚ç‚¹æ˜¯å¦å·²ç»å¤±å»è¿æ¥æ¥åˆ¤æ–­ <code>master</code> æ˜¯å¦æŒ‚äº†ç­‰ç­‰ã€‚</p><p><img src="/assets/image-20220808012350.0376c6be.png" alt="é€‰ä¸»" loading="lazy"></p><p>æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨ <strong>åˆ©ç”¨ ä¸´æ—¶èŠ‚ç‚¹ã€èŠ‚ç‚¹çŠ¶æ€ å’Œ <code>watcher</code> æ¥å®ç°é€‰ä¸»çš„åŠŸèƒ½</strong>ï¼Œä¸´æ—¶èŠ‚ç‚¹ä¸»è¦ç”¨æ¥é€‰ä¸¾ï¼ŒèŠ‚ç‚¹çŠ¶æ€å’Œ<code>watcher</code> å¯ä»¥ç”¨æ¥åˆ¤æ–­ <code>master</code> çš„æ´»æ€§å’Œè¿›è¡Œé‡æ–°é€‰ä¸¾ã€‚</p><h3 id="_7-2-åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_7-2-åˆ†å¸ƒå¼é”" aria-hidden="true">#</a> 7.2. åˆ†å¸ƒå¼é”</h3><p>åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ <code>Redis</code> ã€æ•°æ®åº“ ã€<code>zookeeper</code> ç­‰ã€‚ä¸ªäººè®¤ä¸º <code>zookeeper</code> åœ¨å®ç°åˆ†å¸ƒå¼é”è¿™æ–¹é¢æ˜¯éå¸¸éå¸¸ç®€å•çš„ã€‚</p><p>ä¸Šé¢æˆ‘ä»¬å·²ç»æåˆ°è¿‡äº† <strong>zkåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ä¿è¯èŠ‚ç‚¹åˆ›å»ºçš„å…¨å±€å”¯ä¸€æ€§</strong>ï¼Œè¿™ç©æ„ä¸€çœ‹å°±çŸ¥é“èƒ½å¹²å•¥äº†ã€‚å®ç°äº’æ–¥é”å‘—ï¼Œåˆå› ä¸ºèƒ½åœ¨åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥èƒ½å®ç°åˆ†å¸ƒå¼é”å‘—ã€‚</p><p>å¦‚ä½•å®ç°å‘¢ï¼Ÿè¿™ç©æ„å…¶å®è·Ÿé€‰ä¸»åŸºæœ¬ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ä¸´æ—¶èŠ‚ç‚¹çš„åˆ›å»ºæ¥å®ç°ã€‚</p><p>é¦–å…ˆè‚¯å®šæ˜¯å¦‚ä½•è·å–é”ï¼Œå› ä¸ºåˆ›å»ºèŠ‚ç‚¹çš„å”¯ä¸€æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è®©å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹ï¼Œ<strong>åˆ›å»ºæˆåŠŸçš„å°±è¯´æ˜è·å–åˆ°äº†é”</strong> ã€‚ç„¶åæ²¡æœ‰è·å–åˆ°é”çš„å®¢æˆ·ç«¯ä¹Ÿåƒä¸Šé¢é€‰ä¸»çš„éä¸»èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ª <code>watcher</code> è¿›è¡ŒèŠ‚ç‚¹çŠ¶æ€çš„ç›‘å¬ï¼Œå¦‚æœè¿™ä¸ªäº’æ–¥é”è¢«é‡Šæ”¾äº†ï¼ˆå¯èƒ½è·å–é”çš„å®¢æˆ·ç«¯å®•æœºäº†ï¼Œæˆ–è€…é‚£ä¸ªå®¢æˆ·ç«¯ä¸»åŠ¨é‡Šæ”¾äº†é”ï¼‰å¯ä»¥è°ƒç”¨å›è°ƒå‡½æ•°é‡æ–°è·å¾—é”ã€‚</p><blockquote><p><code>zk</code> ä¸­ä¸éœ€è¦å‘ <code>redis</code> é‚£æ ·è€ƒè™‘é”å¾—ä¸åˆ°é‡Šæ”¾çš„é—®é¢˜äº†ï¼Œå› ä¸ºå½“å®¢æˆ·ç«¯æŒ‚äº†ï¼ŒèŠ‚ç‚¹ä¹ŸæŒ‚äº†ï¼Œé”ä¹Ÿé‡Šæ”¾äº†ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p></blockquote><p>é‚£èƒ½ä¸èƒ½ä½¿ç”¨ <code>zookeeper</code> åŒæ—¶å®ç° <strong>å…±äº«é”å’Œç‹¬å é”</strong> å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡ç¨å¾®æœ‰ç‚¹å¤æ‚è€Œå·²ã€‚</p><p>è¿˜è®°å¾— <strong>æœ‰åºçš„èŠ‚ç‚¹</strong> å—ï¼Ÿ</p><p>è¿™ä¸ªæ—¶å€™æˆ‘è§„å®šæ‰€æœ‰åˆ›å»ºèŠ‚ç‚¹å¿…é¡»æœ‰åºï¼Œå½“ä½ æ˜¯è¯»è¯·æ±‚ï¼ˆè¦è·å–å…±äº«é”ï¼‰çš„è¯ï¼Œå¦‚æœ <strong>æ²¡æœ‰æ¯”è‡ªå·±æ›´å°çš„èŠ‚ç‚¹ï¼Œæˆ–æ¯”è‡ªå·±å°çš„èŠ‚ç‚¹éƒ½æ˜¯è¯»è¯·æ±‚</strong> ï¼Œåˆ™å¯ä»¥è·å–åˆ°è¯»é”ï¼Œç„¶åå°±å¯ä»¥å¼€å§‹è¯»äº†ã€‚<strong>è‹¥æ¯”è‡ªå·±å°çš„èŠ‚ç‚¹ä¸­æœ‰å†™è¯·æ±‚</strong> ï¼Œåˆ™å½“å‰å®¢æˆ·ç«¯æ— æ³•è·å–åˆ°è¯»é”ï¼Œåªèƒ½ç­‰å¾…å‰é¢çš„å†™è¯·æ±‚å®Œæˆã€‚</p><p>å¦‚æœä½ æ˜¯å†™è¯·æ±‚ï¼ˆè·å–ç‹¬å é”ï¼‰ï¼Œè‹¥ <strong>æ²¡æœ‰æ¯”è‡ªå·±æ›´å°çš„èŠ‚ç‚¹</strong> ï¼Œåˆ™è¡¨ç¤ºå½“å‰å®¢æˆ·ç«¯å¯ä»¥ç›´æ¥è·å–åˆ°å†™é”ï¼Œå¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚è‹¥å‘ç° <strong>æœ‰æ¯”è‡ªå·±æ›´å°çš„èŠ‚ç‚¹ï¼Œæ— è®ºæ˜¯è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œï¼Œå½“å‰å®¢æˆ·ç«¯éƒ½æ— æ³•è·å–åˆ°å†™é”</strong> ï¼Œç­‰å¾…æ‰€æœ‰å‰é¢çš„æ“ä½œå®Œæˆã€‚</p><p>è¿™å°±å¾ˆå¥½åœ°åŒæ—¶å®ç°äº†å…±äº«é”å’Œç‹¬å é”ï¼Œå½“ç„¶è¿˜æœ‰ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ¯”å¦‚å½“ä¸€ä¸ªé”å¾—åˆ°é‡Šæ”¾å®ƒä¼šé€šçŸ¥æ‰€æœ‰ç­‰å¾…çš„å®¢æˆ·ç«¯ä»è€Œé€ æˆ <strong>ç¾Šç¾¤æ•ˆåº”</strong> ã€‚æ­¤æ—¶ä½ å¯ä»¥é€šè¿‡è®©ç­‰å¾…çš„èŠ‚ç‚¹åªç›‘å¬ä»–ä»¬å‰é¢çš„èŠ‚ç‚¹ã€‚</p><p>å…·ä½“æ€ä¹ˆåšå‘¢ï¼Ÿå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œä½ å¯ä»¥è®© <strong>è¯»è¯·æ±‚ç›‘å¬æ¯”è‡ªå·±å°çš„æœ€åä¸€ä¸ªå†™è¯·æ±‚èŠ‚ç‚¹ï¼Œå†™è¯·æ±‚åªç›‘å¬æ¯”è‡ªå·±å°çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹</strong> ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªå·±å»ç ”ç©¶ä¸€ä¸‹ã€‚</p><h3 id="_7-3-å‘½åæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_7-3-å‘½åæœåŠ¡" aria-hidden="true">#</a> 7.3. å‘½åæœåŠ¡</h3><p>å¦‚ä½•ç»™ä¸€ä¸ªå¯¹è±¡è®¾ç½®IDï¼Œå¤§å®¶å¯èƒ½éƒ½ä¼šæƒ³åˆ° <code>UUID</code>ï¼Œä½†æ˜¯ <code>UUID</code> æœ€å¤§çš„é—®é¢˜å°±åœ¨äºå®ƒå¤ªé•¿äº†ã€‚ã€‚ã€‚(å¤ªé•¿ä¸ä¸€å®šæ˜¯å¥½äº‹ï¼Œå˜¿å˜¿å˜¿)ã€‚é‚£ä¹ˆåœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ä½¿ç”¨ <code>zookeeper</code> æ¥å®ç°å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡ <code>zookeeper</code> æ˜¯é€šè¿‡ <strong>æ ‘å½¢ç»“æ„</strong> æ¥å­˜å‚¨æ•°æ®èŠ‚ç‚¹çš„ï¼Œé‚£ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹çš„ <strong>å…¨è·¯å¾„</strong>ï¼Œå®ƒå¿…å®šæ˜¯å”¯ä¸€çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŠ‚ç‚¹çš„å…¨è·¯å¾„ä½œä¸ºå‘½åæ–¹å¼äº†ã€‚è€Œä¸”æ›´é‡è¦çš„æ˜¯ï¼Œè·¯å¾„æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰çš„ï¼Œè¿™å¯¹äºæˆ‘ä»¬å¯¹æœ‰äº›æœ‰è¯­æ„çš„å¯¹è±¡çš„IDè®¾ç½®å¯ä»¥æ›´åŠ ä¾¿äºç†è§£ã€‚</p><h3 id="_7-4-é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#_7-4-é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ" aria-hidden="true">#</a> 7.4. é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ</h3><p>çœ‹åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯è§‰å¾— <code>zookeeper</code> å®åœ¨æ˜¯å¤ªå¼ºå¤§äº†ï¼Œå®ƒæ€ä¹ˆèƒ½è¿™ä¹ˆèƒ½å¹²ï¼</p><p>åˆ«æ€¥ï¼Œå®ƒèƒ½å¹²çš„äº‹æƒ…è¿˜å¾ˆå¤šå‘¢ã€‚å¯èƒ½æˆ‘ä»¬ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£æ•´ä¸ªé›†ç¾¤ä¸­æœ‰å¤šå°‘æœºå™¨åœ¨å·¥ä½œï¼Œæˆ‘ä»¬æƒ³å¯¹é›†ç¾¤ä¸­çš„æ¯å°æœºå™¨çš„è¿è¡Œæ—¶çŠ¶æ€è¿›è¡Œæ•°æ®é‡‡é›†ï¼Œå¯¹é›†ç¾¤ä¸­æœºå™¨è¿›è¡Œä¸Šä¸‹çº¿æ“ä½œç­‰ç­‰ã€‚</p><p>è€Œ <code>zookeeper</code> å¤©ç„¶æ”¯æŒçš„ <code>watcher</code> å’Œ ä¸´æ—¶èŠ‚ç‚¹èƒ½å¾ˆå¥½çš„å®ç°è¿™äº›éœ€æ±‚ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºæ¯æ¡æœºå™¨åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼Œå¹¶ç›‘æ§å…¶çˆ¶èŠ‚ç‚¹ï¼Œå¦‚æœå­èŠ‚ç‚¹åˆ—è¡¨æœ‰å˜åŠ¨ï¼ˆæˆ‘ä»¬å¯èƒ½åˆ›å»ºåˆ é™¤äº†ä¸´æ—¶èŠ‚ç‚¹ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨å…¶çˆ¶èŠ‚ç‚¹ç»‘å®šçš„ <code>watcher</code> è¿›è¡ŒçŠ¶æ€ç›‘æ§å’Œå›è°ƒã€‚</p><p><img src="/assets/image-20220808012404.472a9580.png" alt="é›†ç¾¤ç®¡ç†" loading="lazy"></p><p>è‡³äºæ³¨å†Œä¸­å¿ƒä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿæ˜¯è®© <strong>æœåŠ¡æä¾›è€…</strong> åœ¨ <code>zookeeper</code> ä¸­åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹å¹¶ä¸”å°†è‡ªå·±çš„ <code>ipã€portã€è°ƒç”¨æ–¹å¼</code> å†™å…¥èŠ‚ç‚¹ï¼Œå½“ <strong>æœåŠ¡æ¶ˆè´¹è€…</strong> éœ€è¦è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ä¼š <strong>é€šè¿‡æ³¨å†Œä¸­å¿ƒæ‰¾åˆ°ç›¸åº”çš„æœåŠ¡çš„åœ°å€åˆ—è¡¨(IPç«¯å£ä»€ä¹ˆçš„)</strong> ï¼Œå¹¶ç¼“å­˜åˆ°æœ¬åœ°(æ–¹ä¾¿ä»¥åè°ƒç”¨)ï¼Œå½“æ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡æ—¶ï¼Œä¸ä¼šå†å»è¯·æ±‚æ³¨å†Œä¸­å¿ƒï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ä»åœ°å€åˆ—è¡¨ä¸­å–ä¸€ä¸ªæœåŠ¡æä¾›è€…çš„æœåŠ¡å™¨è°ƒç”¨æœåŠ¡ã€‚</p><p>å½“æœåŠ¡æä¾›è€…çš„æŸå°æœåŠ¡å™¨å®•æœºæˆ–ä¸‹çº¿æ—¶ï¼Œç›¸åº”çš„åœ°å€ä¼šä»æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ç§»é™¤ã€‚åŒæ—¶ï¼Œæ³¨å†Œä¸­å¿ƒä¼šå°†æ–°çš„æœåŠ¡åœ°å€åˆ—è¡¨å‘é€ç»™æœåŠ¡æ¶ˆè´¹è€…çš„æœºå™¨å¹¶ç¼“å­˜åœ¨æ¶ˆè´¹è€…æœ¬æœºï¼ˆå½“ç„¶ä½ å¯ä»¥è®©æ¶ˆè´¹è€…è¿›è¡ŒèŠ‚ç‚¹ç›‘å¬ï¼Œæˆ‘è®°å¾— <code>Eureka</code> ä¼šå…ˆè¯•é”™ï¼Œç„¶åå†æ›´æ–°ï¼‰ã€‚</p><p><img src="/assets/image-20220808012412.b2de711e.png" alt="æ³¨å†Œä¸­å¿ƒ" loading="lazy"></p><h2 id="_8-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_8-æ€»ç»“" aria-hidden="true">#</a> 8. æ€»ç»“</h2><p>çœ‹åˆ°è¿™é‡Œçš„åŒå­¦å®åœ¨æ˜¯å¤ªæœ‰è€å¿ƒäº†ğŸ‘ğŸ‘ğŸ‘ï¼Œå¦‚æœè§‰å¾—æˆ‘å†™å¾—ä¸é”™çš„è¯ç‚¹ä¸ªèµå“ˆã€‚</p><p>ä¸çŸ¥é“å¤§å®¶æ˜¯å¦è¿˜è®°å¾—æˆ‘è®²äº†ä»€ä¹ˆğŸ˜’ã€‚</p><p>è¿™ç¯‡æ–‡ç« ä¸­æˆ‘å¸¦å¤§å®¶å…¥é—¨äº† <code>zookeeper</code> è¿™ä¸ªå¼ºå¤§çš„åˆ†å¸ƒå¼åè°ƒæ¡†æ¶ã€‚ç°åœ¨æˆ‘ä»¬æ¥ç®€å•æ¢³ç†ä¸€ä¸‹æ•´ç¯‡æ–‡ç« çš„å†…å®¹ã€‚</p><ul><li><p>åˆ†å¸ƒå¼ä¸é›†ç¾¤çš„åŒºåˆ«</p></li><li><p><code>2PC</code> ã€<code>3PC</code> ä»¥åŠ <code>paxos</code> ç®—æ³•è¿™äº›ä¸€è‡´æ€§æ¡†æ¶çš„åŸç†å’Œå®ç°ã€‚</p></li><li><p><code>zookeeper</code> ä¸“é—¨çš„ä¸€è‡´æ€§ç®—æ³• <code>ZAB</code> åŸå­å¹¿æ’­åè®®çš„å†…å®¹ï¼ˆ<code>Leader</code> é€‰ä¸¾ã€å´©æºƒæ¢å¤ã€æ¶ˆæ¯å¹¿æ’­ï¼‰ã€‚</p></li><li><p><code>zookeeper</code> ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œæ¯”å¦‚ <code>ACL</code>ï¼Œæ•°æ®èŠ‚ç‚¹ï¼Œä¼šè¯ï¼Œ<code>watcher</code>æœºåˆ¶ç­‰ç­‰ã€‚</p></li><li><p><code>zookeeper</code> çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚é€‰ä¸»ï¼Œæ³¨å†Œä¸­å¿ƒç­‰ç­‰ã€‚</p></li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/heplex/EzfriDocs/edit/main/docs/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/12/2 21:59:58</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: zcilive@gmail.com">chun.zheng</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-intro.html" class="nav-link prev" aria-label="ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(å…¥é—¨)"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(å…¥é—¨)</div></a><a href="/RD/distributed-system/distributed-process-coordination/zookeeper/zookeeper-in-action.html" class="nav-link next" aria-label="ZooKeeper å®æˆ˜"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">ZooKeeper å®æˆ˜<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">æµ™ICPå¤‡2021004971å·-2</a></div><div class="copyright">Copyright Â© 2022 EzFri</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.65bdb7b8.js" defer></script>
  </body>
</html>
